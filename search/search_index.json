{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Maya Floating Toolbox","text":"<p>\u6b22\u8fce\u4f7f\u7528 Maya Floating Toolbox \u5e2e\u52a9\u6587\u6863\uff01</p> <p>\u8fd9\u662f\u4e00\u4e2a\u4e13\u4e3a Maya \u5f00\u53d1\u7684\u9ad8\u6548\u7387\u5de5\u5177\u7bb1\uff0c\u65e8\u5728\u901a\u8fc7\u6d6e\u52a8\u9762\u677f\u548c\u7075\u6d3b\u7684\u6807\u8bb0\u83dc\u5355\uff08Marking Menu\uff09\u7cfb\u7edf\uff0c\u4f18\u5316\u60a8\u7684\u52a8\u753b\u3001\u7ed1\u5b9a\u548c\u5efa\u6a21\u6d41\u7a0b\u3002</p>"},{"location":"#_1","title":"\u6838\u5fc3\u7279\u6027","text":"<ul> <li>\ud83d\ude80 \u6d6e\u52a8\u5de5\u5177\u9762\u677f\uff1a\u968f\u65f6\u968f\u5730\u8bbf\u95ee\u60a8\u7684\u5e38\u7528\u5de5\u5177\u3002</li> <li>\ud83d\uddb1\ufe0f \u81ea\u5b9a\u4e49\u6807\u8bb0\u83dc\u5355\uff1a\u652f\u6301\u901a\u8fc7\u7f16\u8f91\u5668\u81ea\u7531\u914d\u7f6e\u5f84\u5411\u548c\u7ebf\u6027\u83dc\u5355\u3002</li> <li>\ud83c\udfa8 \u73b0\u4ee3\u5316 UI\uff1a\u57fa\u4e8e Dracula \u914d\u8272\u7684\u7cbe\u81f4\u754c\u9762\uff0c\u652f\u6301\u6d41\u7545\u7684\u52a8\u753b\u6548\u679c\u3002</li> <li>\ud83d\udee0\ufe0f MVVM \u67b6\u6784\uff1a\u5185\u90e8\u91c7\u7528\u6a21\u5757\u5316\u8bbe\u8ba1\uff0c\u6613\u4e8e\u6269\u5c55\u548c\u7ef4\u62a4\u3002</li> </ul>"},{"location":"#_2","title":"\u5feb\u901f\u5f00\u59cb","text":"<ol> <li>\u6309\u7167 \u5b89\u88c5\u6307\u5357 \u8fdb\u884c\u5b89\u88c5\u3002</li> <li>\u9605\u8bfb \u4f7f\u7528\u6559\u7a0b \u4e86\u89e3\u5982\u4f55\u914d\u7f6e\u60a8\u7684\u7b2c\u4e00\u4e2a\u5de5\u5177\u7bb1\u3002</li> </ol>"},{"location":"OPTIMIZATION_REPORT/","title":"Floating Toolbox \u4f18\u5316\u62a5\u544a\u4e0e\u5efa\u8bae","text":"<p>\u7248\u672c\uff1av1.0 \u65e5\u671f\uff1a2026-02-12 \u7f16\u5199\u8005\uff1a\u67b6\u6784\u5ba1\u67e5 \u72b6\u6001\uff1a\u5f85\u6267\u884c</p>"},{"location":"OPTIMIZATION_REPORT/#_1","title":"\u76ee\u5f55","text":"<ul> <li>\u4e00\u3001\u9879\u76ee\u603b\u89c8</li> <li>\u4e8c\u3001\u81f4\u547d\u7ea7 Bug\uff08P0\uff09</li> <li>\u4e09\u3001\u67b6\u6784\u5c42\u9762\u4f18\u5316\uff08P1\uff09</li> <li>\u56db\u3001\u4ee3\u7801\u8d28\u91cf\u95ee\u9898\uff08P2\uff09</li> <li>\u4e94\u3001\u529f\u80fd\u589e\u5f3a\u5efa\u8bae</li> <li>\u516d\u3001UI/UX \u4f18\u5316\u5efa\u8bae</li> <li>\u4e03\u3001\u6d4b\u8bd5\u8986\u76d6\u5206\u6790</li> <li>\u516b\u3001\u5f00\u6e90\u53d1\u5e03\u51c6\u5907</li> <li>\u4e5d\u3001\u5546\u4e1a\u7b56\u7565\u5efa\u8bae</li> <li>\u5341\u3001\u4f18\u5148\u7ea7\u603b\u8868</li> </ul>"},{"location":"OPTIMIZATION_REPORT/#_2","title":"\u4e00\u3001\u9879\u76ee\u603b\u89c8","text":""},{"location":"OPTIMIZATION_REPORT/#11","title":"1.1 \u67b6\u6784\u6982\u8ff0","text":"<p>\u9879\u76ee\u91c7\u7528 MVVM \u67b6\u6784\uff0c\u5206\u5c42\u5982\u4e0b\uff1a</p> <pre><code>floating_toolbox/\n\u251c\u2500\u2500 core/                    # Model \u5c42\uff1a\u4e1a\u52a1\u903b\u8f91\n\u2502   \u251c\u2500\u2500 tool_manager.py      # \u5de5\u5177\u7ba1\u7406\uff08\u5355\u4f8b\uff09\n\u2502   \u251c\u2500\u2500 category_manager.py  # \u5206\u7c7b\u7ba1\u7406\uff08\u5355\u4f8b\uff09\n\u2502   \u251c\u2500\u2500 config_manager.py    # \u914d\u7f6e\u6301\u4e45\u5316\uff08\u5355\u4f8b\uff09\n\u2502   \u251c\u2500\u2500 tool_model.py        # \u5de5\u5177\u6570\u636e\u6a21\u578b\n\u2502   \u251c\u2500\u2500 tool_loader.py       # \u5de5\u5177\u52a0\u8f7d\u5668\n\u2502   \u251c\u2500\u2500 resource_manager.py  # \u8d44\u6e90\u8def\u5f84\u89e3\u6790\uff08\u5355\u4f8b\uff09\n\u2502   \u251c\u2500\u2500 logger.py            # \u65e5\u5fd7\u7cfb\u7edf\uff08\u5355\u4f8b\uff09\n\u2502   \u2514\u2500\u2500 maya/                # Maya \u7279\u5b9a\u96c6\u6210\n\u2502       \u251c\u2500\u2500 config.py        # UI \u914d\u7f6e\u7ba1\u7406\n\u2502       \u251c\u2500\u2500 decorators.py    # @safe_execute \u88c5\u9970\u5668\n\u2502       \u251c\u2500\u2500 hotkey_manager.py# \u5feb\u6377\u952e\u7ba1\u7406\n\u2502       \u251c\u2500\u2500 maya_service.py  # Maya \u670d\u52a1\u5c42\n\u2502       \u2514\u2500\u2500 menu_manager.py  # Maya \u83dc\u5355\u96c6\u6210\n\u2502\n\u251c\u2500\u2500 ui/                      # View + ViewModel \u5c42\n\u2502   \u251c\u2500\u2500 toolbox_viewmodel.py # ViewModel\n\u2502   \u251c\u2500\u2500 tool_creator_viewmodel.py\n\u2502   \u251c\u2500\u2500 toolbox_controller.py# \u9762\u677f\u72b6\u6001\u63a7\u5236\u5668\n\u2502   \u251c\u2500\u2500 panels/              # View\uff1a\u9762\u677f\u7ec4\u4ef6\n\u2502   \u2502   \u251c\u2500\u2500 base_panel.py\n\u2502   \u2502   \u251c\u2500\u2500 idle_panel.py    # \u6d6e\u52a8\u7403\uff08\u5f85\u673a\u72b6\u6001\uff09\n\u2502   \u2502   \u251c\u2500\u2500 quick_panel.py   # \u5feb\u6377\u9762\u677f\n\u2502   \u2502   \u251c\u2500\u2500 full_panel.py    # \u5b8c\u6574\u5de5\u5177\u9762\u677f\n\u2502   \u2502   \u251c\u2500\u2500 docked_panel.py  # \u505c\u9760\u9762\u677f\n\u2502   \u2502   \u2514\u2500\u2500 panel_animation.py\n\u2502   \u251c\u2500\u2500 widgets/             # View\uff1a\u53ef\u590d\u7528\u7ec4\u4ef6\n\u2502   \u2514\u2500\u2500 styles.py / theme.py # \u6837\u5f0f\u7cfb\u7edf\n\u2502\n\u251c\u2500\u2500 marking_menu/            # \u6807\u8bb0\u83dc\u5355\u5b50\u7cfb\u7edf\n\u251c\u2500\u2500 tools/                   # \u5de5\u5177\u5b9a\u4e49\n\u251c\u2500\u2500 config/                  # \u914d\u7f6e\u6587\u4ef6\n\u2514\u2500\u2500 resources/               # \u56fe\u6807\u8d44\u6e90\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#12","title":"1.2 \u6570\u636e\u6d41\u5411","text":"<pre><code>\u7528\u6237\u70b9\u51fb\u5de5\u5177\n  \u2192 Panel (View) \u6355\u83b7\u4e8b\u4ef6\n    \u2192 ToolboxViewModel \u5904\u7406\u903b\u8f91\n      \u2192 ToolManager \u6267\u884c\u5de5\u5177\n        \u2192 MayaService.undo_chunk() + callback()\n          \u2192 Maya cmds \u6267\u884c\n      \u2192 ToolManager.save_config()\uff08\u8282\u6d41\u4fdd\u5b58\uff09\n    \u2192 ViewModel \u53d1\u5c04\u4fe1\u53f7\n  \u2192 Panel (View) \u66f4\u65b0\u663e\u793a\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#13","title":"1.3 \u5ba1\u67e5\u8303\u56f4","text":"<p>\u672c\u6b21\u5ba1\u67e5\u8986\u76d6\u4ee5\u4e0b\u6838\u5fc3\u6587\u4ef6\uff1a</p> \u6587\u4ef6 \u884c\u6570 \u804c\u8d23 <code>core/tool_manager.py</code> ~850 \u5de5\u5177\u6ce8\u518c\u3001\u6267\u884c\u3001\u6301\u4e45\u5316 <code>core/config_manager.py</code> ~140 JSON \u914d\u7f6e\u8bfb\u5199 <code>core/tool_model.py</code> ~40 \u5de5\u5177\u6570\u636e\u6a21\u578b <code>core/tool_loader.py</code> ~400 \u5de5\u5177\u6587\u4ef6\u626b\u63cf\u52a0\u8f7d <code>ui/toolbox_viewmodel.py</code> ~493 MVVM ViewModel <code>ui/toolbox_controller.py</code> ~180 \u9762\u677f\u72b6\u6001\u7ba1\u7406 <code>ui/panels/full_panel.py</code> ~1810 \u5b8c\u6574\u5de5\u5177\u9762\u677f <code>ui/panels/docked_panel.py</code> ~1842 \u505c\u9760\u5de5\u5177\u9762\u677f <code>main.py</code> ~190 \u5165\u53e3\u4e0e\u521d\u59cb\u5316 <code>install.py</code> ~1000+ \u5b89\u88c5\u811a\u672c <code>tests/</code> 5\u4e2a\u6587\u4ef6 \u5355\u5143\u6d4b\u8bd5"},{"location":"OPTIMIZATION_REPORT/#bugp0","title":"\u4e8c\u3001\u81f4\u547d\u7ea7 Bug\uff08P0\uff09","text":"<p>\u8fd9\u4e9b\u95ee\u9898\u4f1a\u76f4\u63a5\u5bfc\u81f4\u63d2\u4ef6\u65e0\u6cd5\u5b89\u88c5\u3001\u5d29\u6e83\u6216\u6838\u5fc3\u529f\u80fd\u5931\u6548\uff0c\u5fc5\u987b\u5728\u53d1\u5e03\u524d\u4fee\u590d\u3002</p>"},{"location":"OPTIMIZATION_REPORT/#21","title":"2.1 \u5b89\u88c5\u811a\u672c\u5b8c\u5168\u65e0\u6cd5\u5de5\u4f5c","text":"<p>\u6587\u4ef6\uff1a<code>install.py</code> \u7b2c321\u884c</p> <p>\u95ee\u9898\uff1a</p> <pre><code># \u5f53\u524d\u4ee3\u7801\uff08\u9519\u8bef\uff09\nwith open(r'r', encoding='utf-8') as f:\n    mod_content = f.read()\n\n# \u6b63\u786e\u4ee3\u7801\nwith open(template_mod_path, 'r', encoding='utf-8') as f:\n    mod_content = f.read()\n</code></pre> <p>\u5f71\u54cd\uff1a\u5b89\u88c5\u6c38\u8fdc\u4f1a\u5931\u8d25\uff0c\u629b\u51fa <code>FileNotFoundError: [Errno 2] No such file or directory: 'r'</code>\u3002\u4f5c\u4e3a\u5f00\u6e90\u5de5\u5177\uff0c\u5b89\u88c5\u662f\u7528\u6237\u7684\u7b2c\u4e00\u4e2a\u63a5\u89e6\u70b9\uff0c\u8fd9\u4e2a Bug \u4f1a\u76f4\u63a5\u529d\u9000\u6240\u6709\u4eba\u3002</p> <p>\u4fee\u590d\u65b9\u6848\uff1a\u5c06 <code>r'r'</code> \u6539\u4e3a <code>template_mod_path</code>\u3002</p>"},{"location":"OPTIMIZATION_REPORT/#22","title":"2.2 \u4e00\u4e2a\u574f\u6587\u4ef6\u6740\u6b7b\u6574\u4e2a\u5de5\u5177\u7bb1","text":"<p>\u6587\u4ef6\uff1a<code>core/tool_loader.py</code> \u7b2c207-213\u884c\u3001\u7b2c259-263\u884c</p> <p>\u95ee\u9898\uff1a</p> <pre><code># _load_python_tool \u548c _load_json_tool \u4e2d\nexcept Exception as e:\n    logger.error(f\"\u89e3\u6790\u5de5\u5177\u5931\u8d25 {path}: {e}\")\n    raise e  # \u2190 \u91cd\u65b0\u629b\u51fa\u5f02\u5e38\uff0c\u5bfc\u81f4\u6574\u4e2a scan_directory() \u5d29\u6e83\n</code></pre> <p>\u8c03\u7528\u94fe\uff1a <pre><code>scan_directory()\n  \u2192 _load_advanced_tools() / _load_user_tools()  # \u4e0d\u6355\u83b7\u5f02\u5e38\n    \u2192 _load_python_tool() / _load_json_tool()     # raise e\n      \u2192 \u6574\u4e2a\u5de5\u5177\u52a0\u8f7d\u8fc7\u7a0b\u4e2d\u65ad\uff0c\u6240\u6709\u5de5\u5177\u90fd\u4e0d\u53ef\u7528\n</code></pre></p> <p>\u5f71\u54cd\uff1a\u7528\u6237\u5982\u679c\u6709\u4e00\u4e2a\u635f\u574f\u7684 JSON \u5de5\u5177\u6587\u4ef6\uff0c\u6574\u4e2a\u5de5\u5177\u7bb1\u7684\u6240\u6709\u5de5\u5177\u90fd\u65e0\u6cd5\u52a0\u8f7d\u3002</p> <p>\u4fee\u590d\u65b9\u6848\uff1a</p> <pre><code># \u65b9\u68481\uff1a\u5728 _load_python_tool / _load_json_tool \u4e2d\u4e0d\u518d raise\nexcept Exception as e:\n    logger.error(f\"\u89e3\u6790\u5de5\u5177\u5931\u8d25 {path}: {e}\")\n    return None  # \u8df3\u8fc7\u6b64\u5de5\u5177\uff0c\u7ee7\u7eed\u52a0\u8f7d\u5176\u4ed6\u5de5\u5177\n\n# \u65b9\u68482\uff1a\u5728\u8c03\u7528\u65b9 _load_advanced_tools / _load_user_tools \u4e2d\u6355\u83b7\nfor tool_file in tool_files:\n    try:\n        result = self._load_python_tool(tool_file)\n        if result:\n            tools.append(result)\n    except Exception as e:\n        logger.warning(f\"\u8df3\u8fc7\u635f\u574f\u7684\u5de5\u5177: {tool_file}: {e}\")\n        continue\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#23-viewmodel-undo","title":"2.3 ViewModel \u5bfc\u5165\u8def\u5f84\u9519\u8bef\uff0cUndo \u529f\u80fd\u5168\u90e8\u5931\u6548","text":"<p>\u6587\u4ef6\uff1a<code>ui/toolbox_viewmodel.py</code> \u7b2c186\u884c</p> <p>\u95ee\u9898\uff1a</p> <pre><code># \u5f53\u524d\u4ee3\u7801\uff08\u9519\u8bef\u8def\u5f84\uff09\nfrom floating_toolbox.maya.maya_service import get_maya_service\n\n# \u6b63\u786e\u8def\u5f84\nfrom floating_toolbox.core.maya.maya_service import get_maya_service\n</code></pre> <p>\u5f71\u54cd\uff1a\u7531\u4e8e <code>ImportError</code> \u88ab\u9759\u9ed8\u6355\u83b7\uff0c\u6240\u6709\u5de5\u5177\u6267\u884c\u90fd\u8d70 <code>except ImportError</code> \u5206\u652f\uff0c\u5373\u4e0d\u4f7f\u7528 Maya Undo Chunk \u6267\u884c\u3002\u7528\u6237\u4f1a\u53d1\u73b0\u6bcf\u4e2a\u5de5\u5177\u64cd\u4f5c\u90fd\u65e0\u6cd5\u64a4\u9500\uff08Ctrl+Z \u65e0\u6548\uff09\uff0c\u8fd9\u662f\u4e00\u4e2a\u4e25\u91cd\u7684\u7528\u6237\u4f53\u9a8c\u95ee\u9898\u3002</p> <p>\u4fee\u590d\u65b9\u6848\uff1a\u4fee\u6b63\u5bfc\u5165\u8def\u5f84\u4e3a <code>floating_toolbox.core.maya.maya_service</code>\u3002</p>"},{"location":"OPTIMIZATION_REPORT/#24-full_panelpy-docked_panelpy","title":"2.4 full_panel.py \u548c docked_panel.py \u5b58\u5728\u5b8c\u6574\u4ee3\u7801\u91cd\u590d","text":"<p>\u6587\u4ef6\uff1a - <code>ui/panels/full_panel.py</code>\uff08~1810\u884c\uff09 - <code>ui/panels/docked_panel.py</code>\uff08~1842\u884c\uff09</p> <p>\u95ee\u9898\uff1a\u4e24\u4e2a\u6587\u4ef6\u4e2d\uff0c\u6574\u4e2a\u7c7b\u7684\u5185\u5bb9\u88ab\u590d\u5236\u4e86\u4e24\u904d\u3002<code>full_panel.py</code> \u7684 295-968\u884c\u548c 973-1810\u884c\u51e0\u4e4e\u5b8c\u5168\u76f8\u540c\u3002<code>docked_panel.py</code> \u5b58\u5728\u540c\u6837\u95ee\u9898\u3002</p> <p>\u66f4\u4e25\u91cd\u7684\u662f\uff0c<code>docked_panel.py</code> \u7b2c\u4e8c\u4e2a\u526f\u672c\u4e2d\u7684 <code>get_maya_main_window()</code> \u4f7f\u7528\u4e86\u672a\u5b9a\u4e49\u7684 <code>wrapInstance</code>\uff1a</p> <pre><code># \u7b2c\u4e8c\u4e2a\u526f\u672c\uff08\u7ea6\u7b2c1611\u884c\uff09\u2014 \u4f1a\u5d29\u6e83\nreturn wrapInstance(int(main_window_ptr), QtWidgets.QWidget)\n\n# \u7b2c\u4e00\u4e2a\u526f\u672c\uff08\u6b63\u786e\uff09 \u2014 \u4f7f\u7528 QtCompat\nreturn QtCompat.wrapInstance(int(main_window_ptr), QtWidgets.QWidget)\n</code></pre> <p>\u5f71\u54cd\uff1a - Python \u4f1a\u4f7f\u7528\u6587\u4ef6\u4e2d\u6700\u540e\u4e00\u4e2a\u7c7b\u5b9a\u4e49\uff0c\u7b2c\u4e00\u4e2a\u6b63\u786e\u7684\u5b9a\u4e49\u53ef\u80fd\u88ab\u8986\u76d6 - \u7b2c\u4e8c\u4e2a\u526f\u672c\u4e2d\u7684\u9519\u8bef\u4ee3\u7801\u53ef\u80fd\u5728\u8fd0\u884c\u65f6\u89e6\u53d1\u5d29\u6e83 - \u4ee3\u7801\u7ef4\u62a4\u6210\u672c\u7ffb\u500d\uff0c\u4fee\u4e00\u4e2a Bug \u9700\u8981\u6539\u4e24\u5904</p> <p>\u4fee\u590d\u65b9\u6848\uff1a 1. \u5220\u9664\u4e24\u4e2a\u6587\u4ef6\u4e2d\u7684\u91cd\u590d\u4ee3\u7801\u5757\uff08\u4fdd\u7559\u7b2c\u4e00\u4e2a\u6b63\u786e\u7684\u7248\u672c\uff09 2. \u63d0\u53d6 FullPanel \u548c DockedPanel \u7684\u5171\u4eab\u4ee3\u7801\uff08\u7ea670%\u76f8\u540c\uff09\u5230\u4e00\u4e2a <code>ToolPanelMixin</code> \u4e2d</p>"},{"location":"OPTIMIZATION_REPORT/#25-shelf-button","title":"2.5 Shelf Button \u547d\u4ee4\u5bfc\u81f4\u63d2\u4ef6\u52a0\u8f7d\u4e24\u6b21","text":"<p>\u6587\u4ef6\uff1a<code>install.py</code> \u7b2c625-657\u884c</p> <p>\u95ee\u9898\uff1a</p> <pre><code>command=\"\"\"from floating_toolbox import show_toolbox\nfrom floating_toolbox.core.tool_manager import ToolManager\nmanager = ToolManager()\nmanager.load_plugins()   # \u2190 \u5197\u4f59\uff01show_toolbox() \u5185\u90e8\u5df2\u7ecf\u4f1a\u8c03\u7528\nshow_toolbox()\"\"\"\n</code></pre> <p>\u5f71\u54cd\uff1a<code>show_toolbox()</code> \u2192 <code>ToolboxViewModel()</code> \u2192 <code>ToolManager()</code> \u2192 <code>load_plugins()</code> \u5df2\u7ecf\u5b8c\u6210\u4e86\u5b8c\u6574\u521d\u59cb\u5316\u6d41\u7a0b\u3002\u989d\u5916\u7684 <code>load_plugins()</code> \u8c03\u7528\u4f1a\u5bfc\u81f4\u6240\u6709\u5de5\u5177\u88ab\u6ce8\u518c\u4e24\u6b21\u3002</p> <p>\u4fee\u590d\u65b9\u6848\uff1a</p> <pre><code>command=\"\"\"from floating_toolbox import show_toolbox\nshow_toolbox()\"\"\"\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#p1","title":"\u4e09\u3001\u67b6\u6784\u5c42\u9762\u4f18\u5316\uff08P1\uff09","text":""},{"location":"OPTIMIZATION_REPORT/#31","title":"3.1 \u914d\u7f6e\u7cfb\u7edf\uff1a\u975e\u539f\u5b50\u5199\u5165\u5bfc\u81f4\u6570\u636e\u4e22\u5931\u98ce\u9669","text":"<p>\u6587\u4ef6\uff1a<code>core/config_manager.py</code> \u7b2c123-137\u884c</p> <p>\u5f53\u524d\u95ee\u9898\uff1a</p> <pre><code>def save_config(self, config_data):\n    with open(self._config_path, 'w', encoding='utf-8') as f:\n        json.dump(config_data, f, indent=2, ensure_ascii=False)\n</code></pre> <p>\u5982\u679c Maya \u5728 <code>json.dump</code> \u8fc7\u7a0b\u4e2d\u5d29\u6e83\uff08\u8fd9\u5728 Maya \u4e2d\u975e\u5e38\u5e38\u89c1\uff09\uff0cJSON \u6587\u4ef6\u4f1a\u88ab\u622a\u65ad/\u635f\u574f\u3002\u4e0b\u6b21\u542f\u52a8\u65f6 <code>load_config</code> \u8fd4\u56de <code>{}</code>\uff0c\u7528\u6237\u4e22\u5931\u6240\u6709\u6536\u85cf\u3001\u5feb\u6377\u952e\u3001\u4f7f\u7528\u7edf\u8ba1\u6570\u636e\u3002</p> <p>\u5efa\u8bae\u7684\u4fee\u590d\u65b9\u6848\uff1a</p> <pre><code>import shutil\nimport tempfile\n\ndef save_config(self, config_data):\n    \"\"\"\u539f\u5b50\u5199\u5165 + \u81ea\u52a8\u5907\u4efd\"\"\"\n    config_path = Path(self._config_path)\n    backup_path = config_path.with_suffix('.bak')\n\n    # 1. \u5199\u5165\u4e34\u65f6\u6587\u4ef6\n    tmp_fd, tmp_path = tempfile.mkstemp(\n        dir=config_path.parent, suffix='.tmp'\n    )\n    try:\n        with os.fdopen(tmp_fd, 'w', encoding='utf-8') as f:\n            json.dump(config_data, f, indent=2, ensure_ascii=False)\n\n        # 2. \u5907\u4efd\u5f53\u524d\u914d\u7f6e\n        if config_path.exists():\n            shutil.copy2(config_path, backup_path)\n\n        # 3. \u539f\u5b50\u66ff\u6362\uff08Windows \u4e0a os.replace \u662f\u539f\u5b50\u7684\uff09\n        os.replace(tmp_path, config_path)\n    except Exception:\n        # \u6e05\u7406\u4e34\u65f6\u6587\u4ef6\n        if os.path.exists(tmp_path):\n            os.unlink(tmp_path)\n        raise\n\ndef load_config(self):\n    \"\"\"\u52a0\u8f7d\u914d\u7f6e\uff0c\u635f\u574f\u65f6\u81ea\u52a8\u6062\u590d\u5907\u4efd\"\"\"\n    try:\n        with open(self._config_path, 'r', encoding='utf-8') as f:\n            return json.load(f)\n    except (json.JSONDecodeError, FileNotFoundError):\n        backup_path = Path(self._config_path).with_suffix('.bak')\n        if backup_path.exists():\n            logger.warning(\"\u914d\u7f6e\u6587\u4ef6\u635f\u574f\uff0c\u6b63\u5728\u4ece\u5907\u4efd\u6062\u590d...\")\n            shutil.copy2(backup_path, self._config_path)\n            with open(self._config_path, 'r', encoding='utf-8') as f:\n                return json.load(f)\n        return {}\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#32","title":"3.2 \u8282\u6d41\u4fdd\u5b58\u673a\u5236\u6709\u6570\u636e\u4e22\u5931\u6f0f\u6d1e","text":"<p>\u6587\u4ef6\uff1a<code>core/tool_manager.py</code> \u7b2c529-556\u884c</p> <p>\u5f53\u524d\u95ee\u9898\uff1a</p> <pre><code>def save_config(self):\n    if self._pending_save:\n        return              # \u2190 \u65b0\u7684\u4fee\u6539\u88ab\u4e22\u5f03\uff01\n    self._pending_save = True\n    QTimer.singleShot(500, self._do_save_config)\n</code></pre> <p>\u65f6\u95f4\u7ebf\uff1a <pre><code>T=0ms   save_config() \u2192 _pending_save=True, \u542f\u52a8500ms\u5b9a\u65f6\u5668\nT=100ms \u7528\u6237\u4fee\u6539\u4e86\u5de5\u5177 \u2192 save_config() \u2192 _pending_save\u5df2\u4e3aTrue, \u76f4\u63a5return\nT=200ms \u7528\u6237\u53c8\u4fee\u6539\u4e86\u5de5\u5177 \u2192 save_config() \u2192 \u540c\u6837\u88ab\u8df3\u8fc7\nT=500ms \u5b9a\u65f6\u5668\u89e6\u53d1 _do_save_config() \u2192 \u4fdd\u5b58\u7684\u662fT=0ms\u65f6\u7684\u72b6\u6001\uff01\n         T=100ms\u548cT=200ms\u7684\u4fee\u6539\u4e22\u5931\u4e86\n</code></pre></p> <p>\u5efa\u8bae\u7684\u4fee\u590d\u65b9\u6848\uff1a</p> <pre><code>def save_config(self):\n    \"\"\"\u4fdd\u5b58\u914d\u7f6e\uff08\u91cd\u7f6e\u5b9a\u65f6\u5668\u7b56\u7565\uff09\"\"\"\n    self._dirty = True\n\n    # \u53d6\u6d88\u5df2\u6709\u5b9a\u65f6\u5668\uff0c\u91cd\u65b0\u8ba1\u65f6\n    if hasattr(self, '_save_timer') and self._save_timer is not None:\n        self._save_timer.stop()\n        self._save_timer.deleteLater()\n\n    try:\n        from Qt import QtCore\n        self._save_timer = QtCore.QTimer()\n        self._save_timer.setSingleShot(True)\n        self._save_timer.timeout.connect(self._do_save_config)\n        self._save_timer.start(self._save_delay_ms)\n    except ImportError:\n        self._do_save_config()\n\ndef _do_save_config(self):\n    if not self._dirty:\n        return\n    self._dirty = False\n    # ... \u4fdd\u5b58\u5f53\u524d\u6700\u65b0\u72b6\u6001 ...\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#33-close_toolbox","title":"3.3 close_toolbox() \u4e0d\u5237\u65b0\u6302\u8d77\u7684\u4fdd\u5b58","text":"<p>\u6587\u4ef6\uff1a<code>main.py</code> \u7b2c149-186\u884c</p> <p>\u5f53\u524d\u95ee\u9898\uff1a</p> <pre><code>def close_toolbox():\n    if _toolbox_controller:\n        _toolbox_controller.close_all()\n    _close_all_toolbox_windows()\n    _toolbox_controller = None\n    # \u2190 \u6ca1\u6709\u8c03\u7528 save_config_immediate()\n</code></pre> <p>\u5f71\u54cd\uff1a\u5982\u679c\u7528\u6237\u5728\u5173\u95ed\u524d\u6709\u672a\u4fdd\u5b58\u7684\u4fee\u6539\uff08\u5728500ms\u8282\u6d41\u7a97\u53e3\u5185\uff09\uff0c\u8fd9\u4e9b\u4fee\u6539\u4f1a\u968f\u7740 QTimer \u7684\u9500\u6bc1\u800c\u6c38\u4e45\u4e22\u5931\u3002</p> <p>\u4fee\u590d\u65b9\u6848\uff1a</p> <pre><code>def close_toolbox():\n    global _toolbox_controller\n\n    # \u5237\u65b0\u6240\u6709\u6302\u8d77\u7684\u4fdd\u5b58\n    try:\n        from floating_toolbox.core.tool_manager import ToolManager\n        tm = ToolManager()\n        tm.save_config_immediate()\n    except Exception:\n        pass\n\n    if _toolbox_controller:\n        _toolbox_controller.close_all()\n    _close_all_toolbox_windows()\n    _toolbox_controller = None\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#34-viewmodel-toolmanager","title":"3.4 ViewModel \u7ed5\u8fc7 ToolManager \u5bfc\u81f4\u6570\u636e\u4e0d\u4e00\u81f4","text":"<p>\u6587\u4ef6\uff1a<code>ui/toolbox_viewmodel.py</code></p> <p>\u95ee\u98981\uff1arename_category \u4e0d\u66f4\u65b0\u5de5\u5177</p> <pre><code># \u5f53\u524d\u4ee3\u7801 \u2014 \u76f4\u63a5\u8c03\u7528 CategoryManager\ndef rename_category(self, old_name, new_name):\n    return self.category_manager.rename_category(old_name, new_name)\n    # \u2190 \u5de5\u5177\u5bf9\u8c61\u7684 category \u5b57\u6bb5\u6ca1\u6709\u88ab\u66f4\u65b0\uff01\n</code></pre> <p>\u6b63\u786e\u505a\u6cd5\u5e94\u8be5\u8c03\u7528 <code>ToolManager.rename_category()</code>\uff0c\u5b83\u4f1a\u540c\u65f6\u66f4\u65b0\u6240\u6709\u5de5\u5177\u7684 <code>category</code> \u5c5e\u6027\u3002</p> <p>\u95ee\u98982\uff1adelete_category \u4e0d\u5220\u9664\u5de5\u5177\u6587\u4ef6</p> <pre><code># \u5f53\u524d\u4ee3\u7801 \u2014 \u53ea\u5220\u9664\u5206\u7c7b\u8bb0\u5f55\ndef delete_category(self, name):\n    tools = self.get_tools_by_category(name)\n    if any(not t.is_user_tool for t in tools):\n        return False\n    self.category_manager.remove_category(name)\n    # \u2190 \u7528\u6237\u5de5\u5177\u7684 JSON \u6587\u4ef6\u8fd8\u7559\u5728\u78c1\u76d8\u4e0a\uff01\n</code></pre> <p>\u6b63\u786e\u505a\u6cd5\u5e94\u8be5\u8c03\u7528 <code>ToolManager.delete_category()</code>\uff0c\u5b83\u4f1a\u540c\u65f6\u5220\u9664\u6240\u6709\u5173\u8054\u7684\u7528\u6237\u5de5\u5177\u6587\u4ef6\u3002</p> <p>\u5efa\u8bae\u7684\u4fee\u590d\u539f\u5219\uff1aViewModel \u5e94\u8be5\u53ea\u901a\u8fc7 ToolManager \u4ea4\u4e92\uff08Facade \u6a21\u5f0f\uff09\uff0c\u4e0d\u8981\u76f4\u63a5\u8bbf\u95ee CategoryManager\uff1a</p> <pre><code># \u4fee\u590d\u540e\ndef rename_category(self, old_name, new_name):\n    return self._tool_manager.rename_category(old_name, new_name)\n\ndef delete_category(self, name):\n    return self._tool_manager.delete_category(name)\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#35","title":"3.5 \u5355\u4f8b\u6a21\u5f0f\u7684\u53ef\u6d4b\u8bd5\u6027\u95ee\u9898","text":"<p>\u6d89\u53ca\u6587\u4ef6\uff1aToolManager\u3001ConfigManager\u3001CategoryManager\u3001ResourceManager\u3001Logger</p> <p>\u5f53\u524d\u95ee\u9898\uff1a</p> <pre><code>class ToolManager:\n    _instance = None\n    def __new__(cls):\n        if cls._instance is None:\n            cls._instance = super().__new__(cls)\n            cls._instance._initialized = False\n        return cls._instance\n</code></pre> <p>\u95ee\u9898\uff1a - \u4e0d\u53ef\u6d4b\u8bd5\uff1a\u5355\u5143\u6d4b\u8bd5\u4e4b\u95f4\u72b6\u6001\u6cc4\u6f0f\uff0c\u9700\u8981\u624b\u52a8 <code>ToolManager._instance = None</code> - \u975e\u7ebf\u7a0b\u5b89\u5168\uff1a\u867d\u7136 Maya \u4e3b\u8981\u662f\u5355\u7ebf\u7a0b\uff0c\u4f46\u5e76\u53d1\u4e8b\u4ef6\u5904\u7406\u53ef\u80fd\u89e6\u53d1\u7ade\u6001 - \u9690\u5f0f\u4f9d\u8d56\uff1a\u7ec4\u4ef6\u4e4b\u95f4\u7684\u4f9d\u8d56\u5173\u7cfb\u4e0d\u53ef\u89c1</p> <p>\u957f\u671f\u5efa\u8bae\uff08P3 \u4f18\u5148\u7ea7\uff09\uff1a\u5f15\u5165\u8f7b\u91cf\u7ea7 Service Locator\uff1a</p> <pre><code>class ServiceContainer:\n    \"\"\"\u8f7b\u91cf\u7ea7\u670d\u52a1\u5bb9\u5668\uff0c\u652f\u6301\u4f9d\u8d56\u6ce8\u5165\"\"\"\n    _services: Dict[type, Any] = {}\n\n    @classmethod\n    def register(cls, interface: type, instance: Any):\n        cls._services[interface] = instance\n\n    @classmethod\n    def get(cls, interface: type):\n        if interface not in cls._services:\n            raise RuntimeError(f\"\u670d\u52a1\u672a\u6ce8\u518c: {interface.__name__}\")\n        return cls._services[interface]\n\n    @classmethod\n    def reset(cls):\n        \"\"\"\u6d4b\u8bd5\u65f6\u91cd\u7f6e\u6240\u6709\u670d\u52a1\"\"\"\n        cls._services.clear()\n\n# \u521d\u59cb\u5316\u65f6\ndef bootstrap():\n    config_mgr = ConfigManager(config_path=\"...\")\n    category_mgr = CategoryManager(config_mgr)\n    tool_mgr = ToolManager(config_mgr, category_mgr)\n\n    ServiceContainer.register(IConfigManager, config_mgr)\n    ServiceContainer.register(ICategoryManager, category_mgr)\n    ServiceContainer.register(IToolManager, tool_mgr)\n\n# \u6d4b\u8bd5\u65f6\ndef setup_test():\n    ServiceContainer.reset()\n    ServiceContainer.register(IConfigManager, MockConfigManager())\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#36-configmanager","title":"3.6 \u4e24\u4e2a ConfigManager \u547d\u540d\u51b2\u7a81","text":"<p>\u6587\u4ef6\uff1a - <code>core/config_manager.py</code> \u2014 \u7ba1\u7406\u5de5\u5177\u72b6\u6001\uff08\u6536\u85cf\u3001\u4f7f\u7528\u6b21\u6570\u7b49\uff09 - <code>core/maya/config.py</code> \u2014 \u7ba1\u7406 UI \u72b6\u6001\uff08\u9762\u677f\u4f4d\u7f6e\u3001Pin \u72b6\u6001\u7b49\uff09</p> <p>\u4e24\u8005\u90fd\u53eb <code>ConfigManager</code>\uff0c\u5728 ViewModel \u4e2d\u540c\u65f6\u5bfc\u5165\u65f6\u5bb9\u6613\u6df7\u6dc6\u3002</p> <p>\u5efa\u8bae\u91cd\u547d\u540d\uff1a</p> <pre><code># core/config_manager.py\nclass ToolConfigManager:  # \u6216 DataConfigManager\n    \"\"\"\u7ba1\u7406\u5de5\u5177\u72b6\u6001\u6301\u4e45\u5316\"\"\"\n\n# core/maya/config.py\nclass UIConfigManager:  # \u6216 UIStateManager\n    \"\"\"\u7ba1\u7406 UI \u72b6\u6001\u6301\u4e45\u5316\"\"\"\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#p2","title":"\u56db\u3001\u4ee3\u7801\u8d28\u91cf\u95ee\u9898\uff08P2\uff09 \u2705 \u5df2\u5168\u90e8\u4fee\u590d","text":""},{"location":"OPTIMIZATION_REPORT/#41-toolmodel","title":"4.1 ToolModel \u7c7b\u578b\u58f0\u660e\u4e0e\u5b9e\u9645\u4f7f\u7528\u4e0d\u4e00\u81f4","text":"<p>\u6587\u4ef6\uff1a<code>core/tool_model.py</code></p> <pre><code>@dataclass\nclass ToolModel:\n    pin_time: Optional[int] = None    # \u58f0\u660e\u4e3a int\n    last_used: Optional[int] = None   # \u58f0\u660e\u4e3a int\n</code></pre> <p>\u4f46\u5b9e\u9645\u8d4b\u503c\uff1a</p> <pre><code># tool_manager.py\ntool.last_used = datetime.now().isoformat()  # \u5b9e\u9645\u662f str\ntool.pin_time = time.time()                  # \u5b9e\u9645\u662f float\n</code></pre> <p>\u5efa\u8bae\uff1a</p> <pre><code>@dataclass\nclass ToolModel:\n    pin_time: Optional[float] = None     # time.time() \u8fd4\u56de float\n    last_used: Optional[str] = None      # ISO \u683c\u5f0f\u65f6\u95f4\u5b57\u7b26\u4e32\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#42-toolmodel","title":"4.2 ToolModel \u7f3a\u5c11\u8f93\u5165\u9a8c\u8bc1","text":"<pre><code>@dataclass\nclass ToolModel:\n    id: str       # \u5141\u8bb8\u7a7a\u5b57\u7b26\u4e32\u3001\u8def\u5f84\u904d\u5386\u5b57\u7b26\n    name: str     # \u5141\u8bb8\u7a7a\u5b57\u7b26\u4e32\n</code></pre> <p>\u5de5\u5177 ID \u540e\u7eed\u88ab\u7528\u4e8e\u6784\u9020\u6587\u4ef6\u8def\u5f84\uff08<code>save_user_tool</code>\uff09\uff0c\u5982\u679c ID \u4e3a <code>\"../../etc/passwd\"</code> \u4f1a\u5199\u5230\u610f\u5916\u4f4d\u7f6e\u3002</p> <p>\u5efa\u8bae\u6dfb\u52a0 <code>__post_init__</code> \u9a8c\u8bc1\uff1a</p> <pre><code>import re\n\n@dataclass\nclass ToolModel:\n    id: str\n    name: str\n    # ...\n\n    def __post_init__(self):\n        if not self.id or not self.id.strip():\n            raise ValueError(\"\u5de5\u5177 ID \u4e0d\u80fd\u4e3a\u7a7a\")\n        if not self.name or not self.name.strip():\n            raise ValueError(\"\u5de5\u5177\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a\")\n        if not re.match(r'^[a-zA-Z0-9_\\-\\u4e00-\\u9fff]+$', self.id):\n            raise ValueError(f\"\u5de5\u5177 ID \u5305\u542b\u975e\u6cd5\u5b57\u7b26: {self.id}\")\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#43-runtimetool","title":"4.3 RuntimeTool \u6ce8\u91ca\u8fc7\u65f6","text":"<p>\u6587\u4ef6\uff1a<code>core/tool_manager.py</code> \u7b2c39-62\u884c</p> <pre><code>class RuntimeTool(ToolModel):\n    \"\"\"\n    \u8fd0\u884c\u65f6\u5de5\u5177\u5bf9\u8c61\n    \u7ee7\u627f\u81ea Pydantic ToolModel\uff0c\u6dfb\u52a0 callback \u548c execute \u65b9\u6cd5\n    \"\"\"           # \u2190 \"Pydantic\" \u8fc7\u65f6\uff0c\u5b9e\u9645\u662f dataclass\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#44-3","title":"4.4 \u8def\u5f84\u8ba1\u7b97\u91cd\u590d 3 \u6b21","text":"<p>\u6587\u4ef6\uff1a<code>core/tool_manager.py</code> \u7b2c209\u3001649\u3001709\u884c</p> <pre><code># \u4e09\u5904\u5b8c\u5168\u76f8\u540c\u7684\u4ee3\u7801\ncurrent_dir = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\n</code></pre> <p>\u5efa\u8bae\uff1a\u63d0\u53d6\u4e3a\u7c7b\u5e38\u91cf\uff1a</p> <pre><code>class ToolManager:\n    _ROOT_DIR = Path(__file__).parent.parent  # floating_toolbox/\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#45-lambda","title":"4.5 Lambda \u95ed\u5305\u7684\u9690\u60a3","text":"<p>\u6587\u4ef6\uff1a<code>core/tool_manager.py</code> \u7b2c811-815\u884c</p> <pre><code>code = data.get(\"code\", \"\")\nlanguage = data.get(\"language\", \"Python\")\ncallback = lambda: self._execute_code(code, language)\n</code></pre> <p>\u867d\u7136\u5f53\u524d\u4e0a\u4e0b\u6587\u4e0d\u4f1a\u51fa\u95ee\u9898\uff08\u6bcf\u6b21\u8c03\u7528\u6709\u72ec\u7acb\u6808\u5e27\uff09\uff0c\u4f46\u8fd9\u662f\u4e00\u4e2a\u8106\u5f31\u7684\u6a21\u5f0f\u3002</p> <p>\u5efa\u8bae\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570\u7ed1\u5b9a\uff1a</p> <pre><code>callback = lambda c=code, l=language: self._execute_code(c, l)\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#46-except","title":"4.6 \u88f8 <code>except:</code> \u541e\u6389\u6240\u6709\u5f02\u5e38","text":"<p>\u6d89\u53ca\u6587\u4ef6\uff1a<code>main.py</code>\u3001<code>install.py</code>\u3001<code>docked_panel.py</code>\u3001<code>panel_animation.py</code></p> <pre><code># \u591a\u5904\u51fa\u73b0\ntry:\n    widget.close()\nexcept:        # \u2190 \u4f1a\u541e\u6389 SystemExit, KeyboardInterrupt, MemoryError\n    pass\n</code></pre> <p>\u5efa\u8bae\u7edf\u4e00\u6539\u4e3a\uff1a</p> <pre><code>except Exception:\n    logger.debug(\"\u5173\u95ed\u7ec4\u4ef6\u65f6\u51fa\u9519\", exc_info=True)\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#47-mainpy-print-logger-p1","title":"4.7 main.py \u4f7f\u7528 print \u800c\u975e logger \u2705 \u5df2\u5728 P1 \u9636\u6bb5\u4fee\u590d","text":"<p>\u6587\u4ef6\uff1a<code>main.py</code> \u7b2c105-126\u884c</p> <pre><code>print(f\"Loading last used marking menu template: {last_template}\")\n# ...\nprint(f\"Warning: Failed to initialize marking menu: {e}\")\n</code></pre> <p>\u9879\u76ee\u5176\u4ed6\u90e8\u5206\u4f7f\u7528 <code>logger</code>\uff0c<code>main.py</code> \u4f7f\u7528 <code>print()</code> \u4e0d\u4e00\u81f4\u3002</p>"},{"location":"OPTIMIZATION_REPORT/#48-mainpy","title":"4.8 main.py \u8bbf\u95ee\u79c1\u6709\u6210\u5458 \u2705 \u5df2\u4fee\u590d","text":"<p>\u6587\u4ef6\uff1a<code>main.py</code> \u7b2c97-112\u884c</p> <pre><code>last_template = manager._config.get(\"last_template\", \"\")  # \u2190 \u8bbf\u95ee\u79c1\u6709\u5c5e\u6027\nmanager._load_first_available_template()                    # \u2190 \u8c03\u7528\u79c1\u6709\u65b9\u6cd5\n</code></pre> <p>\u5efa\u8bae\uff1a\u4e3a <code>MarkingMenuManager</code> \u6dfb\u52a0\u516c\u5f00 API\uff1a</p> <pre><code>class MarkingMenuManager:\n    def get_last_template(self) -&gt; str:\n        return self._config.get(\"last_template\", \"\")\n\n    def load_default_template(self):\n        self._load_first_available_template()\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#49-viewmodel","title":"4.9 ViewModel \u91cd\u590d\u61d2\u52a0\u8f7d\u5bfc\u5165","text":"<p>\u6587\u4ef6\uff1a<code>ui/toolbox_viewmodel.py</code> \u7b2c347-379\u884c</p> <pre><code>def get_resource_path(self, filename):\n    from floating_toolbox.core.resource_manager import ResourceManager  # \u91cd\u590d1\n    return ResourceManager().get_path(filename)\n\ndef get_tool_icon_path(self, icon_name):\n    from floating_toolbox.core.resource_manager import ResourceManager  # \u91cd\u590d2\n    ...\n\ndef get_main_icon_path(self, icon_name):\n    from floating_toolbox.core.resource_manager import ResourceManager  # \u91cd\u590d3\n    ...\n</code></pre> <p>\u5efa\u8bae\uff1a\u5728 <code>__init__</code> \u4e2d\u521d\u59cb\u5316\u4e00\u6b21\uff1a</p> <pre><code>def __init__(self):\n    from floating_toolbox.core.resource_manager import ResourceManager\n    self._resource_manager = ResourceManager()\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#410-quickpanel","title":"4.10 QuickPanel \u6027\u80fd\u95ee\u9898 \u2705 \u5df2\u4fee\u590d","text":"<p>\u6587\u4ef6\uff1a<code>ui/panels/quick_panel.py</code></p> <p><code>_add_button()</code> \u65b9\u6cd5\u5185\u90e8\u6bcf\u6b21\u8c03\u7528\u90fd\u91cd\u590d\u5bfc\u5165\uff1a</p> <pre><code>def _add_button(self, ...):\n    import hashlib    # \u2190 \u6bcf\u4e2a\u6309\u94ae\u90fd\u5bfc\u5165\u4e00\u6b21\n    import re         # \u2190 \u6bcf\u4e2a\u6309\u94ae\u90fd\u5bfc\u5165\u4e00\u6b21\n</code></pre> <p>\u5efa\u8bae\uff1a\u79fb\u5230\u6a21\u5757\u9876\u90e8\u3002</p>"},{"location":"OPTIMIZATION_REPORT/#411-controller","title":"4.11 Controller \u9762\u677f\u4f4d\u7f6e\u4e0d\u68c0\u6d4b\u5c4f\u5e55\u8fb9\u754c","text":"<p>\u6587\u4ef6\uff1a<code>ui/toolbox_controller.py</code> \u7b2c124-138\u884c</p> <pre><code>x, y = self.viewmodel.get_position()\nif x &gt;= 0 and y &gt;= 0:\n    self._current_panel.move(x, y)\n</code></pre> <p>\u5982\u679c\u7528\u6237\u65ad\u5f00\u4e86\u4e00\u4e2a\u663e\u793a\u5668\uff0c\u4fdd\u5b58\u7684\u4f4d\u7f6e\u53ef\u80fd\u5728\u5c4f\u5e55\u5916\uff0c\u9762\u677f\u4f1a\u4e0d\u53ef\u89c1\u4e14\u65e0\u6cd5\u6062\u590d\u3002</p> <p>\u5efa\u8bae\uff1a</p> <pre><code>def _ensure_on_screen(self, widget):\n    \"\"\"\u786e\u4fdd\u7a97\u53e3\u5728\u53ef\u89c1\u5c4f\u5e55\u8303\u56f4\u5185\"\"\"\n    from Qt import QtWidgets\n    screen = QtWidgets.QApplication.primaryScreen()\n    if screen:\n        screen_rect = screen.availableGeometry()\n        widget_rect = widget.frameGeometry()\n        if not screen_rect.contains(widget_rect):\n            # \u91cd\u7f6e\u5230\u5c4f\u5e55\u4e2d\u5fc3\n            widget.move(\n                screen_rect.center() - widget_rect.center()\n            )\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#_3","title":"\u4e94\u3001\u529f\u80fd\u589e\u5f3a\u5efa\u8bae","text":""},{"location":"OPTIMIZATION_REPORT/#51-idlepanel","title":"5.1 \u4fdd\u5b58\u63d0\u9192\u529f\u80fd\uff08IdlePanel \u6269\u5c55\uff09","text":"<p>\u8fd9\u662f\u4f60\u63d0\u5230\u60f3\u5728 IdlePanel \u4e0a\u5b9e\u73b0\u7684\u529f\u80fd\uff0c\u5efa\u8bae\u5b9e\u73b0\u65b9\u6848\uff1a</p> <pre><code>class SaveReminderService:\n    \"\"\"Maya \u4fdd\u5b58\u63d0\u9192\u670d\u52a1\"\"\"\n\n    def __init__(self, interval_minutes=15):\n        self._interval = interval_minutes * 60 * 1000  # \u8f6c\u4e3a\u6beb\u79d2\n        self._timer = QtCore.QTimer()\n        self._timer.timeout.connect(self._check_save_status)\n\n    def start(self):\n        self._timer.start(self._interval)\n\n    def _check_save_status(self):\n        \"\"\"\u68c0\u67e5\u573a\u666f\u662f\u5426\u6709\u672a\u4fdd\u5b58\u7684\u4fee\u6539\"\"\"\n        import maya.cmds as cmds\n        if cmds.file(q=True, modified=True):\n            self.save_reminder_triggered.emit()\n\n    # \u4fe1\u53f7\n    save_reminder_triggered = QtCore.Signal()\n</code></pre> <p>UI \u4ea4\u4e92\u65b9\u5f0f\u5efa\u8bae\uff08\u4e0d\u6253\u65ad\u5de5\u4f5c\u6d41\uff09\uff1a - IdlePanel \u547c\u5438\u706f\u4ece\u7d2b\u8272\u53d8\u4e3a\u6a59\u8272/\u7ea2\u8272\u6e10\u53d8\u63d0\u9192 - \u9f20\u6807\u60ac\u505c\u65f6\u663e\u793a \"\u8ddd\u79bb\u4e0a\u6b21\u4fdd\u5b58\u5df2 XX \u5206\u949f\" - \u63d0\u4f9b\u4e00\u952e\u4fdd\u5b58\u6309\u94ae\uff08\u4e0d\u5f39\u7a97\uff09 - \u4fdd\u5b58\u6210\u529f\u540e\u547c\u5438\u706f\u6062\u590d\u6b63\u5e38\u989c\u8272</p> <p>\u53ef\u914d\u7f6e\u9879\uff1a - \u63d0\u9192\u95f4\u9694\uff085/10/15/30\u5206\u949f\uff09 - \u662f\u5426\u542f\u7528\u63d0\u9192 - \u63d0\u9192\u65b9\u5f0f\uff08\u53d8\u8272/\u95ea\u70c1/\u58f0\u97f3\uff09</p>"},{"location":"OPTIMIZATION_REPORT/#52","title":"5.2 \u5de5\u5177\u5bfc\u51fa/\u5bfc\u5165\u7cfb\u7edf","text":"<p>\u4e3a\u6784\u5efa\u793e\u533a\u751f\u6001\u6253\u57fa\u7840\uff1a</p> <p>Phase 1\uff1a\u672c\u5730\u5bfc\u51fa/\u5bfc\u5165</p> <pre><code>class ToolPackager:\n    \"\"\"\u5de5\u5177\u6253\u5305\u5668 \u2014 \u5c06\u5de5\u5177\u5bfc\u51fa\u4e3a .ftool \u6587\u4ef6\"\"\"\n\n    def export_tool(self, tool_id: str, output_path: str):\n        \"\"\"\n        \u5bfc\u51fa\u683c\u5f0f (.ftool = ZIP):\n        \u251c\u2500\u2500 manifest.json    # \u5de5\u5177\u5143\u6570\u636e + \u7248\u672c + \u4f9d\u8d56\n        \u251c\u2500\u2500 tool.json        # \u5de5\u5177\u914d\u7f6e\n        \u251c\u2500\u2500 code.py          # \u5de5\u5177\u4ee3\u7801\n        \u2514\u2500\u2500 icon.png         # \u5de5\u5177\u56fe\u6807\uff08\u53ef\u9009\uff09\n        \"\"\"\n\n    def import_tool(self, ftool_path: str) -&gt; ToolModel:\n        \"\"\"\u5bfc\u5165 .ftool \u6587\u4ef6\uff0c\u81ea\u52a8\u6ce8\u518c\u5230\u5de5\u5177\u7bb1\"\"\"\n\n    def validate_package(self, ftool_path: str) -&gt; ValidationResult:\n        \"\"\"\u9a8c\u8bc1\u5305\u5b8c\u6574\u6027\u548c\u5b89\u5168\u6027\"\"\"\n</code></pre> <p>Phase 2\uff1a\u5728\u7ebf\u5de5\u5177\u4ed3\u5e93</p> <pre><code>\u7528\u6237A \u521b\u5efa\u5de5\u5177 \u2192 \u5bfc\u51fa .ftool \u2192 \u4e0a\u4f20\u5230 GitHub/\u81ea\u5efa\u670d\u52a1\u5668\n\u7528\u6237B \u6d4f\u89c8\u5de5\u5177\u5e02\u573a \u2192 \u4e00\u952e\u4e0b\u8f7d\u5b89\u88c5 \u2192 \u81ea\u52a8\u6ce8\u518c\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#53","title":"5.3 \u5de5\u5177\u4f7f\u7528\u7edf\u8ba1\u9762\u677f","text":"<pre><code>class ToolAnalytics:\n    \"\"\"\u5de5\u5177\u4f7f\u7528\u7edf\u8ba1\"\"\"\n\n    def get_most_used_tools(self, limit=10) -&gt; List[Tuple[str, int]]:\n        \"\"\"\u6700\u5e38\u4f7f\u7528\u7684\u5de5\u5177\u6392\u540d\"\"\"\n\n    def get_usage_by_category(self) -&gt; Dict[str, int]:\n        \"\"\"\u6309\u5206\u7c7b\u7edf\u8ba1\u4f7f\u7528\u91cf\"\"\"\n\n    def get_usage_timeline(self, days=30) -&gt; Dict[str, List[int]]:\n        \"\"\"\u4f7f\u7528\u91cf\u65f6\u95f4\u7ebf\uff08\u6309\u5929\uff09\"\"\"\n\n    def get_efficiency_score(self) -&gt; float:\n        \"\"\"\u6548\u7387\u8bc4\u5206 = \u5feb\u6377\u952e\u4f7f\u7528\u6b21\u6570 / \u603b\u4f7f\u7528\u6b21\u6570\"\"\"\n</code></pre> <p>\u8fd9\u4e2a\u6570\u636e\u53ef\u4ee5\u7528\u6765\uff1a - \u81ea\u52a8\u63a8\u8350 \"\u4f60\u53ef\u80fd\u9700\u8981\u8bbe\u7f6e\u5feb\u6377\u952e\u7684\u5de5\u5177\" - \u663e\u793a \"\u672c\u5468\u4f60\u8282\u7701\u4e86 XX \u5206\u949f\"\uff08\u6fc0\u52b1\u7528\u6237\u6301\u7eed\u4f7f\u7528\uff09 - \u4f5c\u4e3a\u8bfe\u7a0b\u63a8\u5e7f\u7d20\u6750\uff08\"\u4f7f\u7528\u5de5\u5177\u7bb1\u7684\u7528\u6237\u5e73\u5747\u6548\u7387\u63d0\u5347XX%\"\uff09</p>"},{"location":"OPTIMIZATION_REPORT/#54","title":"5.4 \u5de5\u5177\u641c\u7d22\u589e\u5f3a","text":"<p>\u5f53\u524d\u641c\u7d22\u662f\u57fa\u4e8e\u540d\u79f0/\u63cf\u8ff0\u7684\u7b80\u5355\u5339\u914d\u3002\u5efa\u8bae\u589e\u52a0\uff1a</p> <ul> <li>\u62fc\u97f3\u641c\u7d22\uff1a\u4e2d\u6587\u7528\u6237\u53ef\u4ee5\u7528\u62fc\u97f3\u9996\u5b57\u6bcd\u641c\u7d22\uff08\u5982 \"cjlft\" \u2192 \"\u521b\u5efa\u7acb\u65b9\u4f53\"\uff09</li> <li>\u6a21\u7cca\u641c\u7d22\uff1a\u5bb9\u5fcd\u62fc\u5199\u9519\u8bef</li> <li>\u547d\u4ee4\u641c\u7d22\uff1a\u8f93\u5165 Maya \u547d\u4ee4\u540d\uff08\u5982 \"polyCube\"\uff09\u4e5f\u80fd\u627e\u5230\u5bf9\u5e94\u5de5\u5177</li> <li>\u6807\u7b7e\u641c\u7d22\uff1a\u5de5\u5177\u53ef\u4ee5\u6dfb\u52a0\u6807\u7b7e\uff08\u5982 \"\u5efa\u6a21\", \"UV\", \"\u6743\u91cd\"\uff09</li> </ul>"},{"location":"OPTIMIZATION_REPORT/#55","title":"5.5 \u7528\u6237\u4ee3\u7801\u5b89\u5168\u68c0\u67e5","text":"<p>\u6587\u4ef6\uff1a<code>core/tool_manager.py</code> \u7b2c763-782\u884c</p> <p>\u5f53\u524d\u7528\u6237\u521b\u5efa\u7684\u5de5\u5177\u76f4\u63a5\u6267\u884c\u4efb\u610f\u4ee3\u7801\uff0c\u6ca1\u6709\u4efb\u4f55\u5b89\u5168\u68c0\u67e5\u3002</p> <p>\u5efa\u8bae\u6dfb\u52a0\u57fa\u672c\u5b89\u5168\u5ba1\u67e5\uff1a</p> <pre><code>DANGEROUS_PATTERNS = [\n    r'\\bos\\.system\\b',\n    r'\\bsubprocess\\b',\n    r'\\bshutil\\.rmtree\\b',\n    r'\\b__import__\\b',\n    r'\\beval\\b.*\\binput\\b',\n    r'\\bopen\\b.*[\"\\']w[\"\\']',  # \u6587\u4ef6\u5199\u5165\n]\n\ndef validate_tool_code(code: str) -&gt; List[str]:\n    \"\"\"\u68c0\u67e5\u4ee3\u7801\u4e2d\u7684\u6f5c\u5728\u5371\u9669\u64cd\u4f5c\"\"\"\n    warnings = []\n    for pattern in DANGEROUS_PATTERNS:\n        if re.search(pattern, code):\n            warnings.append(f\"\u68c0\u6d4b\u5230\u6f5c\u5728\u5371\u9669\u64cd\u4f5c: {pattern}\")\n    return warnings\n</code></pre> <p>\u7528\u6237\u5bfc\u5165\u5916\u90e8\u5de5\u5177\u65f6\u5f39\u51fa\u786e\u8ba4\u6846\uff0c\u663e\u793a\u4ee3\u7801\u9884\u89c8\u548c\u5b89\u5168\u8b66\u544a\u3002</p>"},{"location":"OPTIMIZATION_REPORT/#uiux","title":"\u516d\u3001UI/UX \u4f18\u5316\u5efa\u8bae","text":""},{"location":"OPTIMIZATION_REPORT/#61-dpi","title":"6.1 DPI/\u9ad8\u5206\u5c4f\u9002\u914d \u2705 \u5df2\u4fee\u590d","text":"<p>\u5f53\u524d\u95ee\u9898\uff1a\u6240\u6709\u5c3a\u5bf8\u786c\u7f16\u7801\u4e3a\u50cf\u7d20\u503c\uff1a</p> <pre><code>AVATAR_SIZE = 65\nICON_BUTTON_SIZE = 60\nToolSlotFrame: FixedSize(55, 55)\n</code></pre> <p>\u5728 4K \u663e\u793a\u5668\uff08VFX \u5de5\u4f5c\u7ad9\u5e38\u89c1\uff09\u4e0a\uff0cUI \u4f1a\u975e\u5e38\u5c0f\u3002</p> <p>\u5efa\u8bae\uff1a\u5f15\u5165 DPI \u7f29\u653e\u7cfb\u7edf\uff1a</p> <pre><code>class UIScale:\n    \"\"\"DPI \u611f\u77e5\u7684\u5c3a\u5bf8\u8ba1\u7b97\"\"\"\n\n    @staticmethod\n    def get_scale_factor() -&gt; float:\n        app = QtWidgets.QApplication.instance()\n        if app and hasattr(app, 'primaryScreen'):\n            screen = app.primaryScreen()\n            return screen.logicalDotsPerInch() / 96.0\n        return 1.0\n\n    @classmethod\n    def scaled(cls, value: int) -&gt; int:\n        return int(value * cls.get_scale_factor())\n\n# \u4f7f\u7528\nAVATAR_SIZE = UIScale.scaled(65)\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#62","title":"6.2 \u8de8\u5e73\u53f0\u5b57\u4f53\u517c\u5bb9 \u2705 \u5df2\u4fee\u590d","text":"<p>\u5f53\u524d\u95ee\u9898\uff1a\u5b57\u4f53\u786c\u7f16\u7801\u4e3a \"Microsoft YaHei UI\"\uff08Windows \u72ec\u5360\uff09\u3002</p> <p>\u5efa\u8bae\uff1a</p> <pre><code>import sys\n\ndef get_ui_font_family() -&gt; str:\n    if sys.platform == 'win32':\n        return 'Microsoft YaHei UI'\n    elif sys.platform == 'darwin':\n        return 'PingFang SC'\n    else:  # Linux\n        return 'Noto Sans CJK SC'\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#63","title":"6.3 \u9762\u677f\u72b6\u6001\u673a\u6539\u8fdb \u23ed \u6682\u7f13\uff08\u5f53\u524d\u903b\u8f91\u591f\u7528\uff0c\u907f\u514d\u8fc7\u5ea6\u8bbe\u8ba1\uff09","text":"<p>\u5f53\u524d <code>ToolboxController</code> \u6ca1\u6709\u6b63\u5f0f\u7684\u72b6\u6001\u673a\uff0c\u5efa\u8bae\u5f15\u5165\u679a\u4e3e\uff1a</p> <pre><code>from enum import Enum, auto\n\nclass PanelState(Enum):\n    IDLE = auto()\n    QUICK = auto()\n    FULL = auto()\n    DOCKED = auto()\n\nVALID_TRANSITIONS = {\n    PanelState.IDLE: {PanelState.QUICK, PanelState.FULL},\n    PanelState.QUICK: {PanelState.IDLE, PanelState.FULL},\n    PanelState.FULL: {PanelState.IDLE, PanelState.DOCKED},\n    PanelState.DOCKED: {PanelState.FULL},\n}\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#64","title":"6.4 \u952e\u76d8\u5bfc\u822a\u652f\u6301","text":"<p>\u5f53\u524d UI \u5b8c\u5168\u4f9d\u8d56\u9f20\u6807\u64cd\u4f5c\uff0c\u5efa\u8bae\u6dfb\u52a0\uff1a - <code>Tab</code> / <code>Shift+Tab</code> \u5728\u5de5\u5177\u4e4b\u95f4\u5207\u6362\u7126\u70b9 - <code>Enter</code> \u6267\u884c\u9009\u4e2d\u7684\u5de5\u5177 - <code>Esc</code> \u8fd4\u56de\u4e0a\u4e00\u7ea7\u9762\u677f - <code>Ctrl+F</code> \u6fc0\u6d3b\u641c\u7d22\u6846 - \u7126\u70b9\u6307\u793a\u5668\uff08\u805a\u7126\u65f6\u5de5\u5177\u9879\u6dfb\u52a0\u9ad8\u4eae\u8fb9\u6846\uff09</p>"},{"location":"OPTIMIZATION_REPORT/#65","title":"6.5 \u989c\u8272\u5bf9\u6bd4\u5ea6","text":"<p>\u5f53\u524d <code>DraculaTheme.COMMENT</code>\uff08#6272a4\uff09\u5728 <code>BG_PRIMARY</code>\uff08#282a36\uff09\u4e0a\u7684\u5bf9\u6bd4\u5ea6\u7ea6 3.4:1\uff0c\u4f4e\u4e8e WCAG AA \u6807\u51c6\uff084.5:1\uff09\u3002</p> <p>\u5efa\u8bae\uff1a\u5c06\u6ce8\u91ca\u8272\u63d0\u4eae\u4e3a <code>#8292c4</code> \u6216 <code>#7a8abd</code>\u3002</p>"},{"location":"OPTIMIZATION_REPORT/#66","title":"6.6 \u8bbe\u7f6e\u6309\u94ae\u662f\u7a7a\u5b9e\u73b0","text":"<pre><code># full_panel.py \u548c docked_panel.py \u4e2d\nsettings_btn.clicked.connect(lambda: print(\"\u8bbe\u7f6e\u529f\u80fd\u5f85\u5b9e\u73b0\"))\n</code></pre> <p>\u5efa\u8bae\uff1a\u8981\u4e48\u5b9e\u73b0\u8bbe\u7f6e\u9762\u677f\uff0c\u8981\u4e48\u79fb\u9664\u6309\u94ae\u3002\u672a\u5b9e\u73b0\u7684\u529f\u80fd\u7559\u5728 UI \u4e0a\u4f1a\u8ba9\u7528\u6237\u56f0\u60d1\u3002</p>"},{"location":"OPTIMIZATION_REPORT/#_4","title":"\u4e03\u3001\u6d4b\u8bd5\u8986\u76d6\u5206\u6790","text":""},{"location":"OPTIMIZATION_REPORT/#71","title":"7.1 \u73b0\u6709\u6d4b\u8bd5\uff08\u4f18\u79c0\u57fa\u7840\uff09","text":"\u6d4b\u8bd5\u6587\u4ef6 \u8986\u76d6\u8303\u56f4 \u6d4b\u8bd5\u6570\u91cf <code>test_tool_manager.py</code> \u5de5\u5177 CRUD\u3001\u6536\u85cf\u3001\u641c\u7d22\u3001\u6267\u884c\u3001\u5e8f\u5217\u5316 ~14 <code>test_category_manager.py</code> \u5206\u7c7b CRUD\u3001\u56fe\u6807\u3001\u6298\u53e0\u72b6\u6001\u3001\u6301\u4e45\u5316 ~18 <code>test_config_manager.py</code> JSON \u8bfb\u5199\u3001\u6301\u4e45\u5316\u3001\u7f13\u5b58\u3001Unicode ~10 <code>test_viewmodel.py</code> ViewModel \u5c5e\u6027\u3001\u5de5\u5177\u6267\u884c\u3001\u4fe1\u53f7 ~12 <code>test_refactoring.py</code> MVVM \u5b9e\u4f8b\u5316\u9a8c\u8bc1 ~4 <p><code>conftest.py</code> \u63d0\u4f9b\u4e86\u4e13\u4e1a\u7ea7\u7684\u6d4b\u8bd5\u57fa\u7840\u8bbe\u65bd\uff08Maya mock\u3001\u4e34\u65f6\u76ee\u5f55\u3001\u5355\u4f8b\u91cd\u7f6e\uff09\u3002</p>"},{"location":"OPTIMIZATION_REPORT/#72","title":"7.2 \u7f3a\u5931\u7684\u6d4b\u8bd5\u8986\u76d6","text":"\u7f3a\u5931\u9886\u57df \u91cd\u8981\u6027 \u5efa\u8bae UI \u9762\u677f\u6d4b\u8bd5 \u9ad8 \u81f3\u5c11\u6d4b\u8bd5 ToolTreeModel \u7684\u6570\u636e\u64cd\u4f5c MarkingMenuManager \u9ad8 XML \u89e3\u6790/\u751f\u6210\u3001\u6a21\u677f\u7ba1\u7406 HotkeyManager \u4e2d \u5feb\u6377\u952e\u6ce8\u518c/\u51b2\u7a81\u68c0\u6d4b ToolLoader \u9519\u8bef\u9694\u79bb \u9ad8 \u6d4b\u8bd5\u635f\u574f\u6587\u4ef6\u4e0d\u4f1a\u5f71\u54cd\u5176\u4ed6\u5de5\u5177 ResourceManager \u4e2d \u56fe\u6807\u8def\u5f84\u89e3\u6790 \u96c6\u6210\u6d4b\u8bd5 \u4e2d \u9762\u677f\u72b6\u6001\u673a\u8f6c\u6362\u3001\u4fe1\u53f7\u6d41 \u62d6\u653e\u64cd\u4f5c \u4f4e ToolTreeDnD"},{"location":"OPTIMIZATION_REPORT/#73","title":"7.3 \u53ef\u80fd\u5931\u8d25\u7684\u6d4b\u8bd5","text":"<p><code>test_refactoring.py</code> \u4e2d\u7684\u5bfc\u5165\u8def\u5f84\u53ef\u80fd\u5df2\u8fc7\u65f6\uff1a</p> <pre><code># \u53ef\u80fd\u4e0d\u5b58\u5728\u7684\u8def\u5f84\nfrom floating_toolbox.core.hotkey_manager import HotkeyManager\n# \u5b9e\u9645\u8def\u5f84\u5e94\u4e3a\nfrom floating_toolbox.core.maya.hotkey_manager import HotkeyManager\n</code></pre> <p><code>test_viewmodel.py</code> \u4e2d\uff1a</p> <pre><code>from floating_toolbox.core.config import ConfigManager as OldConfigManager\n# \u53ef\u80fd\u9700\u8981\u66f4\u65b0\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#74","title":"7.4 \u5efa\u8bae\u6dfb\u52a0\u7684\u5173\u952e\u6d4b\u8bd5","text":"<pre><code># test_tool_loader_resilience.py\nclass TestToolLoaderResilience:\n    \"\"\"\u6d4b\u8bd5\u5de5\u5177\u52a0\u8f7d\u5668\u7684\u5bb9\u9519\u80fd\u529b\"\"\"\n\n    def test_corrupt_json_tool_does_not_break_other_tools(self):\n        \"\"\"\u4e00\u4e2a\u635f\u574f\u7684 JSON \u4e0d\u5f71\u54cd\u5176\u4ed6\u5de5\u5177\u52a0\u8f7d\"\"\"\n\n    def test_missing_required_fields_in_json(self):\n        \"\"\"JSON \u7f3a\u5c11\u5fc5\u586b\u5b57\u6bb5\u65f6\u4f18\u96c5\u8df3\u8fc7\"\"\"\n\n    def test_invalid_python_tool_does_not_crash(self):\n        \"\"\"\u6709\u8bed\u6cd5\u9519\u8bef\u7684 Python \u5de5\u5177\u4e0d\u5f71\u54cd\u52a0\u8f7d\"\"\"\n\n# test_config_recovery.py\nclass TestConfigRecovery:\n    \"\"\"\u6d4b\u8bd5\u914d\u7f6e\u6587\u4ef6\u635f\u574f\u6062\u590d\"\"\"\n\n    def test_corrupt_config_falls_back_to_backup(self):\n    def test_missing_config_creates_default(self):\n    def test_atomic_save_survives_interruption(self):\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#75","title":"7.5 \u6d4b\u8bd5\u8fd0\u884c\u914d\u7f6e","text":"<p>\u9879\u76ee\u7f3a\u5c11 <code>pytest.ini</code> \u6216 <code>pyproject.toml</code> \u4e2d\u7684\u6d4b\u8bd5\u914d\u7f6e\u3002</p> <p>\u5efa\u8bae\u6dfb\u52a0\uff1a</p> <pre><code># pytest.ini\n[pytest]\ntestpaths = floating_toolbox/tests\npython_files = test_*.py\npython_classes = Test*\npython_functions = test_*\nmarkers =\n    slow: marks tests as slow\n    maya: marks tests requiring Maya environment\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#_5","title":"\u516b\u3001\u5f00\u6e90\u53d1\u5e03\u51c6\u5907","text":""},{"location":"OPTIMIZATION_REPORT/#81","title":"8.1 \u6587\u6863\u66f4\u65b0","text":"<p><code>docs/architecture.md</code> \u5f15\u7528\u4e86\u5927\u91cf\u5df2\u4e0d\u5b58\u5728\u7684\u8def\u5f84\uff1a</p> \u6587\u6863\u4e2d\u7684\u8def\u5f84 \u5b9e\u9645\u8def\u5f84 <code>ui/floating_ball.py</code> <code>ui/toolbox_controller.py</code> <code>core/viewmodels/toolbox_viewmodel.py</code> <code>ui/toolbox_viewmodel.py</code> <code>ui/components/</code> <code>ui/widgets/</code> <code>ui/delegates/</code> <code>ui/widgets/</code> <code>ui/dialogs/</code> <code>ui/widgets/</code> <code>ui/mixins/</code> <code>ui/panels/</code> <code>ui/models/</code> <code>ui/widgets/</code> <code>ui/styles/</code> <code>ui/styles.py</code> <code>core/pure/</code> <code>core/</code>"},{"location":"OPTIMIZATION_REPORT/#82","title":"8.2 \u5fc5\u9700\u7684\u5f00\u6e90\u6587\u4ef6","text":"\u6587\u4ef6 \u72b6\u6001 \u8bf4\u660e <code>README.md</code> \u9700\u521b\u5efa GIF \u6f14\u793a + \u4e00\u952e\u5b89\u88c5 + \u529f\u80fd\u5217\u8868 <code>LICENSE</code> \u9700\u521b\u5efa \u63a8\u8350 MIT\uff08\u6700\u5927\u4f20\u64ad\uff09\u6216 Apache 2.0\uff08\u4e13\u5229\u4fdd\u62a4\uff09 <code>CHANGELOG.md</code> \u9700\u521b\u5efa \u7248\u672c\u5386\u53f2 <code>CONTRIBUTING.md</code> \u9700\u521b\u5efa \u8d21\u732e\u6307\u5357 <code>.github/workflows/</code> \u9700\u521b\u5efa CI \u81ea\u52a8\u6d4b\u8bd5 <code>.gitignore</code> \u68c0\u67e5 \u786e\u4fdd\u6392\u9664 <code>.idea/</code>\u3001<code>__pycache__/</code>\u3001<code>.pyc</code>"},{"location":"OPTIMIZATION_REPORT/#83-readmemd","title":"8.3 README.md \u5efa\u8bae\u7ed3\u6784","text":"<pre><code># \ud83d\udee0\ufe0f Floating Toolbox for Maya\n\n&gt; Maya \u6548\u7387\u5229\u5668 \u2014 \u6d6e\u52a8\u5de5\u5177\u76d2 | \u5feb\u6377\u9762\u677f | \u6807\u8bb0\u83dc\u5355 | \u81ea\u5b9a\u4e49\u5de5\u5177\n\n![Maya 2022-2026](https://img.shields.io/badge/Maya-2022--2026-blue)\n![License](https://img.shields.io/badge/license-MIT-green)\n\n## \u2728 \u529f\u80fd\u7279\u8272\n[\u914d\u56fe GIF \u5c55\u793a]\n\n## \ud83d\udce6 \u4e00\u952e\u5b89\u88c5\n[3\u6b65\u5b89\u88c5\u8bf4\u660e]\n\n## \ud83d\ude80 \u5feb\u901f\u5f00\u59cb\n[30\u79d2\u4e0a\u624b\u6559\u7a0b]\n\n## \ud83d\udcd6 \u6587\u6863\n[\u94fe\u63a5\u5230 docs/]\n\n## \ud83e\udd1d \u53c2\u4e0e\u8d21\u732e\n[\u94fe\u63a5\u5230 CONTRIBUTING.md]\n\n## \ud83d\udcdd \u8bb8\u53ef\u8bc1\n[MIT License]\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#84","title":"8.4 \u5f00\u6e90\u534f\u8bae\u9009\u62e9","text":"\u534f\u8bae \u4f18\u70b9 \u7f3a\u70b9 \u9002\u7528\u573a\u666f MIT \u6700\u5bbd\u677e\u3001\u4f20\u64ad\u6700\u5e7f \u65e0\u4e13\u5229\u4fdd\u62a4 \u8ffd\u6c42\u6700\u5927\u7528\u6237\u91cf Apache 2.0 \u4e13\u5229\u4fdd\u62a4\u3001\u4f01\u4e1a\u53cb\u597d \u7565\u590d\u6742 \u6709\u5546\u4e1a\u8003\u8651 GPL v3 \u5f3a\u5236\u5f00\u6e90\u884d\u751f\u4f5c\u54c1 \u9650\u5236\u5546\u4e1a\u4f7f\u7528 \u4e0d\u63a8\u8350\uff08\u5f71\u54cd\u4f20\u64ad\uff09 <p>\u63a8\u8350 MIT\uff1a\u4f5c\u4e3a\u5de5\u5177\u7c7b\u63d2\u4ef6\uff0cMIT \u534f\u8bae\u80fd\u6700\u5927\u5316\u4f20\u64ad\u3002\u4f60\u7684\u5546\u4e1a\u4ef7\u503c\u4e0d\u5728\u4ee3\u7801\u672c\u8eab\uff0c\u800c\u5728\u4e8e\u54c1\u724c\u548c\u8bfe\u7a0b\u3002</p>"},{"location":"OPTIMIZATION_REPORT/#_6","title":"\u4e5d\u3001\u5546\u4e1a\u7b56\u7565\u5efa\u8bae","text":""},{"location":"OPTIMIZATION_REPORT/#91-vs","title":"9.1 \u5f00\u6e90\u6838\u5fc3 vs \u589e\u503c\u670d\u52a1","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502             \u514d\u8d39\uff08\u5f00\u6e90\u6838\u5fc3\uff09                       \u2502\n\u2502                                                   \u2502\n\u2502  \u5de5\u5177\u76d2\u57fa\u7840\u529f\u80fd    \u5feb\u6377\u9762\u677f    \u6807\u8bb0\u83dc\u5355             \u2502\n\u2502  \u5feb\u6377\u952e\u7ba1\u7406        \u81ea\u5b9a\u4e49\u5de5\u5177  \u5de5\u5177\u5206\u7c7b             \u2502\n\u2502  \u57fa\u7840\u4e3b\u9898          \u793e\u533a\u5de5\u5177\u5e02\u573a\uff08\u6d4f\u89c8/\u4e0b\u8f7d\uff09         \u2502\n\u2502                                                   \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502             \u589e\u503c\uff08\u53ef\u9009\u4ed8\u8d39/\u8d5e\u52a9\uff09                   \u2502\n\u2502                                                   \u2502\n\u2502  \u56e2\u961f\u914d\u7f6e\u540c\u6b65      \u9ad8\u7ea7\u4f7f\u7528\u7edf\u8ba1                     \u2502\n\u2502  \u9ad8\u7ea7\u4e3b\u9898\u5305        \u5de5\u5177\u6d41\u6c34\u7ebf\uff08Pipeline\uff09           \u2502\n\u2502  \u4f18\u5148\u6280\u672f\u652f\u6301      \u5546\u4e1a\u6388\u6743                         \u2502\n\u2502  \u4e91\u7aef\u5de5\u5177\u5907\u4efd      \u5de5\u5177\u5e02\u573a\u4e0a\u4f20/\u5206\u4eab                 \u2502\n\u2502                                                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#92","title":"9.2 \u54c1\u724c\u5efa\u8bbe\u8def\u5f84","text":"<pre><code>Phase 1\uff1a\u6280\u672f\u53e3\u7891\uff081-3\u4e2a\u6708\uff09\n\u251c\u2500\u2500 \u4fee\u590d\u6240\u6709 P0 Bug\uff0c\u53d1\u5e03\u7a33\u5b9a v1.0\n\u251c\u2500\u2500 \u5b8c\u5584\u6587\u6863\u548c\u5b89\u88c5\u4f53\u9a8c\n\u251c\u2500\u2500 \u5728 GitHub \u5efa\u7acb\u9879\u76ee\u4e3b\u9875\n\u2514\u2500\u2500 \u5728 Artstation / CGSociety \u53d1\u5e03\u4ecb\u7ecd\u5e16\n\nPhase 2\uff1a\u793e\u533a\u5efa\u8bbe\uff083-6\u4e2a\u6708\uff09\n\u251c\u2500\u2500 B\u7ad9/YouTube \u53d1\u5e03\u4f7f\u7528\u6559\u7a0b\n\u251c\u2500\u2500 \u5efa\u7acb QQ\u7fa4 / Discord \u793e\u533a\n\u251c\u2500\u2500 \u9f13\u52b1\u7528\u6237\u63d0\u4ea4\u5de5\u5177\u5230\u793e\u533a\u4ed3\u5e93\n\u251c\u2500\u2500 \u79ef\u6781\u56de\u5e94 GitHub Issues\n\u2514\u2500\u2500 \u76ee\u6807\uff1aGitHub 100+ Stars\n\nPhase 3\uff1a\u5546\u4e1a\u5316\u63a2\u7d22\uff086-12\u4e2a\u6708\uff09\n\u251c\u2500\u2500 \u63a8\u51fa \"Maya TD \u5de5\u5177\u5f00\u53d1\" \u8bfe\u7a0b\n\u251c\u2500\u2500 \u63a8\u51fa \"Maya \u6548\u7387\u63d0\u5347\" \u8bfe\u7a0b\n\u251c\u2500\u2500 \u5f15\u5165\u8d5e\u52a9/\u6350\u8d60\u673a\u5236\uff08Sponsor / \u7231\u53d1\u7535\uff09\n\u251c\u2500\u2500 \u8003\u8651\u4ed8\u8d39\u589e\u503c\u529f\u80fd\n\u2514\u2500\u2500 \u76ee\u6807\uff1a1000+ \u7528\u6237\uff0c\u7a33\u5b9a\u6536\u5165\u6d41\n\nPhase 4\uff1a\u751f\u6001\u6269\u5c55\uff0812\u4e2a\u6708+\uff09\n\u251c\u2500\u2500 \u5de5\u5177\u5e02\u573a SaaS \u5316\n\u251c\u2500\u2500 \u4f01\u4e1a\u7248\uff08\u56e2\u961f\u534f\u4f5c\u529f\u80fd\uff09\n\u251c\u2500\u2500 \u6269\u5c55\u5230\u5176\u4ed6 DCC\uff08Blender/Houdini/Substance\uff09\n\u2514\u2500\u2500 \u5efa\u7acb CG \u5de5\u5177\u54c1\u724c\n</code></pre>"},{"location":"OPTIMIZATION_REPORT/#93","title":"9.3 \u8bfe\u7a0b\u63a8\u5e7f\u4e0e\u5de5\u5177\u7684\u534f\u540c\u6548\u5e94","text":"<pre><code>\u5de5\u5177\u5438\u5f15\u7528\u6237 \u2192 \u7528\u6237\u5bf9\u4f60\u4ea7\u751f\u4fe1\u4efb \u2192 \u7528\u6237\u8d2d\u4e70\u8bfe\u7a0b\n     \u2191                                    \u2502\n     \u2514\u2500\u2500\u2500\u2500\u2500\u2500 \u8bfe\u7a0b\u5b66\u5458\u4f7f\u7528\u5de5\u5177 \u2190\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>\u5173\u952e\u6307\u6807\u5efa\u8bae\u8ddf\u8e2a\uff1a - GitHub Stars / Forks\uff1a\u54c1\u724c\u5f71\u54cd\u529b - \u4e0b\u8f7d\u91cf / \u5b89\u88c5\u91cf\uff1a\u7528\u6237\u57fa\u7840 - \u5de5\u5177\u4f7f\u7528\u9891\u7387\uff1a\u7528\u6237\u7c98\u6027 - \u793e\u533a\u6d3b\u8dc3\u5ea6\uff1aIssues / PR / \u8ba8\u8bba - \u8bfe\u7a0b\u8f6c\u5316\u7387\uff1a\u5de5\u5177\u7528\u6237 \u2192 \u8bfe\u7a0b\u5b66\u5458</p>"},{"location":"OPTIMIZATION_REPORT/#94","title":"9.4 \u5dee\u5f02\u5316\u7ade\u4e89\u4f18\u52bf","text":"<p>Maya \u751f\u6001\u4e2d\u7c7b\u4f3c\u5de5\u5177\u4e0d\u5c11\uff0c\u4f60\u7684\u5dee\u5f02\u5316\u5e94\u8be5\u805a\u7126\u5728\uff1a</p> <ol> <li>\u6781\u81f4\u7684\u5b89\u88c5\u4f53\u9a8c\uff1a\u4e00\u952e\u5b89\u88c5\uff0c\u96f6\u914d\u7f6e</li> <li>\u793e\u533a\u5de5\u5177\u751f\u6001\uff1a\u4e0d\u53ea\u662f\u5de5\u5177\u76d2\uff0c\u800c\u662f\u5de5\u5177\u5206\u4eab\u5e73\u53f0</li> <li>\u4e2d\u6587\u4f18\u5148\uff1a\u9488\u5bf9\u4e2d\u6587 CG \u793e\u533a\u4f18\u5316</li> <li>\u6301\u7eed\u66f4\u65b0\uff1a\u4fdd\u6301\u6d3b\u8dc3\u7684\u5f00\u53d1\u8282\u594f</li> <li>\u6559\u80b2\u5c5e\u6027\uff1a\u5de5\u5177\u672c\u8eab\u5c31\u662f\u5b66\u4e60 Maya \u7684\u5165\u53e3</li> </ol>"},{"location":"OPTIMIZATION_REPORT/#_7","title":"\u5341\u3001\u4f18\u5148\u7ea7\u603b\u8868","text":""},{"location":"OPTIMIZATION_REPORT/#p0","title":"P0 \u2014 \u81f4\u547d\uff08\u963b\u585e\u53d1\u5e03\uff09","text":"# \u95ee\u9898 \u6587\u4ef6 \u9884\u8ba1\u5de5\u65f6 1 <code>install.py</code> \u7684 <code>open(r'r')</code> Bug install.py:321 5\u5206\u949f 2 <code>tool_loader</code> \u7684 <code>raise e</code> \u6740\u6b7b\u5168\u90e8\u5de5\u5177 tool_loader.py:207,259 30\u5206\u949f 3 ViewModel \u5bfc\u5165\u8def\u5f84\u9519\u8bef\u5bfc\u81f4 Undo \u5931\u6548 toolbox_viewmodel.py:186 5\u5206\u949f 4 full_panel/docked_panel \u91cd\u590d\u4ee3\u7801 full_panel.py, docked_panel.py 2-4\u5c0f\u65f6 5 Shelf Button \u5bfc\u81f4\u63d2\u4ef6\u52a0\u8f7d\u4e24\u6b21 install.py:625-657 10\u5206\u949f"},{"location":"OPTIMIZATION_REPORT/#p1_1","title":"P1 \u2014 \u4e25\u91cd\uff08\u5f71\u54cd\u7a33\u5b9a\u6027\uff09","text":"# \u95ee\u9898 \u6587\u4ef6 \u9884\u8ba1\u5de5\u65f6 6 \u914d\u7f6e\u6587\u4ef6\u975e\u539f\u5b50\u5199\u5165 config_manager.py 1\u5c0f\u65f6 7 \u8282\u6d41\u4fdd\u5b58\u4e22\u5931\u4fee\u6539 tool_manager.py:529 1\u5c0f\u65f6 8 close_toolbox() \u4e0d\u5237\u65b0\u4fdd\u5b58 main.py:149 15\u5206\u949f 9 ViewModel \u7ed5\u8fc7 ToolManager toolbox_viewmodel.py 1\u5c0f\u65f6 10 \u4e24\u4e2a ConfigManager \u547d\u540d\u51b2\u7a81 config_manager.py, maya/config.py 30\u5206\u949f"},{"location":"OPTIMIZATION_REPORT/#p2_1","title":"P2 \u2014 \u4e2d\u7b49\uff08\u5f71\u54cd\u4f53\u9a8c\uff09","text":"# \u95ee\u9898 \u6587\u4ef6 \u9884\u8ba1\u5de5\u65f6 11 ToolModel \u7c7b\u578b\u4e0d\u4e00\u81f4 tool_model.py 30\u5206\u949f 12 ToolModel \u7f3a\u5c11\u8f93\u5165\u9a8c\u8bc1 tool_model.py 1\u5c0f\u65f6 13 \u88f8 except \u541e\u5f02\u5e38 \u591a\u4e2a\u6587\u4ef6 1\u5c0f\u65f6 14 \u8def\u5f84\u8ba1\u7b97\u91cd\u590d tool_manager.py 30\u5206\u949f 15 \u6587\u6863\u8def\u5f84\u8fc7\u65f6 docs/architecture.md 2\u5c0f\u65f6 16 \u6d4b\u8bd5\u5bfc\u5165\u8def\u5f84\u5931\u8d25 test_refactoring.py 30\u5206\u949f 17 DPI \u7f29\u653e\u652f\u6301 theme.py, \u5168\u5c40 4\u5c0f\u65f6 18 \u8de8\u5e73\u53f0\u5b57\u4f53 styles.py 30\u5206\u949f 19 \u5c4f\u5e55\u8fb9\u754c\u68c0\u6d4b toolbox_controller.py 30\u5206\u949f"},{"location":"OPTIMIZATION_REPORT/#p3","title":"P3 \u2014 \u5efa\u8bae\uff08\u957f\u671f\u4f18\u5316\uff09","text":"# \u95ee\u9898 \u9884\u8ba1\u5de5\u65f6 20 \u5355\u4f8b \u2192 \u4f9d\u8d56\u6ce8\u5165 1-2\u5929 21 \u56fd\u9645\u5316\uff08i18n\uff09 2-3\u5929 22 \u4fdd\u5b58\u63d0\u9192\u529f\u80fd 1\u5929 23 \u5de5\u5177\u5bfc\u51fa/\u5bfc\u5165 2-3\u5929 24 \u4f7f\u7528\u7edf\u8ba1\u9762\u677f 1-2\u5929 25 \u641c\u7d22\u589e\u5f3a\uff08\u62fc\u97f3\u7b49\uff09 1\u5929 26 \u952e\u76d8\u5bfc\u822a 1\u5929 27 \u8865\u5145\u6d4b\u8bd5\u8986\u76d6 2-3\u5929 28 \u5f00\u6e90\u6587\u4ef6\u51c6\u5907 1\u5929"},{"location":"OPTIMIZATION_REPORT/#_8","title":"\u9644\u5f55","text":""},{"location":"OPTIMIZATION_REPORT/#a","title":"A. \u5b89\u5168\u5ba1\u67e5\u6e05\u5355","text":"<ul> <li>[ ] \u7528\u6237\u5de5\u5177\u4ee3\u7801\u6267\u884c\u524d\u6dfb\u52a0\u57fa\u672c\u5b89\u5168\u68c0\u67e5</li> <li>[ ] tool_id \u8def\u5f84\u904d\u5386\u9632\u62a4</li> <li>[ ] \u5bfc\u5165\u7684\u5916\u90e8\u5de5\u5177\u9700\u7528\u6237\u786e\u8ba4</li> <li>[ ] \u914d\u7f6e\u6587\u4ef6\u5b8c\u6574\u6027\u6821\u9a8c</li> <li>[ ] \u9519\u8bef\u65e5\u5fd7\u4e0d\u6cc4\u9732\u654f\u611f\u8def\u5f84\u4fe1\u606f</li> </ul>"},{"location":"OPTIMIZATION_REPORT/#b","title":"B. \u53d1\u5e03\u524d\u68c0\u67e5\u6e05\u5355","text":"<ul> <li>[ ] \u6240\u6709 P0 Bug \u5df2\u4fee\u590d</li> <li>[ ] install.py \u5728 Maya 2022-2026 \u4e0a\u6d4b\u8bd5\u901a\u8fc7</li> <li>[ ] \u57fa\u7840\u6d4b\u8bd5\u5168\u90e8\u901a\u8fc7\uff08pytest\uff09</li> <li>[ ] README.md \u5b8c\u6210\u5e76\u5305\u542b\u5b89\u88c5\u8bf4\u660e</li> <li>[ ] LICENSE \u6587\u4ef6\u5df2\u6dfb\u52a0</li> <li>[ ] .gitignore \u5df2\u6e05\u7406\uff08\u6392\u9664 .idea/\u3001pycache/ \u7b49\uff09</li> <li>[ ] CHANGELOG.md \u8bb0\u5f55 v1.0 \u53d8\u66f4</li> <li>[ ] \u6587\u6863\u8def\u5f84\u5168\u90e8\u66f4\u65b0\u4e3a\u6700\u65b0\u7ed3\u6784</li> <li>[ ] \u8bbe\u7f6e\u6309\u94ae\u7684 print(\"\u8bbe\u7f6e\u529f\u80fd\u5f85\u5b9e\u73b0\") \u5df2\u5904\u7406</li> </ul>"},{"location":"OPTIMIZATION_REPORT/#c-maya","title":"C. Maya \u7248\u672c\u517c\u5bb9\u6027\u77e9\u9635","text":"Maya \u7248\u672c Python Qt \u7ed1\u5b9a \u72b6\u6001 2022 3.7 PySide2 \u9700\u6d4b\u8bd5 2023 3.9 PySide2 \u9700\u6d4b\u8bd5 2024 3.10 PySide2 \u9700\u6d4b\u8bd5 2025 3.11 PySide6 \u9700\u6d4b\u8bd5 2026 3.11+ PySide6 \u4e3b\u8981\u5f00\u53d1\u7248\u672c <p>\u6587\u6863\u7248\u672c\u5386\u53f2</p> \u7248\u672c \u65e5\u671f \u8bf4\u660e 1.0 2026-02-12 \u521d\u59cb\u67b6\u6784\u5ba1\u67e5\u62a5\u544a"},{"location":"analysis_and_recommendations/","title":"\ud83d\udd0d Floating Toolbox \u67b6\u6784\u5ba1\u67e5\u4e0e\u8fdb\u9636\u5efa\u8bae","text":"<p>\u57fa\u4e8e\u5bf9\u6e90\u7801\u7684\u5168\u9762\u5ba1\u67e5\uff0c\u7ed3\u5408\u4f60\u7684\u5f00\u6e90 + \u5546\u4e1a\u5316\u76ee\u6807</p>"},{"location":"analysis_and_recommendations/#_1","title":"\u4e00\u3001\u5f53\u524d\u9879\u76ee\u5065\u5eb7\u5ea6\u8bc4\u4f30","text":"<p>\u4f60\u7684\u9879\u76ee\u5df2\u7ecf\u505a\u4e86\u5927\u91cf\u4f18\u5316\u5de5\u4f5c\uff0c\u4ee5\u4e0b\u662f\u5df2\u9a8c\u8bc1\u7684\u4fee\u590d\u72b6\u6001\uff1a</p> \u539f\u62a5\u544a\u7f16\u53f7 \u95ee\u9898 \u2705 \u5df2\u4fee\u590d P0 #2 <code>tool_loader</code> raise \u6740\u6b7b\u5168\u90e8\u5de5\u5177 \u2705 <code>_load_python_tool</code> / <code>_load_json_tool</code> \u73b0\u5728 <code>return None</code> P0 #3 ViewModel \u5bfc\u5165\u8def\u5f84\u9519\u8bef \u2705 \u5bfc\u5165\u8def\u5f84\u6b63\u786e <code>from floating_toolbox.core.maya.maya_service</code> P0 #5 Shelf Button \u91cd\u590d\u52a0\u8f7d \u2705 <code>install.py</code> \u5df2\u91cd\u6784\u4e3a 288 \u884c\uff0c\u903b\u8f91\u7b80\u6d01 P1 #6 \u914d\u7f6e\u975e\u539f\u5b50\u5199\u5165 \u2705 <code>_safe_write_json</code> \u5b9e\u73b0\u4e86 tempfile \u2192 backup \u2192 os.replace P1 #7 \u8282\u6d41\u4fdd\u5b58\u4e22\u5931\u4fee\u6539 \u2705 <code>_dirty</code> \u6807\u8bb0 + <code>_save_timer</code> \u91cd\u7f6e\u7b56\u7565 P1 #8 <code>close_toolbox()</code> \u4e0d\u5237\u65b0\u4fdd\u5b58 \u2705 \u8c03\u7528 <code>save_config_immediate()</code> P1 #9 ViewModel \u7ed5\u8fc7 ToolManager \u2705 <code>rename_category</code> / <code>delete_category</code> \u6b63\u786e\u59d4\u6258 P1 #10 ConfigManager \u547d\u540d\u51b2\u7a81 \u2705 \u91cd\u547d\u540d\u4e3a <code>UIConfigManager</code> P2 #11 ToolModel \u7c7b\u578b\u4e0d\u4e00\u81f4 \u2705 <code>pin_time: Optional[float]</code>, <code>last_used: Optional[str]</code> P2 #12 ToolModel \u7f3a\u5c11\u9a8c\u8bc1 \u2705 <code>__post_init__</code> + <code>_VALID_ID_PATTERN</code> \u9632\u8def\u5f84\u904d\u5386 P2 #14 \u8def\u5f84\u8ba1\u7b97\u91cd\u590d \u2705 <code>_PACKAGE_ROOT</code> \u7c7b\u5e38\u91cf P2 #17 DPI \u7f29\u653e \u2705 <code>UIScale</code> + <code>UIConstants.apply_scaling()</code> P2 #18 \u8de8\u5e73\u53f0\u5b57\u4f53 \u2705 <code>_get_platform_font_family()</code> \u4ee3\u7801\u8d28\u91cf lambda \u95ed\u5305 \u2705 <code>lambda _c=code, _l=language:</code> \u9ed8\u8ba4\u53c2\u6570\u7ed1\u5b9a \u4ee3\u7801\u8d28\u91cf ViewModel \u91cd\u590d\u5bfc\u5165 \u2705 <code>__init__</code> \u4e2d\u521d\u59cb\u5316 <code>_resource_manager</code> \u4ee3\u7801\u8d28\u91cf RuntimeTool \u6ce8\u91ca \u2705 \u6539\u4e3a \"dataclass\" <p>\u6574\u4f53\u8bc4\u4ef7\uff1a\u6838\u5fc3\u67b6\u6784\u5df2\u76f8\u5f53\u624e\u5b9e\uff0cMVVM \u5206\u5c42\u6e05\u6670\uff0c\u53ef\u4ee5\u4e13\u6ce8\u4e8e\"\u6253\u78e8\u4f53\u9a8c\"\u548c\"\u5f00\u6e90\u5305\u88c5\"\u3002</p>"},{"location":"analysis_and_recommendations/#_2","title":"\u4e8c\u3001\u4ecd\u9700\u5173\u6ce8\u7684\u95ee\u9898","text":""},{"location":"analysis_and_recommendations/#21-save_user_tool","title":"2.1 \ud83d\udd34 <code>save_user_tool()</code> \u672a\u4f7f\u7528\u539f\u5b50\u5199\u5165","text":"<p>save_user_tool \u4e2d\u76f4\u63a5\u7528 <code>open() + json.dump</code> \u5199\u7528\u6237\u5de5\u5177\u6587\u4ef6\uff0c\u4f46 <code>config_manager.py</code> \u5df2\u7ecf\u6709\u4e86 <code>_safe_write_json</code>\u3002</p> <pre><code> # tool_manager.py L667\n- with open(file_path, \"w\", encoding=\"utf-8\") as f:\n-     json.dump(tool_data, f, indent=2, ensure_ascii=False)\n+ self.config_manager._safe_write_json(file_path, tool_data)\n</code></pre> <p>\u6216\u8005\u66f4\u597d\u7684\u505a\u6cd5\uff1a\u5728 <code>ConfigManager</code> \u4e2d\u66b4\u9732 <code>save_user_tool_file(tool_id, data)</code> \u516c\u5f00\u65b9\u6cd5\u3002</p>"},{"location":"analysis_and_recommendations/#22-full_panelpy-docked_panelpy","title":"2.2 \ud83d\udfe1 <code>full_panel.py</code> \u548c <code>docked_panel.py</code> \u4ee3\u7801\u91cd\u590d","text":"<ul> <li><code>full_panel.py</code> = 24,591 bytes</li> <li><code>docked_panel.py</code> = 20,194 bytes</li> </ul> <p>\u8fd9\u4e24\u4e2a\u6587\u4ef6\u6709\u5927\u91cf\u91cd\u590d\u7684\u5de5\u5177\u5217\u8868\u6e32\u67d3\u903b\u8f91\u3002\u5efa\u8bae\u63d0\u53d6 <code>ToolPanelMixin</code> \u6216\u57fa\u7c7b\uff0c\u5c06\u5171\u4eab\u7684\u641c\u7d22/\u6392\u5e8f/\u62d6\u62fd/\u53f3\u952e\u83dc\u5355\u903b\u8f91\u62bd\u51fa\u3002</p> <p>[!TIP] \u4e0d\u9700\u8981\u4e00\u6b21\u6027\u91cd\u6784\u3002\u53ef\u4ee5\u9010\u6b65\u63d0\u53d6\uff1a\u5148\u628a\u53f3\u952e\u83dc\u5355\u5904\u7406\u3001\u641c\u7d22\u8fc7\u6ee4\u3001\u5de5\u5177\u6392\u5e8f\u7b49\u7eaf\u903b\u8f91\u51fd\u6570\u63d0\u5230 <code>ui/mixins/tool_panel_mixin.py</code> \u4e2d\u3002</p>"},{"location":"analysis_and_recommendations/#23-marking_menumanagerpy-44kb","title":"2.3 \ud83d\udfe1 <code>marking_menu/manager.py</code> \u2014 \u5355\u6587\u4ef6 44KB","text":"<p>\u8fd9\u4e2a\u6587\u4ef6\u6709 44,005 \u5b57\u8282\uff0c\u5efa\u8bae\u62c6\u5206\u4e3a\uff1a - <code>manager.py</code> \u2014 \u6838\u5fc3\u7ba1\u7406\u903b\u8f91 - <code>template_io.py</code> \u2014 XML\u6a21\u677f\u7684\u8bfb\u5199 - <code>runtime.py</code> \u2014 Maya\u8fd0\u884c\u65f6\u83dc\u5355\u7684\u521b\u5efa/\u9500\u6bc1</p>"},{"location":"analysis_and_recommendations/#24","title":"2.4 \ud83d\udfe1 \u5c4f\u5e55\u8fb9\u754c\u68c0\u6d4b\u4ecd\u7f3a\u5931","text":"<p>toolbox_controller.py \u5728\u6062\u590d\u9762\u677f\u4f4d\u7f6e\u65f6\u6ca1\u6709\u68c0\u6d4b\u5c4f\u5e55\u8fb9\u754c\u3002\u65ad\u5f00\u5916\u63a5\u663e\u793a\u5668\u540e\u9762\u677f\u53ef\u80fd\u4e0d\u53ef\u89c1\u3002</p>"},{"location":"analysis_and_recommendations/#25-toolloader","title":"2.5 \ud83d\udfe2 \u6d4b\u8bd5\u76ee\u5f55\u7f3a\u5c11\u5bf9 ToolLoader \u5bb9\u9519\u7684\u6d4b\u8bd5","text":"<p>\u5f53\u524d\u6d4b\u8bd5\u8986\u76d6\u4e86 ToolManager/CategoryManager/ConfigManager/ViewModel\uff0c\u4f46\u7f3a\u5c11\uff1a - \u635f\u574fJSON\u6587\u4ef6\u4e0d\u5f71\u54cd\u5176\u4ed6\u5de5\u5177\u52a0\u8f7d - \u914d\u7f6e\u6587\u4ef6\u635f\u574f\u65f6\u4ece <code>.bak</code> \u81ea\u52a8\u6062\u590d</p>"},{"location":"analysis_and_recommendations/#_3","title":"\u4e09\u3001\u5f00\u6e90\u5316\u6838\u5fc3\u5efa\u8bae\uff08\u4f60\u7684\u9996\u8981\u76ee\u6807\uff09","text":""},{"location":"analysis_and_recommendations/#31-readme","title":"3.1 README \u662f\u4f60\u7684\u95e8\u9762","text":"<p>[!IMPORTANT] \u5bf9\u4e8e\u4e00\u4e2a\u5f00\u6e90\u9879\u76ee\uff0cREADME.md \u7684\u91cd\u8981\u6027 \u2265 \u4ee3\u7801\u8d28\u91cf\u3002\u7528\u6237\u4e0d\u4f1a\u5148\u770b\u4f60\u7684\u4ee3\u7801\uff0c\u4ed6\u4eec\u5148\u770b README\u3002</p> <p>\u5efa\u8bae\u7ed3\u6784\uff1a</p> <pre><code>\ud83d\udee0\ufe0f Floating Toolbox for Maya\n\n[GIF \u52a8\u753b\u6f14\u793a \u2014 15\u79d2\u5c55\u793a\u6838\u5fc3\u529f\u80fd]\n\n\u2728 Features\uff083-5 \u4e2a\u6838\u5fc3\u4eae\u70b9\uff0c\u914d\u622a\u56fe\uff09\n\ud83d\udce6 Installation\uff08\u4e24\u6b65\u5b8c\u6210\uff1a\u4e0b\u8f7d \u2192 \u62d6\u5165 Maya\uff09\n\ud83d\ude80 Quick Start\uff0830\u79d2\u4e0a\u624b\uff09\n\ud83d\udcd6 Documentation\uff08\u94fe\u63a5\u5230 docs \u7ad9\u70b9\uff09\n\ud83e\udd1d Contributing\n</code></pre> <p>\u5173\u952e\uff1a\u4e00\u5b9a\u8981\u6709 GIF \u52a8\u753b\u3002 \u9759\u6001\u622a\u56fe\u7684\u4f20\u64ad\u6548\u679c\u8fdc\u4e0d\u5982 GIF\u3002</p>"},{"location":"analysis_and_recommendations/#32","title":"3.2 \u5f00\u6e90\u534f\u8bae","text":"<p>\u63a8\u8350 MIT\u3002\u7406\u7531\uff1a - \u4f60\u7684\u5546\u4e1a\u4ef7\u503c\u5728\u4e8e\u54c1\u724c\u548c\u8bfe\u7a0b\uff0c\u4e0d\u5728\u4ee3\u7801 - MIT \u6700\u5927\u5316\u4f20\u64ad\uff0c\u4f01\u4e1a/\u5de5\u4f5c\u5ba4\u53ef\u4ee5\u653e\u5fc3\u4f7f\u7528 - Maya \u793e\u533a\u5bf9 GPL \u7c7b\u534f\u8bae\u6709\u62b5\u89e6</p>"},{"location":"analysis_and_recommendations/#33","title":"3.3 \u7f3a\u5931\u7684\u5173\u952e\u6587\u4ef6\u6e05\u5355","text":"\u6587\u4ef6 \u4f18\u5148\u7ea7 \u7528\u9014 <code>README.md</code>\uff08\u5b8c\u5584\u7248\uff09 \ud83d\udd34 \u9879\u76ee\u95e8\u9762 <code>LICENSE</code> \ud83d\udd34 \u6cd5\u5f8b\u8bb8\u53ef <code>CHANGELOG.md</code> \ud83d\udfe1 \u7248\u672c\u8ffd\u8e2a <code>CONTRIBUTING.md</code> \ud83d\udfe1 \u8d21\u732e\u6307\u5357 <code>pytest.ini</code> \ud83d\udfe1 \u6d4b\u8bd5\u914d\u7f6e <code>.github/workflows/test.yml</code> \ud83d\udfe2 CI \u81ea\u52a8\u6d4b\u8bd5"},{"location":"analysis_and_recommendations/#_4","title":"\u56db\u3001\u529f\u80fd\u4f18\u5316\u5efa\u8bae\uff08\u6295\u5165\u4ea7\u51fa\u6bd4\u6392\u5e8f\uff09","text":""},{"location":"analysis_and_recommendations/#41","title":"4.1 \ud83e\udd47 \u4fdd\u5b58\u63d0\u9192\u529f\u80fd\uff08\u4f60\u5df2\u8ba1\u5212\u7684\uff09","text":"<p>\u5efa\u8bae\u5b9e\u73b0\u65b9\u5f0f\uff1a\u4e0d\u6253\u65ad\u5de5\u4f5c\u6d41 - IdlePanel \u547c\u5438\u706f\u4ece\u7d2b\u8272 \u2192 \u6a59\u8272\u6e10\u53d8\u63d0\u9192 - Tooltip \u663e\u793a \"\u8ddd\u4e0a\u6b21\u4fdd\u5b58 XX \u5206\u949f\" - \u5355\u51fb\u76f4\u63a5\u4fdd\u5b58\uff08\u4e0d\u5f39\u7a97\uff01\uff09</p> <p>\u8fd9\u4e2a\u529f\u80fd\u867d\u5c0f\uff0c\u4f46\u6781\u5177\u4f20\u64ad\u6027\u2014\u2014\u6bcf\u4e2a Maya \u7528\u6237\u90fd\u7ecf\u5386\u8fc7\u5d29\u6e83\u4e22\u5931\u5de5\u4f5c\u7684\u75db\u82e6\u3002</p>"},{"location":"analysis_and_recommendations/#42","title":"4.2 \ud83e\udd48 \u5de5\u5177\u641c\u7d22\u589e\u5f3a","text":"<p>\u5f53\u524d\u641c\u7d22\u662f\u57fa\u4e8e <code>name/description/category</code> \u7684\u7b80\u5355 <code>in</code> \u5339\u914d\u3002\u5efa\u8bae\uff1a 1. \u62fc\u97f3\u9996\u5b57\u6bcd\u641c\u7d22\uff08\u4e2d\u6587\u7528\u6237\u7684\u521a\u9700\uff0c\u5982 \"cjlft\" \u2192 \"\u521b\u5efa\u7acb\u65b9\u4f53\"\uff09 2. \u547d\u4ee4\u540d\u641c\u7d22\uff08\u8f93\u5165 \"polyCube\" \u627e\u5230\u5bf9\u5e94\u5de5\u5177\uff09 3. \u8fd9\u4e24\u4e2a\u529f\u80fd\u6295\u5165\u4ea7\u51fa\u6bd4\u6781\u9ad8\uff0c\u5b9e\u73b0\u7b80\u5355\u4f46\u5dee\u5f02\u5316\u660e\u663e</p>"},{"location":"analysis_and_recommendations/#43-ftool","title":"4.3 \ud83e\udd49 \u5de5\u5177\u5bfc\u51fa/\u5bfc\u5165 (.ftool \u5305)","text":"<p>\u4e3a\u793e\u533a\u751f\u6001\u6253\u57fa\u7840\u3002\u5148\u5b9e\u73b0\u672c\u5730\u5bfc\u51fa/\u5bfc\u5165\uff0c\u4e3a\u672a\u6765\u7684\u5728\u7ebf\u5de5\u5177\u5e02\u573a\u5efa\u7acb\u683c\u5f0f\u6807\u51c6\u3002</p>"},{"location":"analysis_and_recommendations/#44","title":"4.4 \u8bbe\u7f6e\u9762\u677f","text":"<pre><code># \u5f53\u524d\u72b6\u6001\nsettings_btn.clicked.connect(lambda: print(\"\u8bbe\u7f6e\u529f\u80fd\u5f85\u5b9e\u73b0\"))\n</code></pre> <p>\u6709\u6309\u94ae\u4f46\u4e0d\u5de5\u4f5c = \u964d\u4f4e\u7528\u6237\u4fe1\u4efb\u3002\u8981\u4e48\u5b9e\u73b0\uff0c\u8981\u4e48\u5728 v1.0 \u524d\u79fb\u9664\u3002</p>"},{"location":"analysis_and_recommendations/#_5","title":"\u4e94\u3001\u5546\u4e1a\u7b56\u7565\u7cbe\u8981","text":"<pre><code>graph LR\n    A[\u5f00\u6e90\u5de5\u5177&lt;br/&gt;\u514d\u8d39] --&gt;|\u5efa\u7acb\u4fe1\u4efb| B[\u793e\u533a\u6d3b\u8dc3&lt;br/&gt;100+ Stars]\n    B --&gt;|\u54c1\u724c\u8ba4\u77e5| C[\u8bfe\u7a0b/\u6559\u7a0b&lt;br/&gt;\u53d8\u73b0]\n    C --&gt;|\u5b66\u5458\u4f7f\u7528\u5de5\u5177| A\n\n    style A fill:#50fa7b,color:#282a36\n    style B fill:#8be9fd,color:#282a36\n    style C fill:#ff79c6,color:#282a36\n</code></pre>"},{"location":"analysis_and_recommendations/#_6","title":"\u5173\u952e\u8282\u594f","text":"\u9636\u6bb5 \u65f6\u95f4 \u76ee\u6807 v1.0 \u53d1\u5e03 1-2 \u5468 \u4fee\u590d\u5269\u4f59\u95ee\u9898 + README + LICENSE \u793e\u533a\u79cd\u5b50 1-3 \u6708 B\u7ad9\u6559\u7a0b + GitHub 100 Stars \u8bfe\u7a0b\u542f\u52a8 3-6 \u6708 \u7528\u5de5\u5177\u7684\u7528\u6237\u57fa\u7840\u63a8\u5e7f\u8bfe\u7a0b"},{"location":"analysis_and_recommendations/#_7","title":"\u5dee\u5f02\u5316\u8981\u70b9","text":"<ol> <li>\u6781\u81f4\u5b89\u88c5\u4f53\u9a8c \u2014 \u4e00\u62d6\u5373\u7528\uff0c\u5176\u4ed6\u5de5\u5177\u505a\u4e0d\u5230</li> <li>\u4e2d\u6587\u793e\u533a\u5148\u884c \u2014 CG \u4e2d\u6587\u793e\u533a\u7f3a\u5c11\u9ad8\u8d28\u91cf\u5f00\u6e90\u5de5\u5177</li> <li>\u6559\u80b2\u5c5e\u6027 \u2014 \u5de5\u5177\u672c\u8eab\u80fd\u6559\u4f1a\u7528\u6237 Maya \u5de5\u4f5c\u6d41</li> </ol>"},{"location":"analysis_and_recommendations/#_8","title":"\u516d\u3001\u5f53\u524d\u4ee3\u7801\u7684\u989d\u5916\u5efa\u8bae","text":""},{"location":"analysis_and_recommendations/#61","title":"6.1 \u56fd\u9645\u5316\u9884\u57cb\uff08\u4e0d\u6025\u7740\u505a\uff0c\u4f46\u53ef\u4ee5\u9884\u57cb\uff09","text":"<p>\u5efa\u8bae\u5728 UI \u5b57\u7b26\u4e32\u4e2d\u4f7f\u7528\u5e38\u91cf\u800c\u975e\u786c\u7f16\u7801\uff1a</p> <pre><code># \u76ee\u524d\nlogger.info(\"\u5de5\u5177\u7ba1\u7406\u5668\u521d\u59cb\u5316\u5b8c\u6210\")\n\n# \u5efa\u8bae\u9884\u57cb\nclass Messages:\n    INIT_COMPLETE = \"\u5de5\u5177\u7ba1\u7406\u5668\u521d\u59cb\u5316\u5b8c\u6210\"  # \u5c06\u6765\u53ef\u66ff\u6362\u4e3a i18n\n</code></pre> <p>\u8fd9\u6837\u672a\u6765\u652f\u6301\u82f1\u6587\u5c31\u53ea\u9700\u8981\u4fee\u6539\u4e00\u4e2a\u6587\u4ef6\u3002</p>"},{"location":"analysis_and_recommendations/#62","title":"6.2 \u9519\u8bef\u53cd\u9988\u673a\u5236","text":"<p>\u5f53\u5de5\u5177\u6267\u884c\u5931\u8d25\u65f6\uff0c\u7528\u6237\u76ee\u524d\u65e0\u6cd5\u76f4\u89c2\u770b\u5230\u9519\u8bef\u4fe1\u606f\u3002\u5efa\u8bae\u6dfb\u52a0\u4e00\u4e2a\u8f7b\u91cf\u7684 toast \u901a\u77e5\uff1a</p> <ul> <li>\u2705 \u6210\u529f\uff1a\u7eff\u8272\u95ea\u70c1\uff080.3\u79d2\u5373\u53ef\uff09</li> <li>\u274c \u5931\u8d25\uff1a\u7ea2\u8272\u63d0\u793a + \u9519\u8bef\u6458\u8981\uff083\u79d2\u81ea\u52a8\u6d88\u5931\uff09</li> </ul>"},{"location":"analysis_and_recommendations/#63-quick_panelpy-33kb","title":"6.3 <code>quick_panel.py</code> \u7684 33KB \u4f53\u79ef","text":"<p>\u8fd9\u4e2a\u6587\u4ef6\u4e5f\u504f\u5927\uff0833,439 bytes\uff09\u3002\u5982\u679c\u540e\u7eed\u91cd\u6784 <code>full_panel</code>/<code>docked_panel</code>\uff0c\u53ef\u4ee5\u540c\u6b65\u62c6\u5206\u3002</p>"},{"location":"analysis_and_recommendations/#_9","title":"\u603b\u7ed3","text":"<p>\u4f60\u7684\u9879\u76ee\u5df2\u7ecf\u8d85\u8d8a\u4e86\u5927\u591a\u6570 Maya \u5f00\u6e90\u5de5\u5177\u7684\u5de5\u7a0b\u8d28\u91cf\u3002 MVVM \u67b6\u6784\u3001\u539f\u5b50\u5199\u5165\u3001DPI \u7f29\u653e\u3001\u8f93\u5165\u9a8c\u8bc1\u2014\u2014\u8fd9\u4e9b\u5728 Maya \u63d2\u4ef6\u751f\u6001\u4e2d\u975e\u5e38\u5c11\u89c1\u3002</p> <p>\u5f53\u524d\u7684\u6700\u9ad8\u4f18\u5148\u7ea7\u4e0d\u662f\u7ee7\u7eed\u4f18\u5316\u4ee3\u7801\uff0c\u800c\u662f\uff1a</p> <ol> <li>\u270d\ufe0f \u5199\u4e00\u4e2a\u9707\u64bc\u7684 README\uff08\u9644 GIF\uff09</li> <li>\ud83d\udcdd \u6dfb\u52a0 LICENSE\uff08MIT\uff09</li> <li>\ud83d\ude80 \u53d1\u5e03 v1.0</li> <li>\ud83d\udcf9 \u5728 B \u7ad9\u53d1\u5e03 3 \u5206\u949f\u6f14\u793a\u89c6\u9891</li> </ol> <p>\u4ee3\u7801\u53ef\u4ee5\u6301\u7eed\u8fed\u4ee3\uff0c\u4f46\u5f00\u6e90\u9879\u76ee\u7684\u7a97\u53e3\u671f\u5f88\u91cd\u8981\u2014\u2014\u5148\u53d1\u5e03\uff0c\u518d\u5b8c\u5584\u3002</p>"},{"location":"architecture/","title":"\u67b6\u6784\u8bf4\u660e","text":"<p>Maya \u60ac\u6d6e\u5de5\u5177\u76d2\u91c7\u7528 MVVM (Model-View-ViewModel) \u67b6\u6784\u6a21\u5f0f\uff0c\u5b9e\u73b0 UI \u4e0e\u4e1a\u52a1\u903b\u8f91\u7684\u5206\u79bb\u3002</p>"},{"location":"architecture/#_2","title":"\u67b6\u6784\u6982\u89c8","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      Entry Point                             \u2502\n\u2502                       main.py                                \u2502\n\u2502              show_toolbox() / close_toolbox()                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                      \u2502\n                      \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   State Manager                              \u2502\n\u2502                   FloatingBall                               \u2502\n\u2502              \u7ba1\u7406\u4e09\u4e2a\u9762\u677f\u7684\u521b\u5efa\u3001\u5207\u6362\u548c\u751f\u547d\u5468\u671f               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                      \u2502\n          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n          \u25bc           \u25bc           \u25bc\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502  Idle   \u2502 \u2502  Quick  \u2502 \u2502  Full   \u2502\n     \u2502  Panel  \u2502 \u2502  Panel  \u2502 \u2502  Panel  \u2502\n     \u2502 \u60ac\u6d6e\u7403  \u2502 \u2502\u5feb\u6377\u9762\u677f \u2502 \u2502\u5b8c\u6574\u9762\u677f \u2502\n     \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518\n          \u2502           \u2502           \u2502\n          \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                      \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    ViewModel Layer                           \u2502\n\u2502                  ToolboxViewModel                            \u2502\n\u2502           \u4e1a\u52a1\u903b\u8f91\u3001\u72b6\u6001\u7ba1\u7406\u3001Maya \u96c6\u6210                        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                       \u2502\n           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n           \u25bc           \u25bc           \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   ToolManager   \u2502 \u2502 CategoryManager \u2502 \u2502  ConfigManager  \u2502\n\u2502    \u5de5\u5177\u7ba1\u7406     \u2502 \u2502    \u5206\u7c7b\u7ba1\u7406     \u2502 \u2502    \u914d\u7f6e\u7ba1\u7406     \u2502\n\u2502 \u2022 \u6ce8\u518c/\u6267\u884c     \u2502 \u2502 \u2022 CRUD \u64cd\u4f5c     \u2502 \u2502 \u2022 JSON \u8bfb\u5199     \u2502\n\u2502 \u2022 \u641c\u7d22/\u6536\u85cf     \u2502 \u2502 \u2022 \u6298\u53e0/\u6392\u5e8f     \u2502 \u2502 \u2022 \u7528\u6237\u5de5\u5177\u5b58\u50a8  \u2502\n\u2502 \u2022 \u8282\u6d41\u4fdd\u5b58      \u2502 \u2502 \u2022 \u8282\u6d41\u4fdd\u5b58      \u2502 \u2502 \u2022 \u4f4d\u7f6e\u8bb0\u5fc6      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502                   \u2502                   \u2502\n         \u25bc                   \u25bc                   \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    plugins/     \u2502 \u2502 categories.json \u2502 \u2502 toolbox_config  \u2502\n\u2502 default_tools.py\u2502 \u2502                 \u2502 \u2502 user_tools.json \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/#_3","title":"\u76ee\u5f55\u7ed3\u6784","text":"<pre><code>floating_toolbox/\n\u251c\u2500\u2500 __init__.py                 # \u5305\u5165\u53e3\uff0c\u5bfc\u51fa\u516c\u5171 API\n\u251c\u2500\u2500 main.py                     # \u5168\u5c40\u51fd\u6570\uff1ashow_toolbox(), close_toolbox()\n\u251c\u2500\u2500 start.py                    # Maya \u542f\u52a8\u52a0\u8f7d\u811a\u672c\n\u2502\n\u251c\u2500\u2500 core/                       # \u6838\u5fc3\u4e1a\u52a1\u903b\u8f91\u5c42\n\u2502   \u251c\u2500\u2500 tool_manager.py         # \u5de5\u5177\u7ba1\u7406\u5668 (\u5355\u4f8b)\n\u2502   \u251c\u2500\u2500 category_manager.py     # \u5206\u7c7b\u7ba1\u7406\u5668 (\u5355\u4f8b)\n\u2502   \u251c\u2500\u2500 config_manager.py       # \u914d\u7f6e\u7ba1\u7406\u5668 (\u5355\u4f8b)\n\u2502   \u251c\u2500\u2500 config.py               # UI \u914d\u7f6e (\u4f4d\u7f6e\u3001\u56fa\u5b9a\u72b6\u6001\u7b49)\n\u2502   \u251c\u2500\u2500 resource_manager.py     # \u8d44\u6e90\u52a0\u8f7d\u5668\n\u2502   \u251c\u2500\u2500 logger.py               # \u65e5\u5fd7\u7cfb\u7edf\n\u2502   \u251c\u2500\u2500 decorators.py           # \u88c5\u9970\u5668 (@safe_execute)\n\u2502   \u2514\u2500\u2500 viewmodels/\n\u2502       \u2514\u2500\u2500 toolbox_viewmodel.py  # ViewModel \u5c42\n\u2502\n\u251c\u2500\u2500 ui/                         # UI \u89c6\u56fe\u5c42\n\u2502   \u251c\u2500\u2500 floating_ball.py        # \u72b6\u6001\u7ba1\u7406\u5668\n\u2502   \u251c\u2500\u2500 base_panel.py           # \u9762\u677f\u57fa\u7c7b\n\u2502   \u251c\u2500\u2500 idle_panel.py           # \u754c\u97621\uff1a\u60ac\u6d6e\u7403\n\u2502   \u251c\u2500\u2500 quick_panel.py          # \u754c\u97622\uff1a\u5feb\u6377\u9762\u677f\n\u2502   \u251c\u2500\u2500 full_panel.py           # \u754c\u97623\uff1a\u5b8c\u6574\u9762\u677f\n\u2502   \u251c\u2500\u2500 theme.py                # \u4e3b\u9898\u5e38\u91cf (DraculaTheme)\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 components/             # \u53ef\u590d\u7528\u7ec4\u4ef6\n\u2502   \u2502   \u2514\u2500\u2500 avatar_widget.py    # \u5934\u50cf\u7ec4\u4ef6\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 delegates/              # Qt \u59d4\u6258\n\u2502   \u2502   \u2514\u2500\u2500 tool_delegate.py    # \u5de5\u5177\u9879\u6e32\u67d3\u59d4\u6258\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 dialogs/                # \u5bf9\u8bdd\u6846\n\u2502   \u2502   \u2514\u2500\u2500 tool_creator.py     # \u5de5\u5177\u521b\u5efa\u5bf9\u8bdd\u6846\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 mixins/                 # Mixin \u7c7b\n\u2502   \u2502   \u2514\u2500\u2500 panel_animation.py  # \u52a8\u753b Mixin\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 models/                 # Qt \u6570\u636e\u6a21\u578b\n\u2502   \u2502   \u251c\u2500\u2500 tool_model.py       # \u5de5\u5177\u6811\u6a21\u578b (ToolTreeModel)\n\u2502   \u2502   \u251c\u2500\u2500 tool_tree_data.py   # \u6811\u6570\u636e\u6784\u5efa\u5668\n\u2502   \u2502   \u2514\u2500\u2500 tool_tree_dnd.py    # \u62d6\u62fd\u5904\u7406\u5668\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 styles/                 # QSS \u6837\u5f0f\u8868\n\u2502       \u2514\u2500\u2500 stylesheets.py\n\u2502\n\u251c\u2500\u2500 plugins/                    # \u63d2\u4ef6\u76ee\u5f55 (\u81ea\u52a8\u626b\u63cf)\n\u2502   \u2514\u2500\u2500 default_tools.py        # \u5185\u7f6e\u5de5\u5177\u63d2\u4ef6\n\u2502\n\u251c\u2500\u2500 config/                     # \u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\n\u2502   \u251c\u2500\u2500 toolbox_config.json     # \u4e3b\u914d\u7f6e (\u5de5\u5177\u7edf\u8ba1)\n\u2502   \u251c\u2500\u2500 categories.json         # \u5206\u7c7b\u914d\u7f6e\n\u2502   \u2514\u2500\u2500 user_tools.json         # \u7528\u6237\u81ea\u5b9a\u4e49\u5de5\u5177\n\u2502\n\u251c\u2500\u2500 resources/                  # \u8d44\u6e90\u76ee\u5f55\n\u2502   \u2514\u2500\u2500 icons/                  # \u56fe\u6807\u6587\u4ef6\n\u2502\n\u251c\u2500\u2500 tests/                      # \u5355\u5143\u6d4b\u8bd5\n\u2502   \u251c\u2500\u2500 conftest.py             # pytest \u914d\u7f6e\u548c Maya Mock\n\u2502   \u251c\u2500\u2500 test_tool_manager.py\n\u2502   \u251c\u2500\u2500 test_category_manager.py\n\u2502   \u251c\u2500\u2500 test_config_manager.py\n\u2502   \u2514\u2500\u2500 test_viewmodel.py\n\u2502\n\u2514\u2500\u2500 docs/                       # \u6587\u6863\n    \u251c\u2500\u2500 architecture.md         # \u67b6\u6784\u8bf4\u660e (\u672c\u6587\u6863)\n    \u2514\u2500\u2500 plugin_development.md   # \u63d2\u4ef6\u5f00\u53d1\u6307\u5357\n</code></pre>"},{"location":"architecture/#_4","title":"\u6838\u5fc3\u6a21\u5757\u8be6\u89e3","text":""},{"location":"architecture/#1-toolmanager","title":"1. ToolManager\uff08\u5de5\u5177\u7ba1\u7406\u5668\uff09","text":"<p>\u804c\u8d23\uff1a\u5de5\u5177\u7684\u6ce8\u518c\u3001\u6267\u884c\u3001\u641c\u7d22\u3001\u6536\u85cf\u548c\u6301\u4e45\u5316\u7ba1\u7406</p> <p>\u8bbe\u8ba1\u6a21\u5f0f\uff1a\u5355\u4f8b\u6a21\u5f0f</p> <pre><code>from floating_toolbox.core.tool_manager import ToolManager\n\nmanager = ToolManager()  # \u603b\u662f\u8fd4\u56de\u540c\u4e00\u5b9e\u4f8b\n</code></pre> <p>\u6838\u5fc3 API\uff1a</p> \u65b9\u6cd5 \u8bf4\u660e <code>register_tool(tool_id, name, category, callback, ...)</code> \u6ce8\u518c\u5de5\u5177 <code>get_tool(tool_id) -&gt; Tool</code> \u83b7\u53d6\u5de5\u5177\u5b9e\u4f8b <code>get_all_tools() -&gt; List[Tool]</code> \u83b7\u53d6\u6240\u6709\u5de5\u5177 <code>get_tools_by_category(category) -&gt; List[Tool]</code> \u6309\u5206\u7c7b\u83b7\u53d6\u5de5\u5177 <code>get_categories() -&gt; List[str]</code> \u83b7\u53d6\u6240\u6709\u5206\u7c7b\u540d <code>search_tools(query) -&gt; List[Tool]</code> \u641c\u7d22\u5de5\u5177 <code>toggle_favorite(tool_id)</code> \u5207\u6362\u6536\u85cf\u72b6\u6001 <code>toggle_pin(tool_id, category)</code> \u5207\u6362\u7f6e\u9876\u72b6\u6001 <code>get_favorite_tools() -&gt; List[Tool]</code> \u83b7\u53d6\u6536\u85cf\u7684\u5de5\u5177 <code>get_recent_tools(limit) -&gt; List[Tool]</code> \u83b7\u53d6\u6700\u8fd1\u4f7f\u7528 <code>save_config()</code> \u4fdd\u5b58\u914d\u7f6e\uff08\u8282\u6d41\u7248\u672c\uff09 <code>save_config_immediate()</code> \u7acb\u5373\u4fdd\u5b58\uff08\u5173\u952e\u64cd\u4f5c\u65f6\uff09 <code>load_plugins()</code> \u52a0\u8f7d\u6240\u6709\u63d2\u4ef6 <code>reload_plugins()</code> \u70ed\u91cd\u8f7d\u63d2\u4ef6 <p>Tool \u7c7b\u5c5e\u6027\uff1a</p> <pre><code>class Tool:\n    id: str              # \u552f\u4e00\u6807\u8bc6\u7b26\n    name: str            # \u663e\u793a\u540d\u79f0\n    category: str        # \u6240\u5c5e\u5206\u7c7b\n    subcategory: str     # \u5b50\u5206\u7c7b\uff08\u53ef\u9009\uff09\n    callback: Callable   # \u6267\u884c\u56de\u8c03\n    icon: str            # \u56fe\u6807\u8def\u5f84\n    description: str     # \u63cf\u8ff0\u6587\u672c\n    is_favorite: bool    # \u662f\u5426\u6536\u85cf\n    pinned_categories: List[str]  # \u5728\u54ea\u4e9b\u5206\u7c7b\u7f6e\u9876\n    use_count: int       # \u4f7f\u7528\u6b21\u6570\n    last_used: str       # \u6700\u540e\u4f7f\u7528\u65f6\u95f4 (ISO\u683c\u5f0f)\n    is_user_tool: bool   # \u662f\u5426\u4e3a\u7528\u6237\u521b\u5efa\n    code: str            # \u7528\u6237\u5de5\u5177\u4ee3\u7801\n    language: str        # \u4ee3\u7801\u8bed\u8a00 (Python/MEL)\n</code></pre>"},{"location":"architecture/#2-categorymanager","title":"2. CategoryManager\uff08\u5206\u7c7b\u7ba1\u7406\u5668\uff09","text":"<p>\u804c\u8d23\uff1a\u5206\u7c7b\u7684 CRUD\u3001\u6392\u5e8f\u3001\u6298\u53e0\u72b6\u6001\u548c\u56fe\u6807\u7ba1\u7406</p> <p>\u8bbe\u8ba1\u6a21\u5f0f\uff1a\u5355\u4f8b\u6a21\u5f0f</p> <p>\u6838\u5fc3 API\uff1a</p> \u65b9\u6cd5 \u8bf4\u660e <code>add_category(name, icon, order)</code> \u6dfb\u52a0\u5206\u7c7b <code>get_category(name) -&gt; Category</code> \u83b7\u53d6\u5206\u7c7b <code>get_all_categories() -&gt; List[Category]</code> \u83b7\u53d6\u6240\u6709\u5206\u7c7b\uff08\u6309\u987a\u5e8f\uff09 <code>get_category_names() -&gt; List[str]</code> \u83b7\u53d6\u5206\u7c7b\u540d\u5217\u8868 <code>rename_category(old, new) -&gt; bool</code> \u91cd\u547d\u540d\u5206\u7c7b <code>remove_category(name) -&gt; List[str]</code> \u5220\u9664\u5206\u7c7b\uff0c\u8fd4\u56de\u5de5\u5177ID\u5217\u8868 <code>set_category_icon(name, icon)</code> \u8bbe\u7f6e\u56fe\u6807 <code>get_category_icon(name) -&gt; str</code> \u83b7\u53d6\u56fe\u6807\u8def\u5f84 <code>set_category_order(order: List[str])</code> \u8bbe\u7f6e\u5206\u7c7b\u987a\u5e8f <code>toggle_collapse(name) -&gt; bool</code> \u5207\u6362\u6298\u53e0\u72b6\u6001 <code>is_collapsed(name) -&gt; bool</code> \u68c0\u67e5\u662f\u5426\u6298\u53e0 <code>get_tool_order(category) -&gt; List[str]</code> \u83b7\u53d6\u5de5\u5177\u6392\u5e8f <code>set_tool_order(category, order)</code> \u8bbe\u7f6e\u5de5\u5177\u6392\u5e8f <code>get_subcategory_order(category) -&gt; List[str]</code> \u83b7\u53d6\u5b50\u5206\u7c7b\u6392\u5e8f <code>set_subcategory_order(category, order)</code> \u8bbe\u7f6e\u5b50\u5206\u7c7b\u6392\u5e8f <p>Category \u6570\u636e\u7c7b\uff1a</p> <pre><code>@dataclass\nclass Category:\n    name: str           # \u5206\u7c7b\u540d\u79f0\n    icon: str = \"\"      # \u56fe\u6807\u8def\u5f84\n    order: int = 0      # \u6392\u5e8f\u6743\u91cd\n    is_collapsed: bool = False  # \u6298\u53e0\u72b6\u6001\n</code></pre> <p>\u8282\u6d41\u4fdd\u5b58\u673a\u5236\uff1a</p> <pre><code># 500ms \u5185\u7684\u591a\u6b21\u8c03\u7528\u53ea\u6267\u884c\u4e00\u6b21\u78c1\u76d8\u5199\u5165\ncategory_manager.set_collapsed(\"Animation\", True)  # \u89e6\u53d1\u8282\u6d41\u4fdd\u5b58\ncategory_manager.set_category_icon(\"Animation\", \"anim.svg\")  # \u5408\u5e76\u5230\u540c\u4e00\u6b21\u4fdd\u5b58\n</code></pre>"},{"location":"architecture/#3-configmanager","title":"3. ConfigManager\uff08\u914d\u7f6e\u7ba1\u7406\u5668\uff09","text":"<p>\u804c\u8d23\uff1aJSON \u914d\u7f6e\u6587\u4ef6\u7684\u8bfb\u5199</p> <p>\u6838\u5fc3 API\uff1a</p> \u65b9\u6cd5 \u8bf4\u660e <code>load_config() -&gt; dict</code> \u52a0\u8f7d\u4e3b\u914d\u7f6e <code>save_config(data: dict)</code> \u4fdd\u5b58\u4e3b\u914d\u7f6e <code>load_user_tools() -&gt; dict</code> \u52a0\u8f7d\u7528\u6237\u5de5\u5177 <code>save_user_tools(data: dict)</code> \u4fdd\u5b58\u7528\u6237\u5de5\u5177 <code>delete_user_tool(tool_id)</code> \u5220\u9664\u7528\u6237\u5de5\u5177 <p>\u914d\u7f6e\u6587\u4ef6\u7ed3\u6784\uff1a</p> <pre><code>// toolbox_config.json\n{\n  \"last_category\": \"Animation\",\n  \"tools\": {\n    \"tool_id\": {\n      \"is_favorite\": true,\n      \"pinned_categories\": [\"Animation\"],\n      \"use_count\": 42,\n      \"last_used\": \"2025-12-13T12:00:00\"\n    }\n  }\n}\n\n// categories.json\n{\n  \"categories\": {\n    \"Animation\": {\"icon\": \"anim.svg\", \"order\": 0, \"is_collapsed\": false}\n  },\n  \"tool_orders\": {\"Animation\": [\"tool_1\", \"tool_2\"]},\n  \"subcategory_orders\": {\"Animation\": [\"IK\", \"FK\"]}\n}\n\n// user_tools.json\n{\n  \"user_tool_abc123\": {\n    \"id\": \"user_tool_abc123\",\n    \"name\": \"\u6211\u7684\u5de5\u5177\",\n    \"category\": \"Custom\",\n    \"code\": \"print('Hello')\",\n    \"language\": \"Python\"\n  }\n}\n</code></pre>"},{"location":"architecture/#4-toolboxviewmodel","title":"4. ToolboxViewModel\uff08\u89c6\u56fe\u6a21\u578b\uff09","text":"<p>\u804c\u8d23\uff1a\u8fde\u63a5 View \u548c Model\uff0c\u5904\u7406\u4e1a\u52a1\u903b\u8f91</p> <p>\u8bbe\u8ba1\u6a21\u5f0f\uff1aMVVM \u4e2d\u7684 ViewModel</p> <p>\u6838\u5fc3\u4fe1\u53f7\uff1a</p> \u4fe1\u53f7 \u89e6\u53d1\u65f6\u673a <code>tools_changed</code> \u5de5\u5177\u5217\u8868\u53d8\u66f4 <code>favorites_changed</code> \u6536\u85cf\u72b6\u6001\u53d8\u66f4 <code>recent_tools_changed</code> \u6700\u8fd1\u4f7f\u7528\u53d8\u66f4 <code>search_results_changed(query)</code> \u641c\u7d22\u7ed3\u679c\u53d8\u66f4 <code>categories_changed</code> \u5206\u7c7b\u53d8\u66f4 <p>\u6838\u5fc3\u65b9\u6cd5\uff1a</p> <pre><code># \u83b7\u53d6\u6570\u636e\nviewmodel.all_tools          # \u6240\u6709\u5de5\u5177\nviewmodel.categories         # \u6240\u6709\u5206\u7c7b\nviewmodel.favorite_tools     # \u6536\u85cf\u7684\u5de5\u5177\n\n# \u7528\u6237\u64cd\u4f5c\nviewmodel.execute_tool(tool_id)       # \u6267\u884c\u5de5\u5177\uff08\u5e26 Undo \u652f\u6301\uff09\nviewmodel.toggle_favorite(tool_id)    # \u5207\u6362\u6536\u85cf\nviewmodel.toggle_pin(tool_id, cat)    # \u5207\u6362\u7f6e\u9876\nviewmodel.search(query)               # \u641c\u7d22\n\n# \u4f4d\u7f6e\u7ba1\u7406\nviewmodel.get_position() -&gt; (x, y)    # \u83b7\u53d6\u9762\u677f\u4f4d\u7f6e\nviewmodel.set_position(x, y)          # \u4fdd\u5b58\u9762\u677f\u4f4d\u7f6e\n</code></pre>"},{"location":"architecture/#ui","title":"UI \u7ec4\u4ef6\u8be6\u89e3","text":""},{"location":"architecture/#floatingball","title":"FloatingBall\uff08\u72b6\u6001\u7ba1\u7406\u5668\uff09","text":"<p>\u804c\u8d23\uff1a\u7ba1\u7406\u4e09\u4e2a\u9762\u677f\u7684\u751f\u547d\u5468\u671f\u548c\u5207\u6362</p> <pre><code>class FloatingBall(QWidget):\n    def __init__(self):\n        self.viewmodel = ToolboxViewModel()  # \u521b\u5efa ViewModel\n        self.idle_panel = IdlePanel(self.viewmodel)\n        self.quick_panel = QuickPanel(self.viewmodel)\n        self.full_panel = FullPanel(self.viewmodel)\n</code></pre> <p>\u72b6\u6001\u5207\u6362\uff1a</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   hover   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  double-click  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  IdlePanel   \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6 \u2502  QuickPanel  \u2502 \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25b6 \u2502  FullPanel   \u2502\n\u2502   \u60ac\u6d6e\u7403     \u2502           \u2502   \u5feb\u6377\u9762\u677f   \u2502                \u2502   \u5b8c\u6574\u9762\u677f   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u25b2                          \u2502                               \u2502\n       \u2502      leave (300ms)       \u2502       double-click            \u2502\n       \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/#tooltreemodel","title":"ToolTreeModel\uff08\u5de5\u5177\u6811\u6a21\u578b\uff09","text":"<p>\u804c\u8d23\uff1a\u4e3a QTreeView \u63d0\u4f9b\u5c42\u7ea7\u6570\u636e</p> <p>\u7ed3\u6784\uff1a</p> <pre><code>Root\n\u251c\u2500\u2500 \u6536\u85cf (Category)\n\u2502   \u251c\u2500\u2500 \u5de5\u5177A (Tool)\n\u2502   \u2514\u2500\u2500 \u5de5\u5177B (Tool)\n\u251c\u2500\u2500 \u5efa\u6a21 (Category)\n\u2502   \u251c\u2500\u2500 \u57fa\u7840 (Subcategory)\n\u2502   \u2502   \u251c\u2500\u2500 \u521b\u5efa\u7acb\u65b9\u4f53 (Tool)\n\u2502   \u2502   \u2514\u2500\u2500 \u521b\u5efa\u7403\u4f53 (Tool)\n\u2502   \u2514\u2500\u2500 \u53d8\u5f62 (Subcategory)\n\u2502       \u2514\u2500\u2500 \u5e73\u6ed1\u7f51\u683c (Tool)\n\u2514\u2500\u2500 \u52a8\u753b (Category)\n    \u2514\u2500\u2500 \u8bbe\u7f6e\u5173\u952e\u5e27 (Tool)\n</code></pre> <p>\u6a21\u5757\u62c6\u5206\uff1a</p> \u6587\u4ef6 \u804c\u8d23 <code>tool_model.py</code> \u4e3b\u6a21\u578b\uff0c\u7ee7\u627f QAbstractItemModel <code>tool_tree_data.py</code> <code>ToolTreeDataBuilder</code> - \u6811\u7ed3\u6784\u6784\u5efa <code>tool_tree_dnd.py</code> <code>ToolTreeDragDropHandler</code> - \u62d6\u62fd\u5904\u7406 <p>\u62d6\u62fd\u6392\u5e8f\u652f\u6301\uff1a</p> <ul> <li>\u5206\u7c7b\u62d6\u62fd\uff1a\u8c03\u6574\u5206\u7c7b\u987a\u5e8f</li> <li>\u5b50\u5206\u7c7b\u62d6\u62fd\uff1a\u540c\u4e00\u5206\u7c7b\u5185\u8c03\u6574\u987a\u5e8f</li> <li>\u5de5\u5177\u62d6\u62fd\uff1a\u540c\u4e00\u5206\u7c7b/\u5b50\u5206\u7c7b\u5185\u8c03\u6574\u987a\u5e8f</li> </ul>"},{"location":"architecture/#_5","title":"\u6570\u636e\u6d41","text":""},{"location":"architecture/#_6","title":"\u5de5\u5177\u6267\u884c\u6d41\u7a0b","text":"<pre><code>\u7528\u6237\u70b9\u51fb\u5de5\u5177\n       \u2502\n       \u25bc\nFullPanel._on_item_clicked()\n       \u2502\n       \u25bc\nToolTreeModel.data(IdRole) \u2500\u2500\u83b7\u53d6 tool_id\n       \u2502\n       \u25bc\nViewModel.execute_tool(tool_id)\n       \u2502\n       \u251c\u2500 cmds.undoInfo(openChunk=True)\n       \u2502\n       \u25bc\nTool.execute()\n       \u2502\n       \u251c\u2500 callback()  \u2500\u2500\u6267\u884c\u5b9e\u9645\u64cd\u4f5c\n       \u251c\u2500 use_count++\n       \u251c\u2500 last_used = now()\n       \u2502\n       \u25bc\n       \u2502\n       \u251c\u2500 cmds.undoInfo(closeChunk=True)\n       \u2502\n       \u25bc\nToolManager.save_config()  \u2500\u2500\u8282\u6d41\u4fdd\u5b58\n       \u2502\n       \u25bc\nViewModel.recent_tools_changed.emit()\n       \u2502\n       \u25bc\nQuickPanel \u66f4\u65b0\u6700\u8fd1\u4f7f\u7528\u5217\u8868\n</code></pre>"},{"location":"architecture/#_7","title":"\u6536\u85cf\u5207\u6362\u6d41\u7a0b","text":"<pre><code>\u7528\u6237\u70b9\u51fb\u6536\u85cf\u6309\u94ae\n       \u2502\n       \u25bc\nToolItemDelegate.editorEvent()\n       \u2502\n       \u25bc\ndelegate.favorite_clicked.emit(tool_id)\n       \u2502\n       \u25bc\nViewModel.toggle_favorite(tool_id)\n       \u2502\n       \u251c\u2500 ToolManager.toggle_favorite(tool_id)\n       \u2502      \u2514\u2500 tool.is_favorite = !tool.is_favorite\n       \u2502      \u2514\u2500 save_config()  \u2500\u2500\u8282\u6d41\u4fdd\u5b58\n       \u2502\n       \u25bc\nViewModel.favorites_changed.emit()\n       \u2502\n       \u251c\u2500 QuickPanel._refresh_favorites()\n       \u2514\u2500 FullPanel._rebuild_tools_preserve_state()\n</code></pre>"},{"location":"architecture/#_8","title":"\u5206\u7c7b\u6298\u53e0\u6d41\u7a0b","text":"<pre><code>\u7528\u6237\u70b9\u51fb\u5206\u7c7b\u884c\n       \u2502\n       \u25bc\nFullPanel._on_item_clicked()\n       \u2502\n       \u251c\u2500 tree_view.setExpanded(index, new_state)\n       \u2502\n       \u25bc\nConfig.toggle_category_collapse(category)\n       \u2502\n       \u25bc\nCategoryManager._save_config()  \u2500\u2500\u8282\u6d41\u4fdd\u5b58\n</code></pre>"},{"location":"architecture/#_9","title":"\u8bbe\u8ba1\u51b3\u7b56","text":""},{"location":"architecture/#mvvm","title":"\u4e3a\u4ec0\u4e48\u4f7f\u7528 MVVM\uff1f","text":"\u4f18\u52bf \u8bf4\u660e \u53ef\u6d4b\u8bd5\u6027 ViewModel \u548c Model \u53ef\u8131\u79bb Qt \u72ec\u7acb\u6d4b\u8bd5 \u53ef\u7ef4\u62a4\u6027 UI \u53d8\u66f4\u4e0d\u5f71\u54cd\u4e1a\u52a1\u903b\u8f91 \u53ef\u6269\u5c55\u6027 \u65b0\u589e\u9762\u677f\u53ea\u9700\u6ce8\u5165 ViewModel \u677e\u8026\u5408 \u901a\u8fc7\u4fe1\u53f7\u901a\u4fe1\uff0c\u51cf\u5c11\u76f4\u63a5\u4f9d\u8d56"},{"location":"architecture/#_10","title":"\u4e3a\u4ec0\u4e48\u4f7f\u7528\u5355\u4f8b\u6a21\u5f0f\uff1f","text":"\u7c7b \u539f\u56e0 <code>ToolManager</code> \u786e\u4fdd\u5168\u5c40\u53ea\u6709\u4e00\u4e2a\u5de5\u5177\u6ce8\u518c\u8868 <code>CategoryManager</code> \u7edf\u4e00\u7ba1\u7406\u5206\u7c7b\u72b6\u6001 <code>ConfigManager</code> \u907f\u514d\u91cd\u590d\u6587\u4ef6 I/O"},{"location":"architecture/#_11","title":"\u4e3a\u4ec0\u4e48\u4f7f\u7528\u8282\u6d41\u4fdd\u5b58\uff1f","text":"<p>\u95ee\u9898\uff1a\u7528\u6237\u5feb\u901f\u8fde\u7eed\u64cd\u4f5c\uff08\u5982\u6279\u91cf\u6298\u53e0\u5206\u7c7b\uff09\u4f1a\u89e6\u53d1\u5927\u91cf\u78c1\u76d8\u5199\u5165</p> <p>\u65b9\u6848\uff1a500ms \u5ef6\u8fdf + \u5408\u5e76\u5199\u5165</p> <pre><code>def _save_config(self):\n    if self._pending_save:\n        return  # \u5df2\u6709\u5f85\u4fdd\u5b58\u4efb\u52a1\n    self._pending_save = True\n    QTimer.singleShot(500, self._do_save_config)\n</code></pre>"},{"location":"architecture/#_12","title":"\u6269\u5c55\u6307\u5357","text":""},{"location":"architecture/#ui_1","title":"\u6dfb\u52a0\u65b0\u7684 UI \u9762\u677f","text":"<ol> <li>\u7ee7\u627f BasePanel</li> </ol> <pre><code>from floating_toolbox.ui.base_panel import BasePanel\n\nclass MyPanel(BasePanel):\n    def __init__(self, viewmodel, parent=None):\n        super().__init__(viewmodel, parent)\n        self._setup_ui()\n        self._connect_signals()\n</code></pre> <ol> <li>\u5728 FloatingBall \u6ce8\u518c</li> </ol> <pre><code># floating_ball.py\nself.my_panel = MyPanel(self.viewmodel, maya_main)\n</code></pre> <ol> <li>\u6dfb\u52a0\u5207\u6362\u903b\u8f91</li> </ol> <pre><code>def _show_my_panel(self):\n    # \u9690\u85cf\u5176\u4ed6\u9762\u677f\n    # \u663e\u793a my_panel\n    pass\n</code></pre>"},{"location":"architecture/#_13","title":"\u6dfb\u52a0\u65b0\u7684\u5de5\u5177\u5c5e\u6027","text":"<ol> <li>\u4fee\u6539 Tool \u7c7b</li> </ol> <pre><code># tool_manager.py\nclass Tool:\n    def __init__(self, ..., priority: int = 0):\n        self.priority = priority\n\n    def to_dict(self):\n        data = {...}\n        data[\"priority\"] = self.priority\n        return data\n</code></pre> <ol> <li>\u4fee\u6539\u6ce8\u518c\u65b9\u6cd5</li> </ol> <pre><code>def register_tool(self, ..., priority: int = 0):\n    tool = Tool(..., priority=priority)\n</code></pre> <ol> <li>\u4fee\u6539\u52a0\u8f7d\u903b\u8f91</li> </ol> <pre><code>def _register_user_tool_from_data(self, data):\n    tool.priority = data.get(\"priority\", 0)\n</code></pre> <ol> <li>\u66f4\u65b0 UI\uff08\u5982\u9700\u8981\uff09</li> </ol>"},{"location":"architecture/#_14","title":"\u6dfb\u52a0\u65b0\u7684\u914d\u7f6e\u9879","text":"<ol> <li>\u5728 ConfigManager \u6dfb\u52a0\u65b9\u6cd5</li> </ol> <pre><code>def get_my_setting(self) -&gt; str:\n    config = self.load_config()\n    return config.get(\"my_setting\", \"default\")\n\ndef set_my_setting(self, value: str):\n    config = self.load_config()\n    config[\"my_setting\"] = value\n    self.save_config(config)\n</code></pre> <ol> <li>\u5728 ViewModel \u66b4\u9732</li> </ol> <pre><code>@property\ndef my_setting(self):\n    return self._config.get_my_setting()\n</code></pre> <ol> <li>\u5728 UI \u7ed1\u5b9a</li> </ol> <pre><code># full_panel.py\nself.my_checkbox.setChecked(self.viewmodel.my_setting)\n</code></pre>"},{"location":"architecture/#_15","title":"\u6d4b\u8bd5","text":""},{"location":"architecture/#_16","title":"\u8fd0\u884c\u6d4b\u8bd5","text":"<pre><code>cd floating_toolbox\npython -m pytest tests/ -v\n</code></pre>"},{"location":"architecture/#maya-mock","title":"Maya Mock","text":"<p>\u6d4b\u8bd5\u4f7f\u7528 Mock \u6a21\u5757\u66ff\u4ee3\u771f\u5b9e\u7684 Maya \u73af\u5883\uff1a</p> <pre><code># conftest.py\nclass MockMayaCmds:\n    @staticmethod\n    def polyCube(name=\"pCube1\", **kwargs):\n        return [name, f\"{name}Shape\"]\n</code></pre>"},{"location":"architecture/#_17","title":"\u6d4b\u8bd5\u8986\u76d6","text":"\u6d4b\u8bd5\u6587\u4ef6 \u8986\u76d6\u6a21\u5757 <code>test_tool_manager.py</code> \u5de5\u5177 CRUD\u3001\u6536\u85cf\u3001\u641c\u7d22 <code>test_category_manager.py</code> \u5206\u7c7b CRUD\u3001\u6392\u5e8f\u3001\u6298\u53e0 <code>test_config_manager.py</code> \u914d\u7f6e\u8bfb\u5199\u3001\u6301\u4e45\u5316 <code>test_viewmodel.py</code> \u4e1a\u52a1\u903b\u8f91\u3001\u4fe1\u53f7\u53d1\u5c04"},{"location":"architecture/#_18","title":"\u7248\u672c\u5386\u53f2","text":"\u7248\u672c \u65e5\u671f \u4e3b\u8981\u53d8\u66f4 1.0 2024-12 \u521d\u59cb\u67b6\u6784 1.1 2025-12 \u6dfb\u52a0\u8282\u6d41\u4fdd\u5b58\u673a\u5236 1.2 2025-12 ToolTreeModel \u6a21\u5757\u62c6\u5206"},{"location":"faq/","title":"\u5e38\u89c1\u95ee\u9898 (FAQ)","text":"<p>\u672c\u9875\u9762\u8bb0\u5f55\u4e86\u5728\u4f7f\u7528 Maya Floating Toolbox \u8fc7\u7a0b\u4e2d\u53ef\u80fd\u9047\u5230\u7684\u5e38\u89c1\u95ee\u9898\u3002</p>"},{"location":"faq/#1","title":"1. \u5de5\u5177\u9762\u677f\u65e0\u6cd5\u663e\u793a\uff1f","text":"<ul> <li>\u8bf7\u68c0\u67e5\u662f\u5426\u5b89\u88c5\u4e86 <code>Qt.py</code>\u3002</li> <li>\u786e\u8ba4 <code>.mod</code> \u6587\u4ef6\u4e2d\u7684\u8def\u5f84\u662f\u5426\u6b63\u786e\u3002</li> </ul>"},{"location":"faq/#2","title":"2. \u6807\u8bb0\u83dc\u5355\u65e0\u6cd5\u547c\u51fa\uff1f","text":"<ul> <li>\u9ed8\u8ba4\u5feb\u6377\u952e\u662f <code>Ctrl + Alt + \u4e2d\u952e</code>\u3002</li> <li>\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa\u5e76\u201c\u4fdd\u5b58\u5e76\u6fc0\u6d3b\u201d\u4e86\u4e00\u4e2a\u6a21\u7248\u3002</li> </ul>"},{"location":"features/","title":"\u6838\u5fc3\u7279\u6027","text":"<p>\u63a2\u7d22 Maya Floating Toolbox \u7684\u6280\u672f\u4eae\u70b9\u3002</p>"},{"location":"features/#modern-ui","title":"\u73b0\u4ee3\u5316\u8bbe\u8ba1 (Modern UI)","text":"<ul> <li>Dracula \u4e3b\u9898\uff1a\u6df1\u8272\u8c03\u8bbe\u8ba1\uff0c\u6709\u6548\u7f13\u89e3\u89c6\u89c9\u75b2\u52b3\u3002</li> <li>\u6d41\u7545\u52a8\u753b\uff1a\u9762\u677f\u7684\u5f00\u542f\u3001\u5207\u6362\u548c\u5de5\u5177\u52a0\u8f7d\u5747\u4f34\u6709\u5e73\u6ed1\u7684\u8fc7\u5ea6\u6548\u679c\u3002</li> <li>\u54cd\u5e94\u5f0f\u5e03\u5c40\uff1a\u65e0\u8bba\u662f\u505c\u9760\u8fd8\u662f\u6d6e\u52a8\uff0c\u754c\u9762\u5143\u7d20\u90fd\u80fd\u81ea\u52a8\u9002\u914d\u7a97\u53e3\u5927\u5c0f\u3002</li> </ul>"},{"location":"features/#smart-architecture","title":"\u667a\u80fd\u67b6\u6784 (Smart Architecture)","text":"<ul> <li>MVVM \u6a21\u5f0f\uff1a\u6a21\u578b (Model)\u3001\u89c6\u56fe (View) \u4e0e\u89c6\u56fe\u6a21\u578b (ViewModel) \u5f7b\u5e95\u89e3\u8026\uff0c\u786e\u4fdd\u903b\u8f91\u6e05\u6670\u4e14\u6613\u4e8e\u5355\u5143\u6d4b\u8bd5\u3002</li> <li>\u63d2\u4ef6\u5316\u52a0\u8f7d\uff1a\u6240\u6709\u7684\u5de5\u5177\u90fd\u662f\u52a8\u6001\u8f7d\u5165\u7684\uff0c\u652f\u6301\u5728\u4e0d\u91cd\u542f Maya \u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u4ee3\u7801\u70ed\u66f4\u65b0\u3002</li> </ul>"},{"location":"features/#advanced-marking-menu","title":"\u6807\u8bb0\u83dc\u5355\u7cfb\u7edf (Advanced Marking Menu)","text":"<ul> <li>\u591a\u6a21\u7248\u7ba1\u7406\uff1a\u652f\u6301\u521b\u5efa\u65e0\u6570\u5957\u6807\u8bb0\u83dc\u5355\u65b9\u6848\uff0c\u5e76\u5b9e\u73b0\u4e00\u952e\u5feb\u901f\u5207\u6362\u3002</li> <li>XML \u6301\u4e45\u5316\uff1a\u914d\u7f6e\u4fe1\u606f\u4ee5\u6807\u51c6 XML \u683c\u5f0f\u5b58\u50a8\uff0c\u65b9\u4fbf\u5728\u56e2\u961f\u95f4\u540c\u6b65\u3002</li> </ul>"},{"location":"features/#extensibility","title":"\u6269\u5c55\u6027 (Extensibility)","text":"<ul> <li>\u81ea\u5b9a\u4e49\u56fe\u6807\uff1a\u96c6\u6210\u4e30\u5bcc\u7684\u56fe\u6807\u5e93\uff0c\u5e76\u652f\u6301\u7528\u6237\u81ea\u5b9a\u4e49 PNG \u56fe\u6807\u3002</li> <li>\u53cc\u8bed\u652f\u6301\uff1a\u5185\u6838\u652f\u6301\u591a\u8bed\u8a00\u6269\u5c55\uff0c\u65b9\u4fbf\u5168\u7403\u5316\u56e2\u961f\u4f7f\u7528\u3002</li> </ul>"},{"location":"installation/","title":"\u5b89\u88c5\u6307\u5357","text":"<p>\u672c\u7ae0\u8282\u5c06\u5f15\u5bfc\u60a8\u5b8c\u6210 Maya Floating Toolbox \u7684\u5b89\u88c5\u3002</p>"},{"location":"installation/#_2","title":"\u73af\u5883\u8981\u6c42","text":"<ul> <li>Maya \u7248\u672c\uff1aMaya 2023+ (\u63a8\u8350 Maya 2026)</li> <li>Python \u7248\u672c\uff1aPython 3.9+</li> <li>\u4f9d\u8d56\u5e93\uff1a<code>Qt.py</code></li> </ul>"},{"location":"installation/#_3","title":"\u5b89\u88c5\u6b65\u9aa4","text":""},{"location":"installation/#1","title":"1. \u4e0b\u8f7d\u5de5\u5177","text":"<p>\u5c06\u9879\u76ee\u4ee3\u7801\u514b\u9686\u6216\u4e0b\u8f7d\u5230\u60a8\u7684\u672c\u5730\u76ee\u5f55\u3002</p>"},{"location":"installation/#2-maya","title":"2. \u914d\u7f6e Maya \u6a21\u5757","text":"<p>\u5728\u60a8\u7684 Maya \u811a\u672c\u76ee\u5f55\uff08\u4f8b\u5982 <code>Documents/maya/2026/modules</code>\uff09\u4e2d\u521b\u5efa\u4e00\u4e2a <code>.mod</code> \u6587\u4ef6\uff0c\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>+ MayaFloatingToolbox 1.0 &lt;\u60a8\u7684\u4ee3\u7801\u8def\u5f84&gt;\nscripts: .\n</code></pre>"},{"location":"installation/#3","title":"3. \u5b89\u88c5\u4f9d\u8d56","text":"<p>\u786e\u4fdd\u60a8\u7684 Maya Python \u73af\u5883\u5b89\u88c5\u4e86\u5fc5\u8981\u7684\u5305\uff1a</p> <pre><code>mayapy -m pip install Qt.py\n</code></pre>"},{"location":"installation/#4","title":"4. \u542f\u52a8\u5de5\u5177","text":"<p>\u5728 Maya \u811a\u672c\u7f16\u8f91\u5668\u4e2d\u8fd0\u884c\u4ee5\u4e0b Python \u4ee3\u7801\uff1a</p> <pre><code>from floating_toolbox import main\nmain.show()\n</code></pre>"},{"location":"plugin_development/","title":"\u63d2\u4ef6\u5f00\u53d1\u6307\u5357","text":"<p>\u672c\u6307\u5357\u8be6\u7ec6\u4ecb\u7ecd\u5982\u4f55\u4e3a Maya \u60ac\u6d6e\u5de5\u5177\u76d2\u5f00\u53d1\u81ea\u5b9a\u4e49\u63d2\u4ef6\u3002</p>"},{"location":"plugin_development/#_2","title":"\u6982\u8ff0","text":"<p>\u5de5\u5177\u76d2\u7684\u63d2\u4ef6\u7cfb\u7edf\u5141\u8bb8\u4f60\uff1a - \u6dfb\u52a0\u81ea\u5b9a\u4e49\u5de5\u5177\u5230\u5de5\u5177\u76d2 - \u7ec4\u7ec7\u5de5\u5177\u5230\u5206\u7c7b\u548c\u5b50\u5206\u7c7b - \u4e3a\u5de5\u5177\u8bbe\u7f6e\u56fe\u6807\u548c\u63cf\u8ff0 - \u4f7f\u7528 Maya API \u548c Python \u6807\u51c6\u5e93</p>"},{"location":"plugin_development/#_3","title":"\u5feb\u901f\u5165\u95e8","text":""},{"location":"plugin_development/#1","title":"1. \u521b\u5efa\u63d2\u4ef6\u6587\u4ef6","text":"<p>\u5728 <code>floating_toolbox/plugins/</code> \u76ee\u5f55\u4e0b\u521b\u5efa Python \u6587\u4ef6\uff1a</p> <pre><code>floating_toolbox/\n\u2514\u2500\u2500 plugins/\n    \u251c\u2500\u2500 default_tools.py      # \u5185\u7f6e\u5de5\u5177\n    \u251c\u2500\u2500 my_modeling_tools.py  # \u4f60\u7684\u65b0\u63d2\u4ef6\n    \u2514\u2500\u2500 rigging_kit.py        # \u53e6\u4e00\u4e2a\u63d2\u4ef6\n</code></pre>"},{"location":"plugin_development/#2","title":"2. \u7f16\u5199\u57fa\u672c\u63d2\u4ef6","text":"<pre><code>\"\"\"\n\u6211\u7684\u5efa\u6a21\u5de5\u5177\u96c6\u63d2\u4ef6\n\u5305\u542b\u5e38\u7528\u7684\u591a\u8fb9\u5f62\u5efa\u6a21\u5de5\u5177\n\"\"\"\nimport maya.cmds as cmds\n\n\ndef register_plugin(manager):\n    \"\"\"\n    \u6ce8\u518c\u63d2\u4ef6\u5de5\u5177\n\n    \u8fd9\u662f\u63d2\u4ef6\u7684\u5165\u53e3\u51fd\u6570\uff0c\u5de5\u5177\u76d2\u542f\u52a8\u65f6\u4f1a\u81ea\u52a8\u8c03\u7528\u6b64\u51fd\u6570\u3002\n\n    Args:\n        manager (ToolManager): \u5de5\u5177\u7ba1\u7406\u5668\u5b9e\u4f8b\n    \"\"\"\n\n    manager.register_tool(\n        tool_id=\"mytools_quick_cube\",    # \u552f\u4e00\u6807\u8bc6\u7b26\n        name=\"\u5feb\u901f\u521b\u5efa\u7acb\u65b9\u4f53\",             # \u663e\u793a\u540d\u79f0\n        category=\"\u5efa\u6a21\",                  # \u5206\u7c7b\n        callback=create_quick_cube,       # \u56de\u8c03\u51fd\u6570\n        description=\"\u5728\u539f\u70b9\u521b\u5efa\u4e00\u4e2a 1x1x1 \u7684\u7acb\u65b9\u4f53\"\n    )\n\n\ndef create_quick_cube():\n    \"\"\"\u521b\u5efa\u7acb\u65b9\u4f53\"\"\"\n    result = cmds.polyCube(\n        width=1, height=1, depth=1,\n        name=\"quickCube#\"\n    )\n    cmds.select(result[0])\n    print(f\"\u5df2\u521b\u5efa: {result[0]}\")\n    return result[0]\n</code></pre>"},{"location":"plugin_development/#3","title":"3. \u52a0\u8f7d\u63d2\u4ef6","text":"<p>\u65b9\u6cd51\uff1a\u91cd\u542f Maya \u5e76\u6253\u5f00\u5de5\u5177\u76d2</p> <p>\u65b9\u6cd52\uff1a\u4f7f\u7528\u70ed\u91cd\u8f7d\uff08\u63a8\u8350\u5f00\u53d1\u65f6\u4f7f\u7528\uff09 - \u53f3\u952e\u70b9\u51fb\u5de5\u5177\u76d2\u5934\u50cf - \u9009\u62e9\"\u91cd\u65b0\u52a0\u8f7d\u63d2\u4ef6\"</p>"},{"location":"plugin_development/#register_tool","title":"register_tool \u53c2\u6570\u8be6\u89e3","text":"<pre><code>manager.register_tool(\n    tool_id=\"unique_tool_id\",      # \u5fc5\u586b\uff1a\u552f\u4e00\u6807\u8bc6\u7b26\n    name=\"\u5de5\u5177\u540d\u79f0\",                # \u5fc5\u586b\uff1a\u663e\u793a\u540d\u79f0\n    category=\"\u5206\u7c7b\u540d\",              # \u5fc5\u586b\uff1a\u5de5\u5177\u5206\u7c7b\n    callback=my_function,           # \u5fc5\u586b\uff1a\u70b9\u51fb\u65f6\u6267\u884c\u7684\u51fd\u6570\n    description=\"\u5de5\u5177\u63cf\u8ff0\",         # \u53ef\u9009\uff1a\u641c\u7d22\u548c\u60ac\u505c\u63d0\u793a\n    icon=\"icon.svg\",               # \u53ef\u9009\uff1a\u56fe\u6807\u8def\u5f84\n    subcategory=\"\u5b50\u5206\u7c7b\"           # \u53ef\u9009\uff1a\u5b50\u5206\u7c7b\u540d\u79f0\n)\n</code></pre>"},{"location":"plugin_development/#_4","title":"\u53c2\u6570\u8bf4\u660e","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u586b \u8bf4\u660e <code>tool_id</code> <code>str</code> \u2705 \u552f\u4e00\u6807\u8bc6\u7b26\uff0c\u5efa\u8bae\u683c\u5f0f\uff1a<code>plugin_function</code>\uff0c\u5982 <code>rigging_mirror_joints</code> <code>name</code> <code>str</code> \u2705 \u5de5\u5177\u7684\u663e\u793a\u540d\u79f0\uff0c\u652f\u6301\u4e2d\u6587 <code>category</code> <code>str</code> \u2705 \u5de5\u5177\u5206\u7c7b\uff0c\u5982 \"\u5efa\u6a21\"\u3001\"\u7ed1\u5b9a\"\u3001\"\u52a8\u753b\" <code>callback</code> <code>Callable</code> \u2705 \u70b9\u51fb\u5de5\u5177\u65f6\u6267\u884c\u7684\u51fd\u6570\uff0c\u65e0\u53c2\u6570 <code>description</code> <code>str</code> \u274c \u5de5\u5177\u63cf\u8ff0\uff0c\u7528\u4e8e\u641c\u7d22\u5339\u914d\u548c\u9f20\u6807\u60ac\u505c\u63d0\u793a <code>icon</code> <code>str</code> \u274c \u56fe\u6807\u8def\u5f84\uff0c\u652f\u6301 SVG \u548c PNG <code>subcategory</code> <code>str</code> \u274c \u5b50\u5206\u7c7b\u540d\u79f0\uff0c\u7528\u4e8e\u5206\u7ec4\u5de5\u5177"},{"location":"plugin_development/#tool_id","title":"tool_id \u547d\u540d\u89c4\u8303","text":"\u683c\u5f0f \u793a\u4f8b \u8bf4\u660e <code>plugin_function</code> <code>rigging_mirror_joints</code> \u57fa\u672c\u683c\u5f0f <code>plugin_object_action</code> <code>anim_layer_create</code> \u5305\u542b\u5bf9\u8c61\u7c7b\u578b <code>prefix_feature_detail</code> <code>mytools_poly_smooth</code> \u5e26\u524d\u7f00\u907f\u514d\u51b2\u7a81 <p>\u91cd\u8981\uff1atool_id \u5fc5\u987b\u5168\u5c40\u552f\u4e00\uff0c\u91cd\u590d\u7684 ID \u4f1a\u8986\u76d6\u4e4b\u524d\u6ce8\u518c\u7684\u5de5\u5177\u3002</p>"},{"location":"plugin_development/#_5","title":"\u56fe\u6807\u89c4\u8303","text":""},{"location":"plugin_development/#_6","title":"\u652f\u6301\u683c\u5f0f","text":"\u683c\u5f0f \u63a8\u8350\u5ea6 \u8bf4\u660e SVG \u2b50\u2b50\u2b50 \u77e2\u91cf\u683c\u5f0f\uff0c\u652f\u6301\u4efb\u610f\u7f29\u653e\uff0c\u63a8\u8350 PNG \u2b50\u2b50 \u4f4d\u56fe\u683c\u5f0f\uff0c\u5efa\u8bae 32x32 \u6216 64x64"},{"location":"plugin_development/#_7","title":"\u8def\u5f84\u6307\u5b9a","text":"<pre><code># \u65b9\u5f0f1\uff1a\u4f7f\u7528\u5185\u7f6e\u56fe\u6807\uff08\u4f4d\u4e8e resources/icons/ \u76ee\u5f55\uff09\nicon=\"cube.svg\"\n\n# \u65b9\u5f0f2\uff1a\u76f8\u5bf9\u4e8e resources/ \u76ee\u5f55\nicon=\"icons/custom/my_icon.svg\"\n\n# \u65b9\u5f0f3\uff1a\u7edd\u5bf9\u8def\u5f84\nicon=r\"D:\\MyIcons\\tool_icon.svg\"\n\n# \u65b9\u5f0f4\uff1a\u4f7f\u7528 __file__ \u83b7\u53d6\u76f8\u5bf9\u8def\u5f84\nimport os\nPLUGIN_DIR = os.path.dirname(os.path.abspath(__file__))\nicon=os.path.join(PLUGIN_DIR, \"icons\", \"my_tool.svg\")\n</code></pre>"},{"location":"plugin_development/#_8","title":"\u8bbe\u8ba1\u5efa\u8bae","text":"<ul> <li>\u989c\u8272\uff1a\u5355\u8272\u6df1\u7070\u8272 (#6272a4) \u6216\u767d\u8272\u7ebf\u6761</li> <li>\u5c3a\u5bf8\uff1a24x24 \u6216 32x32 \u903b\u8f91\u50cf\u7d20</li> <li>\u98ce\u683c\uff1a\u7ebf\u6761\u56fe\u6807\uff0c\u4e0e Dracula \u4e3b\u9898\u534f\u8c03</li> <li>\u7c97\u7ec6\uff1a2px \u63cf\u8fb9\uff0c\u4fdd\u6301\u4e00\u81f4\u6027</li> </ul>"},{"location":"plugin_development/#_9","title":"\u5b50\u5206\u7c7b","text":"<p>\u5b50\u5206\u7c7b\u7528\u4e8e\u5728\u4e00\u4e2a\u5206\u7c7b\u4e0b\u8fdb\u4e00\u6b65\u7ec4\u7ec7\u5de5\u5177\uff1a</p> <pre><code>def register_plugin(manager):\n    \"\"\"\u6ce8\u518c\u5e26\u5b50\u5206\u7c7b\u7684\u5de5\u5177\"\"\"\n\n    # \u5b50\u5206\u7c7b\uff1a\u57fa\u7840\n    manager.register_tool(\n        tool_id=\"modeling_cube\",\n        name=\"\u521b\u5efa\u7acb\u65b9\u4f53\",\n        category=\"\u5efa\u6a21\",\n        subcategory=\"\u57fa\u7840\u51e0\u4f55\u4f53\",\n        callback=lambda: cmds.polyCube()\n    )\n\n    manager.register_tool(\n        tool_id=\"modeling_sphere\",\n        name=\"\u521b\u5efa\u7403\u4f53\",\n        category=\"\u5efa\u6a21\",\n        subcategory=\"\u57fa\u7840\u51e0\u4f55\u4f53\",\n        callback=lambda: cmds.polySphere()\n    )\n\n    # \u5b50\u5206\u7c7b\uff1a\u53d8\u5f62\n    manager.register_tool(\n        tool_id=\"modeling_smooth\",\n        name=\"\u5e73\u6ed1\u7f51\u683c\",\n        category=\"\u5efa\u6a21\",\n        subcategory=\"\u53d8\u5f62\u5de5\u5177\",\n        callback=smooth_mesh\n    )\n</code></pre> <p>\u6548\u679c\uff1a</p> <pre><code>\u5efa\u6a21\n\u251c\u2500\u2500 \u57fa\u7840\u51e0\u4f55\u4f53\n\u2502   \u251c\u2500\u2500 \u521b\u5efa\u7acb\u65b9\u4f53\n\u2502   \u2514\u2500\u2500 \u521b\u5efa\u7403\u4f53\n\u251c\u2500\u2500 \u53d8\u5f62\u5de5\u5177\n\u2502   \u2514\u2500\u2500 \u5e73\u6ed1\u7f51\u683c\n\u2514\u2500\u2500 \u5176\u4ed6\u5de5\u5177\uff08\u65e0\u5b50\u5206\u7c7b\u7684\uff09\n</code></pre>"},{"location":"plugin_development/#_10","title":"\u5b8c\u6574\u793a\u4f8b\uff1a\u7ed1\u5b9a\u5de5\u5177\u96c6","text":"<pre><code>\"\"\"\nRigging Kit - \u7ed1\u5b9a\u5de5\u5177\u96c6\u63d2\u4ef6\n\n\u63d0\u4f9b\u4e00\u5957\u5b8c\u6574\u7684\u89d2\u8272\u7ed1\u5b9a\u5de5\u5177\uff0c\u5305\u62ec\uff1a\n- \u9aa8\u9abc\u521b\u5efa\u548c\u7f16\u8f91\n- \u63a7\u5236\u5668\u751f\u6210\n- \u8499\u76ae\u5de5\u5177\n- \u7ea6\u675f\u5de5\u5177\n\n\u4f5c\u8005: Your Name\n\u7248\u672c: 1.0.0\n\"\"\"\nimport maya.cmds as cmds\nimport maya.mel as mel\nimport os\n\n# \u63d2\u4ef6\u76ee\u5f55\nPLUGIN_DIR = os.path.dirname(os.path.abspath(__file__))\nICONS_DIR = os.path.join(PLUGIN_DIR, \"rigging_icons\")\n\n\ndef register_plugin(manager):\n    \"\"\"\u6ce8\u518c\u7ed1\u5b9a\u5de5\u5177\"\"\"\n\n    # ==================== \u9aa8\u9abc\u5de5\u5177 ====================\n\n    manager.register_tool(\n        tool_id=\"rigging_create_joint\",\n        name=\"\u521b\u5efa\u9aa8\u9abc\",\n        category=\"\u7ed1\u5b9a\",\n        subcategory=\"\u9aa8\u9abc\",\n        callback=create_joint_at_selection,\n        description=\"\u5728\u9009\u4e2d\u4f4d\u7f6e\u6216\u4e16\u754c\u539f\u70b9\u521b\u5efa\u9aa8\u9abc\",\n        icon=get_icon(\"joint.svg\")\n    )\n\n    manager.register_tool(\n        tool_id=\"rigging_orient_joints\",\n        name=\"\u5bf9\u9f50\u9aa8\u9abc\u65b9\u5411\",\n        category=\"\u7ed1\u5b9a\",\n        subcategory=\"\u9aa8\u9abc\",\n        callback=orient_joint_chain,\n        description=\"\u81ea\u52a8\u5bf9\u9f50\u9009\u4e2d\u9aa8\u9abc\u94fe\u7684\u65cb\u8f6c\",\n        icon=get_icon(\"orient.svg\")\n    )\n\n    manager.register_tool(\n        tool_id=\"rigging_mirror_joints\",\n        name=\"\u955c\u50cf\u9aa8\u9abc\",\n        category=\"\u7ed1\u5b9a\",\n        subcategory=\"\u9aa8\u9abc\",\n        callback=mirror_selected_joints,\n        description=\"\u6cbf YZ \u5e73\u9762\u955c\u50cf\u9aa8\u9abc\u94fe\",\n        icon=get_icon(\"mirror.svg\")\n    )\n\n    # ==================== \u63a7\u5236\u5668\u5de5\u5177 ====================\n\n    manager.register_tool(\n        tool_id=\"rigging_create_circle_ctrl\",\n        name=\"\u521b\u5efa\u5706\u5f62\u63a7\u5236\u5668\",\n        category=\"\u7ed1\u5b9a\",\n        subcategory=\"\u63a7\u5236\u5668\",\n        callback=lambda: create_controller(\"circle\"),\n        description=\"\u4e3a\u9009\u4e2d\u9aa8\u9abc\u521b\u5efa\u5706\u5f62 NURBS \u63a7\u5236\u5668\"\n    )\n\n    manager.register_tool(\n        tool_id=\"rigging_create_square_ctrl\",\n        name=\"\u521b\u5efa\u65b9\u5f62\u63a7\u5236\u5668\",\n        category=\"\u7ed1\u5b9a\",\n        subcategory=\"\u63a7\u5236\u5668\",\n        callback=lambda: create_controller(\"square\"),\n        description=\"\u4e3a\u9009\u4e2d\u9aa8\u9abc\u521b\u5efa\u65b9\u5f62 NURBS \u63a7\u5236\u5668\"\n    )\n\n    manager.register_tool(\n        tool_id=\"rigging_match_transforms\",\n        name=\"\u5339\u914d\u53d8\u6362\",\n        category=\"\u7ed1\u5b9a\",\n        subcategory=\"\u63a7\u5236\u5668\",\n        callback=match_transforms,\n        description=\"\u5c06\u7b2c\u4e00\u4e2a\u9009\u4e2d\u5bf9\u8c61\u5339\u914d\u5230\u7b2c\u4e8c\u4e2a\u7684\u4f4d\u7f6e\"\n    )\n\n    # ==================== \u7ea6\u675f\u5de5\u5177 ====================\n\n    manager.register_tool(\n        tool_id=\"rigging_parent_constraint\",\n        name=\"\u7236\u7ea6\u675f\",\n        category=\"\u7ed1\u5b9a\",\n        subcategory=\"\u7ea6\u675f\",\n        callback=create_parent_constraint,\n        description=\"\u521b\u5efa\u7236\u7ea6\u675f\uff08\u4fdd\u6301\u504f\u79fb\uff09\"\n    )\n\n    manager.register_tool(\n        tool_id=\"rigging_orient_constraint\",\n        name=\"\u65b9\u5411\u7ea6\u675f\",\n        category=\"\u7ed1\u5b9a\",\n        subcategory=\"\u7ea6\u675f\",\n        callback=lambda: create_constraint(\"orient\"),\n        description=\"\u521b\u5efa\u65b9\u5411\u7ea6\u675f\"\n    )\n\n    manager.register_tool(\n        tool_id=\"rigging_point_constraint\",\n        name=\"\u70b9\u7ea6\u675f\",\n        category=\"\u7ed1\u5b9a\",\n        subcategory=\"\u7ea6\u675f\",\n        callback=lambda: create_constraint(\"point\"),\n        description=\"\u521b\u5efa\u70b9\u7ea6\u675f\"\n    )\n\n\n# ==================== \u8f85\u52a9\u51fd\u6570 ====================\n\ndef get_icon(name):\n    \"\"\"\u83b7\u53d6\u56fe\u6807\u8def\u5f84\"\"\"\n    path = os.path.join(ICONS_DIR, name)\n    return path if os.path.exists(path) else \"\"\n\n\ndef require_selection(min_count=1, node_type=None):\n    \"\"\"\n    \u9a8c\u8bc1\u9009\u62e9\u7684\u88c5\u9970\u5668\n\n    Args:\n        min_count: \u6700\u5c11\u9009\u62e9\u6570\u91cf\n        node_type: \u8282\u70b9\u7c7b\u578b\u8fc7\u6ee4\n    \"\"\"\n    def decorator(func):\n        def wrapper(*args, **kwargs):\n            sel = cmds.ls(selection=True, type=node_type) if node_type else cmds.ls(selection=True)\n            if len(sel) &lt; min_count:\n                type_msg = f\" ({node_type})\" if node_type else \"\"\n                cmds.warning(f\"\u8bf7\u9009\u62e9\u81f3\u5c11 {min_count} \u4e2a\u5bf9\u8c61{type_msg}\")\n                return None\n            return func(*args, **kwargs)\n        return wrapper\n    return decorator\n\n\n# ==================== \u9aa8\u9abc\u5de5\u5177\u5b9e\u73b0 ====================\n\ndef create_joint_at_selection():\n    \"\"\"\u5728\u9009\u4e2d\u4f4d\u7f6e\u521b\u5efa\u9aa8\u9abc\"\"\"\n    sel = cmds.ls(selection=True)\n\n    if sel:\n        # \u5728\u9009\u4e2d\u5bf9\u8c61\u4f4d\u7f6e\u521b\u5efa\n        pos = cmds.xform(sel[0], query=True, worldSpace=True, translation=True)\n        cmds.select(clear=True)\n        jnt = cmds.joint(position=pos, name=\"joint#\")\n    else:\n        # \u5728\u4e16\u754c\u539f\u70b9\u521b\u5efa\n        cmds.select(clear=True)\n        jnt = cmds.joint(position=(0, 0, 0), name=\"joint#\")\n\n    print(f\"\u5df2\u521b\u5efa\u9aa8\u9abc: {jnt}\")\n    return jnt\n\n\n@require_selection(min_count=1, node_type=\"joint\")\ndef orient_joint_chain():\n    \"\"\"\u5bf9\u9f50\u9aa8\u9abc\u65b9\u5411\"\"\"\n    joints = cmds.ls(selection=True, type=\"joint\")\n\n    for jnt in joints:\n        # \u68c0\u67e5\u662f\u5426\u6709\u5b50\u9aa8\u9abc\n        children = cmds.listRelatives(jnt, children=True, type=\"joint\")\n\n        if children:\n            # \u6709\u5b50\u9aa8\u9abc\uff1a\u4f7f\u7528\u81ea\u52a8\u5bf9\u9f50\n            cmds.joint(jnt, edit=True, \n                      orientJoint=\"xyz\",\n                      secondaryAxisOrient=\"yup\",\n                      zeroScaleOrient=True)\n        else:\n            # \u672b\u7aef\u9aa8\u9abc\uff1a\u4f7f\u7528\u7236\u9aa8\u9abc\u7684\u65b9\u5411\n            parent = cmds.listRelatives(jnt, parent=True, type=\"joint\")\n            if parent:\n                parent_orient = cmds.getAttr(f\"{parent[0]}.jointOrient\")[0]\n                cmds.setAttr(f\"{jnt}.jointOrient\", *parent_orient)\n\n    print(f\"\u5df2\u5bf9\u9f50 {len(joints)} \u4e2a\u9aa8\u9abc\")\n\n\n@require_selection(min_count=1, node_type=\"joint\")\ndef mirror_selected_joints():\n    \"\"\"\u955c\u50cf\u9aa8\u9abc\"\"\"\n    sel = cmds.ls(selection=True, type=\"joint\")\n    root = sel[0]\n\n    # \u4f7f\u7528 Maya \u5185\u7f6e\u955c\u50cf\n    try:\n        mirrored = cmds.mirrorJoint(\n            root,\n            mirrorYZ=True,\n            mirrorBehavior=True,\n            searchReplace=(\"_L_\", \"_R_\")\n        )\n        cmds.select(mirrored)\n        print(f\"\u5df2\u955c\u50cf\u9aa8\u9abc: {root} -&gt; {mirrored[0]}\")\n    except Exception as e:\n        cmds.warning(f\"\u955c\u50cf\u5931\u8d25: {e}\")\n\n\n# ==================== \u63a7\u5236\u5668\u5de5\u5177\u5b9e\u73b0 ====================\n\nCTRL_SHAPES = {\n    \"circle\": lambda r: cmds.circle(normal=(0, 1, 0), radius=r)[0],\n    \"square\": lambda r: cmds.nurbsSquare(normal=(0, 1, 0), sideLength=r * 2)[0],\n}\n\n\n@require_selection(min_count=1)\ndef create_controller(shape=\"circle\", scale=2.0):\n    \"\"\"\u4e3a\u9009\u4e2d\u5bf9\u8c61\u521b\u5efa\u63a7\u5236\u5668\"\"\"\n    controllers = []\n\n    for obj in cmds.ls(selection=True):\n        # \u521b\u5efa\u5f62\u72b6\n        if shape in CTRL_SHAPES:\n            ctrl = CTRL_SHAPES[shape](scale)\n        else:\n            ctrl = cmds.circle(normal=(0, 1, 0), radius=scale)[0]\n\n        # \u91cd\u547d\u540d\n        base_name = obj.replace(\"_jnt\", \"\").replace(\"_JNT\", \"\")\n        ctrl = cmds.rename(ctrl, f\"{base_name}_ctrl\")\n\n        # \u521b\u5efa\u504f\u79fb\u7ec4\n        grp = cmds.group(ctrl, name=f\"{ctrl}_grp\")\n\n        # \u5bf9\u9f50\u5230\u76ee\u6807\n        cmds.matchTransform(grp, obj)\n\n        # \u521b\u5efa\u7ea6\u675f\n        cmds.parentConstraint(ctrl, obj, maintainOffset=True)\n\n        controllers.append(ctrl)\n\n    cmds.select(controllers)\n    print(f\"\u5df2\u521b\u5efa {len(controllers)} \u4e2a\u63a7\u5236\u5668\")\n    return controllers\n\n\n@require_selection(min_count=2)\ndef match_transforms():\n    \"\"\"\u5339\u914d\u53d8\u6362\"\"\"\n    sel = cmds.ls(selection=True)\n    target = sel[-1]  # \u6700\u540e\u9009\u4e2d\u7684\u662f\u76ee\u6807\n    sources = sel[:-1]\n\n    for src in sources:\n        cmds.matchTransform(src, target, position=True, rotation=True)\n\n    print(f\"\u5df2\u5c06 {len(sources)} \u4e2a\u5bf9\u8c61\u5339\u914d\u5230 {target}\")\n\n\n# ==================== \u7ea6\u675f\u5de5\u5177\u5b9e\u73b0 ====================\n\n@require_selection(min_count=2)\ndef create_parent_constraint():\n    \"\"\"\u521b\u5efa\u7236\u7ea6\u675f\"\"\"\n    sel = cmds.ls(selection=True)\n    driven = sel[-1]\n    drivers = sel[:-1]\n\n    constraint = cmds.parentConstraint(drivers, driven, maintainOffset=True)[0]\n    print(f\"\u5df2\u521b\u5efa\u7236\u7ea6\u675f: {constraint}\")\n    return constraint\n\n\n@require_selection(min_count=2)\ndef create_constraint(constraint_type):\n    \"\"\"\u521b\u5efa\u6307\u5b9a\u7c7b\u578b\u7684\u7ea6\u675f\"\"\"\n    sel = cmds.ls(selection=True)\n    driven = sel[-1]\n    drivers = sel[:-1]\n\n    constraint_funcs = {\n        \"orient\": cmds.orientConstraint,\n        \"point\": cmds.pointConstraint,\n        \"scale\": cmds.scaleConstraint,\n        \"aim\": cmds.aimConstraint,\n    }\n\n    func = constraint_funcs.get(constraint_type)\n    if func:\n        constraint = func(drivers, driven, maintainOffset=True)[0]\n        print(f\"\u5df2\u521b\u5efa {constraint_type} \u7ea6\u675f: {constraint}\")\n        return constraint\n    else:\n        cmds.warning(f\"\u672a\u77e5\u7ea6\u675f\u7c7b\u578b: {constraint_type}\")\n</code></pre>"},{"location":"plugin_development/#_11","title":"\u6700\u4f73\u5b9e\u8df5","text":""},{"location":"plugin_development/#1_1","title":"1. \u9519\u8bef\u5904\u7406","text":"<pre><code>def my_tool():\n    \"\"\"\u6b63\u786e\u7684\u9519\u8bef\u5904\u7406\u793a\u4f8b\"\"\"\n\n    # \u68c0\u67e5\u9009\u62e9\n    sel = cmds.ls(selection=True)\n    if not sel:\n        cmds.warning(\"\u8bf7\u5148\u9009\u62e9\u5bf9\u8c61\")  # warning \u4e0d\u4f1a\u629b\u51fa\u5f02\u5e38\n        return\n\n    try:\n        # \u6267\u884c\u53ef\u80fd\u5931\u8d25\u7684\u64cd\u4f5c\n        cmds.polySmooth(sel[0], divisions=2)\n    except RuntimeError as e:\n        # \u4f7f\u7528 warning \u800c\u975e error\n        cmds.warning(f\"\u64cd\u4f5c\u5931\u8d25: {e}\")\n        return\n    except Exception as e:\n        # \u8bb0\u5f55\u8be6\u7ec6\u9519\u8bef\n        import traceback\n        traceback.print_exc()\n        cmds.error(f\"\u672a\u77e5\u9519\u8bef: {e}\")\n</code></pre>"},{"location":"plugin_development/#2-undo","title":"2. Undo \u652f\u6301","text":"<p>\u5de5\u5177\u6267\u884c\u4f1a\u81ea\u52a8\u5305\u88c5\u5728 <code>cmds.undoInfo</code> \u5757\u4e2d\uff0c\u7528\u6237\u53ef\u4ee5\u7528 Ctrl+Z \u64a4\u9500\u6574\u4e2a\u64cd\u4f5c\u3002</p> <pre><code># ViewModel.execute_tool \u5185\u90e8\u5b9e\u73b0\uff1a\ncmds.undoInfo(openChunk=True, chunkName=tool.name)\ntry:\n    tool.execute()\nfinally:\n    cmds.undoInfo(closeChunk=True)\n</code></pre>"},{"location":"plugin_development/#3_1","title":"3. \u8fdb\u5ea6\u6761","text":"<p>\u5bf9\u4e8e\u8017\u65f6\u64cd\u4f5c\uff0c\u4f7f\u7528 Maya \u8fdb\u5ea6\u6761\uff1a</p> <pre><code>def batch_process():\n    \"\"\"\u6279\u91cf\u5904\u7406\u793a\u4f8b\"\"\"\n    items = cmds.ls(type=\"mesh\")\n    total = len(items)\n\n    cmds.progressWindow(\n        title=\"\u6279\u91cf\u5904\u7406\",\n        progress=0,\n        max=total,\n        isInterruptable=True\n    )\n\n    try:\n        for i, item in enumerate(items):\n            # \u68c0\u67e5\u53d6\u6d88\n            if cmds.progressWindow(query=True, isCancelled=True):\n                break\n\n            # \u5904\u7406\n            process_mesh(item)\n\n            # \u66f4\u65b0\u8fdb\u5ea6\n            cmds.progressWindow(\n                edit=True,\n                progress=i + 1,\n                status=f\"\u5904\u7406\u4e2d: {item}\"\n            )\n    finally:\n        cmds.progressWindow(endProgress=True)\n</code></pre>"},{"location":"plugin_development/#4","title":"4. \u7ebf\u7a0b\u5b89\u5168","text":"<p>Maya \u547d\u4ee4\u53ea\u80fd\u5728\u4e3b\u7ebf\u7a0b\u6267\u884c\u3002\u5982\u9700\u5f02\u6b65\u64cd\u4f5c\uff1a</p> <pre><code>import maya.utils\n\ndef my_async_tool():\n    \"\"\"\u5728\u540e\u53f0\u7ebf\u7a0b\u5904\u7406\uff0c\u7ed3\u679c\u5728\u4e3b\u7ebf\u7a0b\u5e94\u7528\"\"\"\n    import threading\n\n    def background_work():\n        # \u8ba1\u7b97\u5bc6\u96c6\u578b\u5de5\u4f5c\n        result = heavy_computation()\n\n        # \u56de\u5230\u4e3b\u7ebf\u7a0b\u6267\u884c Maya \u547d\u4ee4\n        maya.utils.executeDeferred(lambda: apply_result(result))\n\n    thread = threading.Thread(target=background_work)\n    thread.start()\n</code></pre>"},{"location":"plugin_development/#5","title":"5. \u547d\u540d\u89c4\u8303","text":"\u7c7b\u578b \u89c4\u8303 \u793a\u4f8b tool_id snake_case\uff0c\u5e26\u524d\u7f00 <code>mytools_create_rig</code> \u51fd\u6570\u540d snake_case\uff0c\u52a8\u8bcd\u5f00\u5934 <code>create_joint_chain()</code> \u5206\u7c7b \u4e2d\u6587\u6216\u82f1\u6587\uff0c\u7b80\u6d01 \"\u5efa\u6a21\"\u3001\"Rigging\" \u63cf\u8ff0 \u7b80\u77ed\u8bf4\u660e\u529f\u80fd \"\u5728\u9009\u4e2d\u4f4d\u7f6e\u521b\u5efa\u9aa8\u9abc\""},{"location":"plugin_development/#_12","title":"\u9ad8\u7ea7\u7279\u6027","text":""},{"location":"plugin_development/#1_2","title":"1. \u8bbf\u95ee\u5176\u4ed6\u7ba1\u7406\u5668","text":"<pre><code>def register_plugin(manager):\n    # \u8bbf\u95ee CategoryManager\n    from floating_toolbox.core.category_manager import CategoryManager\n    cat_mgr = CategoryManager()\n\n    # \u6dfb\u52a0\u81ea\u5b9a\u4e49\u5206\u7c7b\u56fe\u6807\n    cat_mgr.add_category(\"\u6211\u7684\u5de5\u5177\", icon=\"my_category.svg\")\n\n    # \u6ce8\u518c\u5de5\u5177\n    manager.register_tool(...)\n</code></pre>"},{"location":"plugin_development/#2_1","title":"2. \u52a8\u6001\u5de5\u5177\u6ce8\u518c","text":"<pre><code>def register_plugin(manager):\n    \"\"\"\u6839\u636e Maya \u7248\u672c\u52a8\u6001\u6ce8\u518c\u5de5\u5177\"\"\"\n    maya_version = int(cmds.about(version=True))\n\n    # \u57fa\u7840\u5de5\u5177\n    manager.register_tool(\n        tool_id=\"base_tool\",\n        name=\"\u57fa\u7840\u5de5\u5177\",\n        category=\"\u901a\u7528\",\n        callback=base_function\n    )\n\n    # Maya 2022+ \u4e13\u5c5e\u5de5\u5177\n    if maya_version &gt;= 2022:\n        manager.register_tool(\n            tool_id=\"new_feature_tool\",\n            name=\"\u65b0\u529f\u80fd\u5de5\u5177\",\n            category=\"\u901a\u7528\",\n            callback=new_feature\n        )\n</code></pre>"},{"location":"plugin_development/#3_2","title":"3. \u914d\u7f6e\u6301\u4e45\u5316","text":"<pre><code>from floating_toolbox.core.config_manager import ConfigManager\n\ndef my_tool_with_settings():\n    \"\"\"\u5e26\u6301\u4e45\u5316\u8bbe\u7f6e\u7684\u5de5\u5177\"\"\"\n    config = ConfigManager()\n\n    # \u8bfb\u53d6\u4e0a\u6b21\u8bbe\u7f6e\n    settings = config.load_config()\n    last_value = settings.get(\"my_tool_setting\", 5)\n\n    # \u4f7f\u7528\u8bbe\u7f6e\n    result = cmds.polyCube(width=last_value)\n\n    # \u4fdd\u5b58\u8bbe\u7f6e\n    settings[\"my_tool_setting\"] = last_value\n    config.save_config(settings)\n</code></pre>"},{"location":"plugin_development/#4-ui","title":"4. \u81ea\u5b9a\u4e49 UI \u5bf9\u8bdd\u6846","text":"<pre><code>from PySide6 import QtWidgets\n\ndef tool_with_dialog():\n    \"\"\"\u5e26\u53c2\u6570\u5bf9\u8bdd\u6846\u7684\u5de5\u5177\"\"\"\n\n    # \u521b\u5efa\u5bf9\u8bdd\u6846\n    dialog = QtWidgets.QInputDialog()\n    value, ok = dialog.getInt(\n        None, \n        \"\u53c2\u6570\u8bbe\u7f6e\",\n        \"\u8f93\u5165\u5206\u6bb5\u6570:\",\n        value=4,\n        min=1,\n        max=10\n    )\n\n    if ok:\n        cmds.polyCube(subdivisionsWidth=value)\n</code></pre>"},{"location":"plugin_development/#_13","title":"\u8c03\u8bd5\u6280\u5de7","text":""},{"location":"plugin_development/#1_3","title":"1. \u65e5\u5fd7\u8f93\u51fa","text":"<pre><code># \u7b80\u5355\u8f93\u51fa\nprint(\"\u8c03\u8bd5\u4fe1\u606f\")\n\n# \u4f7f\u7528\u5de5\u5177\u76d2\u65e5\u5fd7\nfrom floating_toolbox.core.logger import logger\n\nlogger.debug(\"\u8be6\u7ec6\u8c03\u8bd5\u4fe1\u606f\")\nlogger.info(\"\u4e00\u822c\u4fe1\u606f\")\nlogger.warning(\"\u8b66\u544a\u4fe1\u606f\")\nlogger.error(\"\u9519\u8bef\u4fe1\u606f\")\n</code></pre>"},{"location":"plugin_development/#2_2","title":"2. \u70ed\u91cd\u8f7d","text":"<p>\u5f00\u53d1\u65f6\u65e0\u9700\u91cd\u542f Maya\uff1a 1. \u53f3\u952e\u70b9\u51fb\u5de5\u5177\u76d2\u5934\u50cf 2. \u9009\u62e9\"\u91cd\u65b0\u52a0\u8f7d\u63d2\u4ef6\" 3. \u6240\u6709\u63d2\u4ef6\u5c06\u91cd\u65b0\u5bfc\u5165</p>"},{"location":"plugin_development/#3_3","title":"3. \u67e5\u770b\u65e5\u5fd7\u6587\u4ef6","text":"<p>\u65e5\u5fd7\u4f4d\u7f6e\uff1a<code>~/.maya_toolbox/logs/toolbox.log</code></p>"},{"location":"plugin_development/#_14","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"plugin_development/#q1","title":"Q1: \u63d2\u4ef6\u6ca1\u6709\u52a0\u8f7d\uff1f","text":"<p>\u68c0\u67e5\u6b65\u9aa4\uff1a 1. \u786e\u8ba4\u6587\u4ef6\u5728 <code>plugins/</code> \u76ee\u5f55\u4e0b 2. \u786e\u8ba4\u6709 <code>register_plugin(manager)</code> \u51fd\u6570 3. \u68c0\u67e5 Maya Script Editor \u7684\u9519\u8bef\u4fe1\u606f 4. \u786e\u8ba4 Python \u8bed\u6cd5\u6b63\u786e\uff08\u65e0 IndentationError \u7b49\uff09</p>"},{"location":"plugin_development/#q2","title":"Q2: \u5de5\u5177\u6ca1\u6709\u663e\u793a\uff1f","text":"<p>\u53ef\u80fd\u539f\u56e0\uff1a - <code>tool_id</code> \u91cd\u590d\uff0c\u88ab\u5176\u4ed6\u5de5\u5177\u8986\u76d6 - \u5206\u7c7b\u540d\u79f0\u6709\u9690\u85cf\u7a7a\u683c - <code>callback</code> \u51fd\u6570\u6709\u8bed\u6cd5\u9519\u8bef</p>"},{"location":"plugin_development/#q3","title":"Q3: \u56fe\u6807\u4e0d\u663e\u793a\uff1f","text":"<p>\u68c0\u67e5\uff1a - \u8def\u5f84\u662f\u5426\u6b63\u786e\uff08\u4f7f\u7528 <code>os.path.exists()</code> \u9a8c\u8bc1\uff09 - \u6587\u4ef6\u683c\u5f0f\u662f\u5426\u4e3a SVG \u6216 PNG - \u76f8\u5bf9\u8def\u5f84\u662f\u5426\u76f8\u5bf9\u4e8e\u6b63\u786e\u7684\u76ee\u5f55</p>"},{"location":"plugin_development/#q4","title":"Q4: \u5de5\u5177\u6267\u884c\u62a5\u9519\uff1f","text":"<p>\u8c03\u8bd5\u65b9\u6cd5\uff1a <pre><code>import traceback\n\ndef my_tool():\n    try:\n        # \u5de5\u5177\u903b\u8f91\n        pass\n    except Exception as e:\n        traceback.print_exc()  # \u6253\u5370\u5b8c\u6574\u5806\u6808\n        cmds.warning(str(e))\n</code></pre></p>"},{"location":"plugin_development/#_15","title":"\u6a21\u677f","text":""},{"location":"plugin_development/#_16","title":"\u6700\u5c0f\u63d2\u4ef6\u6a21\u677f","text":"<pre><code>\"\"\"\u6700\u5c0f\u63d2\u4ef6\"\"\"\nimport maya.cmds as cmds\n\ndef register_plugin(manager):\n    manager.register_tool(\n        tool_id=\"my_tool\",\n        name=\"\u6211\u7684\u5de5\u5177\",\n        category=\"\u81ea\u5b9a\u4e49\",\n        callback=my_function\n    )\n\ndef my_function():\n    print(\"Hello from my tool!\")\n</code></pre>"},{"location":"plugin_development/#_17","title":"\u5b8c\u6574\u63d2\u4ef6\u6a21\u677f","text":"<pre><code>\"\"\"\n[\u63d2\u4ef6\u540d\u79f0]\n\n[\u63cf\u8ff0]\n\n\u4f5c\u8005: [Your Name]\n\u7248\u672c: 1.0.0\n\"\"\"\nimport maya.cmds as cmds\nimport os\n\nPLUGIN_DIR = os.path.dirname(os.path.abspath(__file__))\n\n\ndef register_plugin(manager):\n    \"\"\"\u6ce8\u518c\u5de5\u5177\"\"\"\n\n    manager.register_tool(\n        tool_id=\"myplugin_tool_1\",\n        name=\"\u5de5\u51771\",\n        category=\"\u6211\u7684\u5206\u7c7b\",\n        subcategory=\"\u5b50\u5206\u7c7b\",\n        callback=tool_1_function,\n        description=\"\u5de5\u51771\u7684\u63cf\u8ff0\",\n        icon=os.path.join(PLUGIN_DIR, \"icons\", \"tool1.svg\")\n    )\n\n\ndef tool_1_function():\n    \"\"\"\u5de5\u51771\u7684\u5b9e\u73b0\"\"\"\n    sel = cmds.ls(selection=True)\n    if not sel:\n        cmds.warning(\"\u8bf7\u9009\u62e9\u5bf9\u8c61\")\n        return\n\n    # \u5b9e\u73b0\u5de5\u5177\u903b\u8f91\n    result = do_something(sel)\n    print(f\"\u5b8c\u6210: {result}\")\n    return result\n\n\ndef do_something(objects):\n    \"\"\"\u8f85\u52a9\u51fd\u6570\"\"\"\n    return len(objects)\n</code></pre>"},{"location":"plugin_development/#_18","title":"\u7248\u672c\u5386\u53f2","text":"\u7248\u672c \u65e5\u671f \u53d8\u66f4 1.0 2024-12 \u521d\u59cb\u7248\u672c 1.1 2025-12 \u6dfb\u52a0\u5b50\u5206\u7c7b\u652f\u6301 1.2 2025-12 \u6dfb\u52a0\u9ad8\u7ea7\u7279\u6027\u548c\u6a21\u677f"},{"location":"usage/","title":"\u4f7f\u7528\u6559\u7a0b","text":"<p>\u672c\u7ae0\u8282\u5c06\u8be6\u7ec6\u4ecb\u7ecd Maya Floating Toolbox \u7684\u6838\u5fc3\u529f\u80fd\u548c\u64cd\u4f5c\u6d41\u7a0b\u3002</p>"},{"location":"usage/#_2","title":"\u754c\u9762\u6a21\u5f0f","text":"<p>\u5de5\u5177\u63d0\u4f9b\u4e24\u79cd\u4e3b\u8981\u7684\u754c\u9762\u6a21\u5f0f\uff0c\u4ee5\u9002\u5e94\u4e0d\u540c\u7684\u5de5\u4f5c\u6d41\uff1a</p>"},{"location":"usage/#1-full-panel","title":"1. \u6d6e\u52a8\u9762\u677f (Full Panel)","text":"<p>\u8fd9\u662f\u9ed8\u8ba4\u7684\u5c55\u5f00\u6a21\u5f0f\uff0c\u63d0\u4f9b\u4e86\u6700\u5b8c\u6574\u7684\u529f\u80fd\uff1a - \u641c\u7d22\u529f\u80fd\uff1a\u901a\u8fc7\u9876\u90e8\u7684\u641c\u7d22\u680f\u5feb\u901f\u67e5\u627e\u5de5\u5177\u3002 - \u5206\u7c7b\u6d4f\u89c8\uff1a\u5de6\u4fa7\uff08\u6216\u4e0a\u65b9\uff09\u5c55\u793a\u5de5\u5177\u5206\u7c7b\uff0c\u652f\u6301\u591a\u7ea7\u76ee\u5f55\u3002 - \u81ea\u5b9a\u4e49\u5934\u50cf\uff1a\u652f\u6301\u4e2a\u6027\u5316\u5934\u50cf\u663e\u793a\u3002 - \u70ed\u91cd\u8f7d\uff1a\u53f3\u952e\u5934\u50cf\u53ef\u4ee5\u4e00\u952e\u91cd\u8f7d\u6240\u6709\u811a\u672c\u63d2\u4ef6\u3002</p>"},{"location":"usage/#2-docked-panel","title":"2. \u505c\u9760\u9762\u677f (Docked Panel)","text":"<p>\u5982\u679c\u60a8\u5e0c\u671b\u5de5\u5177\u7bb1\u59cb\u7ec8\u53ef\u89c1\u4e14\u4e0d\u906e\u6321\u89c6\u53e3\uff0c\u53ef\u4ee5\u5c06\u5176\u505c\u9760\u5728 Maya \u4fa7\u8fb9\u680f\uff1a - \u70b9\u51fb\u9762\u677f\u53f3\u4e0a\u89d2\u7684 Dock \u56fe\u6807\u8fdb\u884c\u505c\u9760\u3002 - \u518d\u6b21\u70b9\u51fb Undock \u53ef\u6062\u590d\u4e3a\u6d6e\u52a8\u7a97\u53e3\u3002</p>"},{"location":"usage/#marking-menu","title":"\u6807\u8bb0\u83dc\u5355 (Marking Menu)","text":"<p>\u6807\u8bb0\u83dc\u5355\u662f\u672c\u5de5\u5177\u7684\u6838\u5fc3\u52a0\u901f\u5668\u3002</p>"},{"location":"usage/#_3","title":"\u914d\u7f6e\u60a8\u7684\u83dc\u5355","text":"<ol> <li>\u6253\u5f00 Marking Menu Editor\u3002</li> <li>\u5f84\u5411\u533a\u57df\uff1a\u62d6\u62fd\u5de5\u5177\u5230 8 \u4e2a\u69fd\u4f4d\u4e2d\u3002</li> <li>\u7ebf\u6027\u533a\u57df\uff1a\u5728\u4e0b\u65b9\u5217\u8868\u6dfb\u52a0\u989d\u5916\u7684\u5e38\u7528\u547d\u4ee4\u3002</li> <li>\u4fdd\u5b58\u6a21\u7248\uff1a\u60a8\u53ef\u4ee5\u4e3a\u4e0d\u540c\u7684\u73af\u8282\uff08\u5982\u89d2\u8272\u7ed1\u5b9a\u3001\u7279\u6548\uff09\u4fdd\u5b58\u4e0d\u540c\u7684\u6a21\u7248\u3002</li> </ol>"},{"location":"usage/#_4","title":"\u5728\u89c6\u56fe\u4e2d\u4f7f\u7528","text":"<p>\u5728 Maya \u89c6\u56fe\u4e2d\uff0c\u6309\u4f4f <code>Ctrl + Alt + \u4e2d\u952e</code> \u5373\u53ef\u547c\u51fa\u5f53\u524d\u6fc0\u6d3b\u7684\u6807\u8bb0\u83dc\u5355\u3002</p>"},{"location":"usage/#_5","title":"\u5de5\u5177\u7ba1\u7406","text":""},{"location":"usage/#_6","title":"\u6dfb\u52a0\u65b0\u5de5\u5177","text":"<ul> <li>\u5728\u9762\u677f\u7a7a\u767d\u5904\u53f3\u952e\u6216\u901a\u8fc7\u83dc\u5355\u9009\u62e9 \"\u65b0\u5efa\u5de5\u5177\"\u3002</li> <li>\u8f93\u5165\u5de5\u5177\u540d\u79f0\u3001\u56fe\u6807\u3001\u5206\u7c7b\u4ee5\u53ca Python \u4ee3\u7801\u3002</li> <li>\u652f\u6301\u76f4\u63a5\u5728\u7f16\u8f91\u5668\u4e2d\u6d4b\u8bd5\u8fd0\u884c\u3002</li> </ul>"},{"location":"usage/#_7","title":"\u7f16\u8f91/\u5220\u9664","text":"<ul> <li>\u53f3\u952e\u70b9\u51fb\u4efb\u4f55\u73b0\u6709\u5de5\u5177\u56fe\u6807\u3002</li> <li>\u60a8\u53ef\u4ee5\u968f\u65f6\u4fee\u6539\u4ee3\u7801\u6216\u5c06\u5176\u79fb\u52a8\u5230\u5176\u4ed6\u5206\u7c7b\u3002</li> </ul>"}]}